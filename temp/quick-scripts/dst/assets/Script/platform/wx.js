
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/Script/platform/wx.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'db98c1e5lhFjruyt6oSbPsr', 'wx');
// Script/platform/wx.js

"use strict";

cc.Class({
  "extends": cc.Component,
  properties: {},
  onLoad: function onLoad() {
    if (cc.sys.isNative) {
      window.platform_wx = true;

      if (!window.wx_flag_e) {
        window.wx_flag_e = true;
        cc.game.addPersistRootNode(this.node);
      } // this.AppID =  "wx79ec924e452db83d";
      // this.AppSecret = "509afff10023ccb38c46b5b0a127aa48";


      this.AppID = "wx45d424390f66b4ef";
      this.AppSecret = "c5364c87cea56de25fe9e2514b236a14";
      this.androidPackageName = "youme/playcity/game/wxapi/WXEntryActivity";
      var TOKEN_CODE_URL = "https://api.weixin.qq.com/sns/oauth2/access_token?appid=%s&secret=%s&code=%s&grant_type=authorization_code";
      var USER_INFO_URL = "https://api.weixin.qq.com/sns/userinfo?access_token=%s&openid=%s";
      var REFRESH_TOKEN_URL = "https://api.weixin.qq.com/sns/oauth2/refresh_token?appid=%s&grant_type=refresh_token&refresh_token=%s";
      this.messFire = onfire.on("onplatform", this.onPlatform.bind(this)); //监听第三方相关事件

      var url = "https://fangka.youmegame.cn/shareUrl.php"; //var self = this;

      var xhr = new XMLHttpRequest();

      xhr.onreadystatechange = function () {
        if (xhr.readyState == 4 && xhr.status >= 200 && xhr.status < 400) {
          var result = JSON.parse(xhr.responseText);
          window.shareurl = result.shareUrl;
        }
      };

      xhr.open("GET", url, true);
      xhr.send();
    } else {//(console.log("yyyyyyyyyyyy"));
    }
  },
  start: function start() {//onfire.fire("onplatform","login","login");
  },
  update: function update(dt) {},
  onPlatform: function onPlatform() //监听游戏中发起的第三方事件
  {
    window.platform_opera = arguments[0];
    console.log(window.platform_opera);
    console.log(arguments[0] + "--------" + arguments[1] + "--------" + arguments[2] + "--------" + arguments[3]);

    if (arguments[0] == "init") {} else if (arguments[0] == "login") {
      if (cc.sys.isNative && cc.sys.os == cc.sys.OS_IOS) {
        var ret = jsb.reflection.callStaticMethod("AdMaster", "sendAuthRequest:title:", "1", "1");
      } else {
        var s = jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity", "sendAuthRequest", "()I");
      } //console.log(s);

    } else if (arguments[0] == "share") {
      if (cc.sys.isNative && cc.sys.os == cc.sys.OS_IOS) {
        var _ret = jsb.reflection.callStaticMethod("AdMaster", "share:title:", "", "");
      } else {
        var s = jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity", "share", "()I");
      }
    } else if (arguments[0] == "openurl") {} else if (arguments[0] == "shareurl") {
      if (cc.sys.isNative && cc.sys.os == cc.sys.OS_IOS) {
        var _ret2 = jsb.reflection.callStaticMethod("AdMaster", "shareurl:cont:url:", arguments[1], arguments[2], arguments[3]);
      } else {
        var s = jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity", "shareurl", "(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)I", arguments[1], arguments[2], arguments[3]);
      }
    }
  },
  onDestroy: function onDestroy() {
    if (cc.sys.isNative) {
      onfire.un(this.messFire);
    }
  },
  getAccessToken: function getAccessToken(code) {
    //获取accessToken
    var url = "https://api.weixin.qq.com/sns/oauth2/access_token?appid=" + this.AppID + "&secret=" + this.AppSecret + "&code=" + code + "&grant_type=authorization_code";
    console.log("url=>>>> " + url);
    var self = this;
    var xhr = new XMLHttpRequest();

    xhr.onreadystatechange = function () {
      if (xhr.readyState == 4 && xhr.status >= 200 && xhr.status < 400) {
        var response = xhr.responseText;
        console.log("response===>>>", response);
        var msg = JSON.parse(response);
        var access_token = msg.access_token;
        var refresh_token = msg.refresh_token;
        var openid = msg.openid;
        window.platform_openid = openid; //如果超时进行重新刷新accessToken

        if (msg.expires_in >= 7200) {
          //刷新accesstoken
          // self.freshAccessToken(refresh_token).then(function(data){
          //    console.log("刷新accessToken 是",data);
          //    access_token = data;
          self.getUserInfo(access_token, openid); //});
          //console.log("这个accessToken是刷新出来的token",access_token);
        } else {
          self.getUserInfo(access_token, openid);
        }
      }
    };

    xhr.open("GET", url, true);
    xhr.send();
  },
  getUserInfo: function getUserInfo(access_token, openid) {
    //获取用户信息
    console.log("accessToken is " + access_token);
    console.log("openid is " + openid);
    window.platform_acc = openid + "";
    window.platform_pwd = "wxpwd1";
    var url = "https://api.weixin.qq.com/sns/userinfo?access_token=" + access_token + "&openid=" + openid;
    var self = this;
    var xhr = new XMLHttpRequest();

    xhr.onreadystatechange = function () {
      if (xhr.readyState == 4 && xhr.status >= 200 && xhr.status < 400) {
        var response = xhr.responseText;
        console.log("response===>>>", response);
        var msg = JSON.parse(response);
        console.log("msg is ", msg);
        console.log("nickName is " + msg.nickname);
        window.platform_name = msg.nickname;
        window.platform_head = msg.headimgurl;
        window.platform_head = window.platform_head.replace("http:", "https:");
        console.log("city is " + msg.city);
        console.log("country " + msg.country);
        console.log("sex is  " + msg.sex); //cc.find("Canvas/com_Register").active = true;

        onfire.fire("onplatform_login", window.platform_acc, window.platform_pwd);
      }
    };

    xhr.open("GET", url, true);
    xhr.send();
  }
});

window.platformResponse = function () {
  console.log("-----");
  console.log(arguments[0]);

  if (arguments[0] != undefined) {
    cc.find("wx").getComponent("wx").getAccessToken(arguments[0]);
  }
};

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcU2NyaXB0XFxwbGF0Zm9ybVxcd3guanMiXSwibmFtZXMiOlsiY2MiLCJDbGFzcyIsIkNvbXBvbmVudCIsInByb3BlcnRpZXMiLCJvbkxvYWQiLCJzeXMiLCJpc05hdGl2ZSIsIndpbmRvdyIsInBsYXRmb3JtX3d4Iiwid3hfZmxhZ19lIiwiZ2FtZSIsImFkZFBlcnNpc3RSb290Tm9kZSIsIm5vZGUiLCJBcHBJRCIsIkFwcFNlY3JldCIsImFuZHJvaWRQYWNrYWdlTmFtZSIsIlRPS0VOX0NPREVfVVJMIiwiVVNFUl9JTkZPX1VSTCIsIlJFRlJFU0hfVE9LRU5fVVJMIiwibWVzc0ZpcmUiLCJvbmZpcmUiLCJvbiIsIm9uUGxhdGZvcm0iLCJiaW5kIiwidXJsIiwieGhyIiwiWE1MSHR0cFJlcXVlc3QiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZWFkeVN0YXRlIiwic3RhdHVzIiwicmVzdWx0IiwiSlNPTiIsInBhcnNlIiwicmVzcG9uc2VUZXh0Iiwic2hhcmV1cmwiLCJzaGFyZVVybCIsIm9wZW4iLCJzZW5kIiwic3RhcnQiLCJ1cGRhdGUiLCJkdCIsInBsYXRmb3JtX29wZXJhIiwiYXJndW1lbnRzIiwiY29uc29sZSIsImxvZyIsIm9zIiwiT1NfSU9TIiwicmV0IiwianNiIiwicmVmbGVjdGlvbiIsImNhbGxTdGF0aWNNZXRob2QiLCJzIiwib25EZXN0cm95IiwidW4iLCJnZXRBY2Nlc3NUb2tlbiIsImNvZGUiLCJzZWxmIiwicmVzcG9uc2UiLCJtc2ciLCJhY2Nlc3NfdG9rZW4iLCJyZWZyZXNoX3Rva2VuIiwib3BlbmlkIiwicGxhdGZvcm1fb3BlbmlkIiwiZXhwaXJlc19pbiIsImdldFVzZXJJbmZvIiwicGxhdGZvcm1fYWNjIiwicGxhdGZvcm1fcHdkIiwibmlja25hbWUiLCJwbGF0Zm9ybV9uYW1lIiwicGxhdGZvcm1faGVhZCIsImhlYWRpbWd1cmwiLCJyZXBsYWNlIiwiY2l0eSIsImNvdW50cnkiLCJzZXgiLCJmaXJlIiwicGxhdGZv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UUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVksYUFBYWMsR0FBRyxDQUFDZ0IsR0FBN0IsRUFiZ0UsQ0FlaEU7O0FBQ0F0RCxRQUFBQSxNQUFNLENBQUN1RCxJQUFQLENBQVksa0JBQVosRUFBK0JwRSxNQUFNLENBQUMwRCxZQUF0QyxFQUFtRDFELE1BQU0sQ0FBQzJELFlBQTFEO0FBQ0g7QUFDSixLQW5CRDs7QUFvQkF6QyxJQUFBQSxHQUFHLENBQUNXLElBQUosQ0FBUyxLQUFULEVBQWVaLEdBQWYsRUFBbUIsSUFBbkI7QUFDQUMsSUFBQUEsR0FBRyxDQUFDWSxJQUFKO0FBRUg7QUFyS0ksQ0FBVDs7QUF5S0E5QixNQUFNLENBQUNxRSxnQkFBUCxHQUEwQixZQUMxQjtBQUNJakMsRUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVksT0FBWjtBQUNBRCxFQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWUYsU0FBUyxDQUFDLENBQUQsQ0FBckI7O0FBQ0EsTUFBSUEsU0FBUyxDQUFDLENBQUQsQ0FBVCxJQUFnQm1DLFNBQXBCLEVBQThCO0FBQzFCN0UsSUFBQUEsRUFBRSxDQUFDOEUsSUFBSCxDQUFRLElBQVIsRUFBY0MsWUFBZCxDQUEyQixJQUEzQixFQUFpQ3pCLGNBQWpDLENBQWdEWixTQUFTLENBQUMsQ0FBRCxDQUF6RDtBQUNIO0FBQ0osQ0FQRCIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsiY2MuQ2xhc3Moe1xuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcblxuICAgIHByb3BlcnRpZXM6IHtcblxuXG4gICAgfSxcblxuICAgIG9uTG9hZCAoKSB7XG4gICAgICAgIGlmIChjYy5zeXMuaXNOYXRpdmUpe1xuICAgICAgICAgICAgd2luZG93LnBsYXRmb3JtX3d4ID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmICghd2luZG93Lnd4X2ZsYWdfZSl7XG4gICAgICAgICAgICAgICAgd2luZG93Lnd4X2ZsYWdfZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgY2MuZ2FtZS5hZGRQZXJzaXN0Um9vdE5vZGUodGhpcy5ub2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHRoaXMuQXBwSUQgPSAgXCJ3eDc5ZWM5MjRlNDUyZGI4M2RcIjtcbiAgICAgICAgICAgIC8vIHRoaXMuQXBwU2VjcmV0ID0gXCI1MDlhZmZmMTAwMjNjY2IzOGM0NmI1YjBhMTI3YWE0OFwiO1xuICAgICAgICAgICAgdGhpcy5BcHBJRCA9ICBcInd4NDVkNDI0MzkwZjY2YjRlZlwiO1xuICAgICAgICAgICAgdGhpcy5BcHBTZWNyZXQgPSBcImM1MzY0Yzg3Y2VhNTZkZTI1ZmU5ZTI1MTRiMjM2YTE0XCI7XG4gICAgICAgICAgICB0aGlzLmFuZHJvaWRQYWNrYWdlTmFtZSA9IFwieW91bWUvcGxheWNpdHkvZ2FtZS93eGFwaS9XWEVudHJ5QWN0aXZpdHlcIjtcblxuICAgICAgICAgICAgdmFyIFRPS0VOX0NPREVfVVJMICAgICA9IFwiaHR0cHM6Ly9hcGkud2VpeGluLnFxLmNvbS9zbnMvb2F1dGgyL2FjY2Vzc190b2tlbj9hcHBpZD0lcyZzZWNyZXQ9JXMmY29kZT0lcyZncmFudF90eXBlPWF1dGhvcml6YXRpb25fY29kZVwiO1xuICAgICAgICAgICAgdmFyIFVTRVJfSU5GT19VUkzCoCDCoCDCoCA9IFwiaHR0cHM6Ly9hcGkud2VpeGluLnFxLmNvbS9zbnMvdXNlcmluZm8/YWNjZXNzX3Rva2VuPSVzJm9wZW5pZD0lc1wiO1xuICAgICAgICAgICAgdmFyIFJFRlJFU0hfVE9LRU5fVVJMwqAgPSBcImh0dHBzOi8vYXBpLndlaXhpbi5xcS5jb20vc25zL29hdXRoMi9yZWZyZXNoX3Rva2VuP2FwcGlkPSVzJmdyYW50X3R5cGU9cmVmcmVzaF90b2tlbiZyZWZyZXNoX3Rva2VuPSVzXCJcblxuXG4gICAgICAgICAgICB0aGlzLm1lc3NGaXJlID0gb25maXJlLm9uKFwib25wbGF0Zm9ybVwiLHRoaXMub25QbGF0Zm9ybS5iaW5kKHRoaXMpKTsvL+ebkeWQrOesrOS4ieaWueebuOWFs+S6i+S7tlxuXG5cbiAgICAgICAgICAgIHZhciB1cmwgPSBcImh0dHBzOi8vZmFuZ2thLnlvdW1lZ2FtZS5jbi9zaGFyZVVybC5waHBcIjtcbiAgICAgICAgICAgIC8vdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT0gNCAmJiAoeGhyLnN0YXR1cyA+PSAyMDAgJiYgeGhyLnN0YXR1cyA8IDQwMCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5zaGFyZXVybCA9IHJlc3VsdC5zaGFyZVVybDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgeGhyLm9wZW4oXCJHRVRcIiwgdXJsLCB0cnVlKTtcbiAgICAgICAgICAgIHhoci5zZW5kKCk7XG5cbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAvLyhjb25zb2xlLmxvZyhcInl5eXl5eXl5eXl5eVwiKSk7XG5cbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBzdGFydCAoKSB7XG4gICAgICAgIC8vb25maXJlLmZpcmUoXCJvbnBsYXRmb3JtXCIsXCJsb2dpblwiLFwibG9naW5cIik7XG4gICAgfSxcbiAgICB1cGRhdGUgKGR0KSB7XG5cbiAgICB9LFxuICAgIG9uUGxhdGZvcm06ZnVuY3Rpb24oKS8v55uR5ZCs5ri45oiP5Lit5Y+R6LW355qE56ys5LiJ5pa55LqL5Lu2XG4gICAge1xuICAgICAgICB3aW5kb3cucGxhdGZvcm1fb3BlcmEgPSBhcmd1bWVudHNbMF07XG4gICAgICAgIFxuICAgICAgICBjb25zb2xlLmxvZyh3aW5kb3cucGxhdGZvcm1fb3BlcmEpO1xuICAgICAgICBjb25zb2xlLmxvZyhhcmd1bWVudHNbMF0rXCItLS0tLS0tLVwiK2FyZ3VtZW50c1sxXStcIi0tLS0tLS0tXCIrYXJndW1lbnRzWzJdK1wiLS0tLS0tLS1cIithcmd1bWVudHNbM10pO1xuICAgICAgICBpZiAoYXJndW1lbnRzWzBdID09IFwiaW5pdFwiKVxuICAgICAgICB7XG5cbiAgICAgICAgfWVsc2UgaWYgKGFyZ3VtZW50c1swXSA9PSBcImxvZ2luXCIpe1xuICAgICAgICAgICAgaWYgKGNjLnN5cy5pc05hdGl2ZSYmY2Muc3lzLm9zPT1jYy5zeXMuT1NfSU9TKSB7XG4gICAgICAgICAgICAgICAgbGV0IHJldCA9IGpzYi5yZWZsZWN0aW9uLmNhbGxTdGF0aWNNZXRob2QoXCJBZE1hc3RlclwiLFwic2VuZEF1dGhSZXF1ZXN0OnRpdGxlOlwiLFwiMVwiLFwiMVwiKTtcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIHZhciBzID0ganNiLnJlZmxlY3Rpb24uY2FsbFN0YXRpY01ldGhvZChcIm9yZy9jb2NvczJkeC9qYXZhc2NyaXB0L0FwcEFjdGl2aXR5XCIsXCJzZW5kQXV0aFJlcXVlc3RcIiwgXCIoKUlcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKHMpO1xuICAgICAgICB9ZWxzZSBpZiAoYXJndW1lbnRzWzBdID09IFwic2hhcmVcIilcbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKGNjLnN5cy5pc05hdGl2ZSYmY2Muc3lzLm9zPT1jYy5zeXMuT1NfSU9TKSB7XG4gICAgICAgICAgICAgICAgbGV0IHJldCA9IGpzYi5yZWZsZWN0aW9uLmNhbGxTdGF0aWNNZXRob2QoXCJBZE1hc3RlclwiLFwic2hhcmU6dGl0bGU6XCIsXCJcIixcIlwiKTtcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIHZhciBzID0ganNiLnJlZmxlY3Rpb24uY2FsbFN0YXRpY01ldGhvZChcIm9yZy9jb2NvczJkeC9qYXZhc2NyaXB0L0FwcEFjdGl2aXR5XCIsXCJzaGFyZVwiLCBcIigpSVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfWVsc2UgaWYgKGFyZ3VtZW50c1swXSA9PSBcIm9wZW51cmxcIil7XG5cbiAgICAgICAgfWVsc2UgaWYgKGFyZ3VtZW50c1swXSA9PSBcInNoYXJldXJsXCIpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmIChjYy5zeXMuaXNOYXRpdmUgJiYgY2Muc3lzLm9zID09IGNjLnN5cy5PU19JT1MpIHtcbiAgICAgICAgICAgICAgICBsZXQgcmV0ID0ganNiLnJlZmxlY3Rpb24uY2FsbFN0YXRpY01ldGhvZChcIkFkTWFzdGVyXCIsIFwic2hhcmV1cmw6Y29udDp1cmw6XCIsIFxuICAgICAgICAgICAgICAgIGFyZ3VtZW50c1sxXSwgYXJndW1lbnRzWzJdLGFyZ3VtZW50c1szXSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBzID0ganNiLnJlZmxlY3Rpb24uY2FsbFN0YXRpY01ldGhvZChcIm9yZy9jb2NvczJkeC9qYXZhc2NyaXB0L0FwcEFjdGl2aXR5XCIsIFwic2hhcmV1cmxcIiwgXCIoTGphdmEvbGFuZy9TdHJpbmc7TGphdmEvbGFuZy9TdHJpbmc7TGphdmEvbGFuZy9TdHJpbmc7KUlcIiwgXG4gICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50c1sxXSwgYXJndW1lbnRzWzJdLGFyZ3VtZW50c1szXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuXG5cblxuICAgIG9uRGVzdHJveTpmdW5jdGlvbigpXG4gICAge1xuICAgICAgICBpZiAoY2Muc3lzLmlzTmF0aXZlKXtcbiAgICAgICAgICAgIG9uZmlyZS51bih0aGlzLm1lc3NGaXJlKTtcbiAgICAgICAgfVxuICAgIH0sICAgIFxuXG5cblxuICAgIGdldEFjY2Vzc1Rva2VuIDogZnVuY3Rpb24oY29kZSl7ICAgICAgICAvL+iOt+WPlmFjY2Vzc1Rva2VuXG4gICAgICAgIHZhciB1cmwgPSBcImh0dHBzOi8vYXBpLndlaXhpbi5xcS5jb20vc25zL29hdXRoMi9hY2Nlc3NfdG9rZW4/YXBwaWQ9XCJcbiAgICAgICAgK3RoaXMuQXBwSUQrXCImc2VjcmV0PVwiK3RoaXMuQXBwU2VjcmV0K1wiJmNvZGU9XCIgKyBjb2RlICsgXCImZ3JhbnRfdHlwZT1hdXRob3JpemF0aW9uX2NvZGVcIjtcbiAgICAgICAgY29uc29sZS5sb2coXCJ1cmw9Pj4+PiBcIit1cmwpO1xuICAgICAgICBsZXQgc2VsZiA9IHRoaXM7XG4gICAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT0gNCAmJiAoeGhyLnN0YXR1cyA+PSAyMDAgJiYgeGhyLnN0YXR1cyA8IDQwMCkpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVzcG9uc2UgPSB4aHIucmVzcG9uc2VUZXh0O1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwicmVzcG9uc2U9PT0+Pj5cIixyZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgdmFyIG1zZyA9IEpTT04ucGFyc2UocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIHZhciBhY2Nlc3NfdG9rZW4gPSBtc2cuYWNjZXNzX3Rva2VuO1xuICAgICAgICAgICAgICAgIHZhciByZWZyZXNoX3Rva2VuID0gbXNnLnJlZnJlc2hfdG9rZW47XG4gICAgICAgICAgICAgICAgdmFyIG9wZW5pZCA9IG1zZy5vcGVuaWQ7XG4gICAgICAgICAgICAgICAgd2luZG93LnBsYXRmb3JtX29wZW5pZCA9IG9wZW5pZDtcbiAgICAgICAgICAgICAgICAvL+WmguaenOi2heaXtui/m+ihjOmHjeaWsOWIt+aWsGFjY2Vzc1Rva2VuXG4gICAgICAgICAgICAgICAgaWYobXNnLmV4cGlyZXNfaW4gPj0gNzIwMCl7XG4gICAgICAgICAgICAgICAgICAgIC8v5Yi35pawYWNjZXNzdG9rZW5cbiAgICAgICAgICAgICAgICAgICAgLy8gc2VsZi5mcmVzaEFjY2Vzc1Rva2VuKHJlZnJlc2hfdG9rZW4pLnRoZW4oZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgICAgICAgICAgICAgIC8vICAgIGNvbnNvbGUubG9nKFwi5Yi35pawYWNjZXNzVG9rZW4g5pivXCIsZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIC8vICAgIGFjY2Vzc190b2tlbiA9IGRhdGE7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuZ2V0VXNlckluZm8oYWNjZXNzX3Rva2VuLG9wZW5pZCk7XG4gICAgICAgICAgICAgICAgICAgIC8vfSk7XG4gICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCLov5nkuKphY2Nlc3NUb2tlbuaYr+WIt+aWsOWHuuadpeeahHRva2VuXCIsYWNjZXNzX3Rva2VuKTtcbiAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5nZXRVc2VySW5mbyhhY2Nlc3NfdG9rZW4sb3BlbmlkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHhoci5vcGVuKFwiR0VUXCIsdXJsLHRydWUpO1xuICAgICAgICB4aHIuc2VuZCgpO1xuICAgIH0sXG4gICAgZ2V0VXNlckluZm8gOiBmdW5jdGlvbihhY2Nlc3NfdG9rZW4sb3BlbmlkKXsgICAgICAgLy/ojrflj5bnlKjmiLfkv6Hmga9cbiAgICAgICAgY29uc29sZS5sb2coXCJhY2Nlc3NUb2tlbiBpcyBcIiArIGFjY2Vzc190b2tlbik7XG4gICAgICAgIGNvbnNvbGUubG9nKFwib3BlbmlkIGlzIFwiICsgb3BlbmlkKTtcbiAgICAgICAgd2luZG93LnBsYXRmb3JtX2FjYyA9IG9wZW5pZCtcIlwiO1xuICAgICAgICB3aW5kb3cucGxhdGZvcm1fcHdkID0gXCJ3eHB3ZDFcIjtcbiAgICAgICAgdmFyIHVybCA9IFwiaHR0cHM6Ly9hcGkud2VpeGluLnFxLmNvbS9zbnMvdXNlcmluZm8/YWNjZXNzX3Rva2VuPVwiK2FjY2Vzc190b2tlbiArIFwiJm9wZW5pZD1cIitvcGVuaWQ7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIGlmICh4aHIucmVhZHlTdGF0ZSA9PSA0ICYmICh4aHIuc3RhdHVzID49IDIwMCAmJiB4aHIuc3RhdHVzIDwgNDAwKSkge1xuICAgICAgICAgICAgICAgIHZhciByZXNwb25zZSA9IHhoci5yZXNwb25zZVRleHQ7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJyZXNwb25zZT09PT4+PlwiLHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICB2YXIgbXNnID0gSlNPTi5wYXJzZShyZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJtc2cgaXMgXCIgLCBtc2cpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwibmlja05hbWUgaXMgXCIgKyBtc2cubmlja25hbWUpO1xuICAgICAgICAgICAgICAgIHdpbmRvdy5wbGF0Zm9ybV9uYW1lID0gbXNnLm5pY2tuYW1lO1xuICAgICAgICAgICAgICAgIHdpbmRvdy5wbGF0Zm9ybV9oZWFkID0gbXNnLmhlYWRpbWd1cmw7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgd2luZG93LnBsYXRmb3JtX2hlYWQgPSB3aW5kb3cucGxhdGZvcm1faGVhZC5yZXBsYWNlKFwiaHR0cDpcIixcImh0dHBzOlwiKTtcblxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiY2l0eSBpcyBcIiArIG1zZy5jaXR5KTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImNvdW50cnkgXCIgKyBtc2cuY291bnRyeSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJzZXggaXMgIFwiICsgbXNnLnNleCk7XG5cbiAgICAgICAgICAgICAgICAvL2NjLmZpbmQoXCJDYW52YXMvY29tX1JlZ2lzdGVyXCIpLmFjdGl2ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgb25maXJlLmZpcmUoXCJvbnBsYXRmb3JtX2xvZ2luXCIsd2luZG93LnBsYXRmb3JtX2FjYyx3aW5kb3cucGxhdGZvcm1fcHdkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgeGhyLm9wZW4oXCJHRVRcIix1cmwsdHJ1ZSk7XG4gICAgICAgIHhoci5zZW5kKCk7XG4gICAgXG4gICAgfSxcblxufSk7XG5cbndpbmRvdy5wbGF0Zm9ybVJlc3BvbnNlID0gZnVuY3Rpb24oKVxue1xuICAgIGNvbnNvbGUubG9nKFwiLS0tLS1cIik7XG4gICAgY29uc29sZS5sb2coYXJndW1lbnRzWzBdKTtcbiAgICBpZiAoYXJndW1lbnRzWzBdICE9IHVuZGVmaW5lZCl7XG4gICAgICAgIGNjLmZpbmQoXCJ3eFwiKS5nZXRDb21wb25lbnQoXCJ3eFwiKS5nZXRBY2Nlc3NUb2tlbihhcmd1bWVudHNbMF0pO1xuICAgIH1cbn1cbiJdfQ==