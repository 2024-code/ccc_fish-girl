
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/Texture/game_saima/paoma.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '046229UkgJBFKFb7xECY1E6', 'paoma');
// Texture/game_saima/paoma.js

"use strict";

cc.Class({
  "extends": cc.Component,
  properties: {
    NodeArray_mingci: {
      "default": [],
      type: [cc.Node],
      tooltip: "名次节点数组"
    },
    SpriteArray_jieguo: {
      "default": [],
      type: [cc.Sprite],
      tooltip: "结果图标数组"
    },
    SpriteFrameArray_haoma: {
      "default": [],
      type: [cc.SpriteFrame],
      tooltip: "号码图标资源数组"
    },
    AnimationArray_horse: {
      "default": [],
      type: [cc.Animation],
      tooltip: "赛马的动画组件数组"
    },
    AnimationClipArray_horseMove: {
      "default": [],
      type: [cc.AnimationClip],
      tooltip: "赛马移动的动画资源数组"
    },
    NodeArray_dibumingci: {
      "default": [],
      type: [cc.Node],
      tooltip: "底部名次节点数组"
    },
    Speed_dibumingci: {
      "default": 500,
      tooltip: "底部名次的移动速度"
    },
    Label_winCoins: {
      "default": null,
      type: cc.Label,
      tooltip: "赢金币文字"
    },
    AudioSource_launch: {
      "default": null,
      type: cc.AudioSource,
      tooltip: "比赛开始的音效"
    },
    AudioSource_guoxian: {
      "default": null,
      type: cc.AudioSource,
      tooltip: "赛马过终点线音效"
    },
    PhotoTime: {
      "default": 3,
      tooltip: "拍照时间"
    },
    Animation_daojishi: {
      "default": null,
      type: cc.Animation,
      tooltip: "倒计时动画"
    },
    Animation_changjing: {
      "default": null,
      type: cc.Animation,
      tooltip: "场景动画"
    },
    times_lab: cc.Label,
    _infinity: 999999
  },
  SetData: function SetData(arrayMingCi, winCoins) {
    this._arrayMingCi = arrayMingCi;
    this._winCoins = winCoins;
    var anim = this.Animation_daojishi.play();
    this.times_lab.string = cc.find("Canvas").getComponent("saima").times_id;
    anim.on('finished', this.Launch, this);
  },
  Launch: function Launch() {
    var _this = this;

    this.Animation_daojishi.node.active = false;
    var c_anim = this.Animation_changjing.play();
    c_anim.on('finished', function () {
      _this.scheduleOnce(function () {
        _this.node.destroy();
      }, 5);
    }, this);
    this.AudioSource_launch.play();
    this.Label_winCoins.string = this._winCoins;
    this._arrayLength = this.NodeArray_mingci.length;
    this._posArrayMingCi = new Array(this._arrayLength);

    for (var i = 0; i < this._arrayLength; i++) {
      this._posArrayMingCi[i] = this.NodeArray_mingci[i].getPosition();
    }

    for (var i = 0; i < this._arrayLength; i++) {
      this.NodeArray_mingci[i].setPosition(this._posArrayMingCi[this._arrayMingCi[i]]);
      this.NodeArray_mingci[i].active = false;
    }

    for (var i = 0; i < this.SpriteArray_jieguo.length; i++) {
      var index = 0;

      for (var j = 0; j < this._arrayLength; j++) {
        if (this._arrayMingCi[j] === i) {
          index = j;
        }
      }

      this.SpriteArray_jieguo[i].spriteFrame = this.SpriteFrameArray_haoma[index];
    }

    var guoxian = 0;
    var self = this;

    for (var i = 0; i < this._arrayLength; i++) {
      this.AnimationArray_horse[i].play();
      this.AnimationArray_horse[i].addClip(this.AnimationClipArray_horseMove[this._arrayMingCi[i]], "mingci");
      this.AnimationArray_horse[i].playAdditive("mingci");

      this.AnimationArray_horse[i].onAnimEvent_ZhongDian = function () {
        var index;

        for (var i = 0; i < self._arrayLength; i++) {
          if (self._arrayMingCi[i] === guoxian) {
            index = i;
            break;
          }
        }

        self.NodeArray_mingci[index].active = true;

        if (guoxian < 3) {
          //前三名拍照
          self.TakePhoto();
        }

        guoxian++;
      };
    }

    this._rankPosArray = new Array(this._arrayLength); //底部排名从1到8的坐标

    for (var i = 0; i < this._arrayLength; i++) {
      this._rankPosArray[i] = this.NodeArray_dibumingci[i].x;
    }

    this._targetPosArray = new Array(this._arrayLength); //目标坐标

    for (var i = 0; i < this._arrayLength; i++) {
      this._targetPosArray[i] = this._rankPosArray[this._arrayMingCi[i]];
    }

    this._currentPosArray = new Array(this._arrayLength); //当前坐标

    for (var i = 0; i < this._arrayLength; i++) {
      this._currentPosArray[i] = this.NodeArray_dibumingci[i].x;
    }

    this._nodeArrayHorse = new Array(this._arrayLength); //赛马节点数组

    for (var i = 0; i < this._arrayLength; i++) {
      this._nodeArrayHorse[i] = this.AnimationArray_horse[i].node;
    }

    this._arrayRanking = new Array(this._arrayLength); //名次数组

    this._arrayHorsePos = new Array(this._arrayLength); //赛马位置数组
  },
  onBtnClick_back: function onBtnClick_back() {
    this.node.dispatchEvent(new cc.Event.EventCustom('Event_PaoMaConfirm', true));
    this.node.destroy();
  },
  update: function update(dt) {
    for (var i = 0; i < this._arrayLength; i++) {
      this._arrayHorsePos[i] = this._nodeArrayHorse[i].x;
    }

    this.Rank();

    for (var i = 0; i < this._arrayLength; i++) {
      this._targetPosArray[i] = this._rankPosArray[this._arrayRanking[i]];
    }

    var distance = this.Speed_dibumingci * dt; //这一帧移动的距离

    for (var i = 0; i < this._arrayLength; i++) {
      var sub = this._targetPosArray[i] - this._currentPosArray[i];
      var absSub = Math.abs(sub);

      if (absSub > 0.01) {
        //没到目标点
        var move = 0;

        if (absSub > distance) {
          //相差的距离大于这一帧移动的距离
          if (sub > 0) {
            move = distance;
          } else {
            move = -distance;
          }
        } else {
          move = sub;
        }

        this._currentPosArray[i] += move;
        this.NodeArray_dibumingci[i].x = this._currentPosArray[i];
      }
    }
  },
  Rank: function Rank() {
    var index; //最小值的索引

    var min_X; //最小值

    for (var ranking = this._arrayLength - 1; ranking > -1; ranking--) {
      min_X = this._infinity;

      for (var i = 0; i < this._arrayLength; i++) {
        if (this._arrayHorsePos[i] < min_X) {
          min_X = this._arrayHorsePos[i];
          index = i;
        }
      }

      this._arrayRanking[index] = ranking;
      this._arrayHorsePos[index] = this._infinity;
    }
  },
  TakePhoto: function TakePhoto() {
    this.AudioSource_guoxian.play();

    for (var i = 0; i < this._arrayLength; i++) {
      this.AnimationArray_horse[i].pause();
    }

    this.scheduleOnce(function () {
      for (var i = 0; i < this._arrayLength; i++) {
        this.AnimationArray_horse[i].resume();
      }
    }, this.PhotoTime);
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcVGV4dHVyZVxcZ2FtZV9zYWltYVxccGFvbWEuanMiXSwibmFtZXMiOlsiY2MiLCJDbGFzcyIsIkNvbXBvbmVudCIsInByb3BlcnRpZXMiLCJOb2RlQXJyYXlfbWluZ2NpIiwidHlwZSIsIk5vZGUiLCJ0b29sdGlwIiwiU3ByaXRlQXJyYXlfamllZ3VvIiwiU3ByaXRlIiwiU3ByaXRlRnJhbWVBcnJheV9oYW9tYSIsIlNwcml0ZUZyYW1lIiwiQW5pbWF0aW9uQXJyYXlfaG9yc2UiLCJBbmltYXRpb24iLCJBbmltYXRpb25DbGlwQXJyYXlfaG9yc2VNb3ZlIiwiQW5pbWF0aW9uQ2xpcCIsIk5vZGVBcnJheV9kaWJ1bWluZ2NpIiwiU3BlZWRfZGlidW1pbmdjaSIsIkxhYmVsX3dpbkNvaW5zIiwiTGFiZWwiLCJBdWRpb1NvdXJjZV9sYXVuY2giLCJBdWRpb1NvdXJjZSIsIkF1ZGlvU291cmNlX2d1b3hpYW4iLCJQaG90b1RpbWUiLCJBbmltYXRpb25fZGFvamlzaGkiLCJBbmltYXRpb25fY2hhbmdqaW5nIiwidGltZXNfbGFiIiwiX2luZmluaXR5IiwiU2V0RGF0YSIsImFycmF5TWluZ0NpIiwid2luQ29pbnMiLCJfYXJyYXlNaW5nQ2kiLCJfd2luQ29pbnMiLCJhbmltIiwicGxheSIsInN0cmluZyIsImZpbmQiLCJnZXRDb21wb25lbnQiLCJ0aW1lc19pZCIsIm9uIiwiTGF1bmNoIiwibm9kZSIsImFjdGl2ZSIsImNfYW5pbSIsInNjaGVkdWxlT25jZSIsImRlc3Ryb3kiLCJfYXJyYXlMZW5ndGgiLCJsZW5ndGgiLCJfcG9zQXJyYXlNaW5nQ2kiLCJBcnJheSIsImkiLCJnZXRQb3NpdGlvbiIsInNldFBvc2l0aW9uIiwiaW5kZXgiLCJqIiwic3ByaXRlRnJhbWUiLCJndW94aWFuIiwic2VsZiIsImFkZENsaXAiLCJwbGF5QWRkaXRpdmUiLCJvbkFuaW1FdmVudF9aaG9uZ0RpYW4iLCJUYWtlUGhvdG8iLCJfcmFua1Bvc0FycmF5IiwieCIsIl90YXJnZXRQb3NBcnJheSIsIl9jdXJyZW50UG9zQXJyYXkiLCJfbm9kZUFycmF5SG9yc2UiLCJfYXJyYXlSYW5raW5nIiwiX2FycmF5SG9yc2VQb3MiLCJvbkJ0bkNsaWNrX2JhY2siLCJkaXNwYXRjaEV2ZW50IiwiRXZlbnQiLCJFdmVudEN1c3RvbSIsInVwZGF0ZSIsImR0IiwiUmFuayIsImRpc3RhbmNlIiwic3ViIiwiYWJzU3ViIiwiTWF0aCIsImFicyIsIm1vdmUiLCJtaW5fWCIsInJhbmtpbmciLCJwYXVzZSIsInJlc3VtZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQUEsRUFBRSxDQUFDQyxLQUFILENBQVM7QUFDTCxhQUFTRCxFQUFFLENBQUNFLFNBRFA7QUFHTEMsRUFBQUEsVUFBVSxFQUFFO0FBQ1JDLElBQUFBLGdCQUFnQixFQUFFO0FBQ2QsaUJBQVMsRUFESztBQUVkQyxNQUFBQSxJQUFJLEVBQUUsQ0FBQ0wsRUFBRSxDQUFDTSxJQUFKLENBRlE7QUFHZEMsTUFBQUEsT0FBTyxFQUFFO0FBSEssS0FEVjtBQU1SQyxJQUFBQSxrQkFBa0IsRUFBRTtBQUNoQixpQkFBUyxFQURPO0FBRWhCSCxNQUFBQSxJQUFJLEVBQUUsQ0FBQ0wsRUFBRSxDQUFDUyxNQUFKLENBRlU7QUFHaEJGLE1BQUFBLE9BQU8sRUFBRTtBQUhPLEtBTlo7QUFXUkcsSUFBQUEsc0JBQXNCLEVBQUU7QUFDcEIsaUJBQVMsRUFEVztBQUVwQkwsTUFBQUEsSUFBSSxFQUFFLENBQUNMLEVBQUUsQ0FBQ1csV0FBSixDQUZjO0FBR3BCSixNQUFBQSxPQUFPLEVBQUU7QUFIVyxLQVhoQjtBQWdCUkssSUFBQUEsb0JBQW9CLEVBQUU7QUFDbEIsaUJBQVMsRUFEUztBQUVsQlAsTUFBQUEsSUFBSSxFQUFFLENBQUNMLEVBQUUsQ0FBQ2EsU0FBSixDQUZZO0FBR2xCTixNQUFBQSxPQUFPLEVBQUU7QUFIUyxLQWhCZDtBQXFCUk8sSUFBQUEsNEJBQTRCLEVBQUU7QUFDMUIsaUJBQVMsRUFEaUI7QUFFMUJULE1BQUFB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QVI7QUFDQUcsVUFBQUEsS0FBSyxHQUFHSCxDQUFSO0FBQ0g7QUFDSjs7QUFDRCxXQUFLaUIsYUFBTCxDQUFtQmQsS0FBbkIsSUFBNEI4QixPQUE1QjtBQUNBLFdBQUtmLGNBQUwsQ0FBb0JmLEtBQXBCLElBQTZCLEtBQUsxQixTQUFsQztBQUNIO0FBQ0osR0F2TUk7QUF5TUxrQyxFQUFBQSxTQUFTLEVBQUUscUJBQVk7QUFDbkIsU0FBS3ZDLG1CQUFMLENBQXlCWSxJQUF6Qjs7QUFDQSxTQUFLLElBQUlnQixDQUFDLEdBQUcsQ0FBYixFQUFnQkEsQ0FBQyxHQUFHLEtBQUtKLFlBQXpCLEVBQXVDSSxDQUFDLEVBQXhDLEVBQTRDO0FBQ3hDLFdBQUt0QyxvQkFBTCxDQUEwQnNDLENBQTFCLEVBQTZCa0MsS0FBN0I7QUFDSDs7QUFDRCxTQUFLeEMsWUFBTCxDQUFrQixZQUFZO0FBQzFCLFdBQUssSUFBSU0sQ0FBQyxHQUFHLENBQWIsRUFBZ0JBLENBQUMsR0FBRyxLQUFLSixZQUF6QixFQUF1Q0ksQ0FBQyxFQUF4QyxFQUE0QztBQUN4QyxhQUFLdEMsb0JBQUwsQ0FBMEJzQyxDQUExQixFQUE2Qm1DLE1BQTdCO0FBQ0g7QUFDSixLQUpELEVBSUcsS0FBSzlELFNBSlI7QUFLSDtBQW5OSSxDQUFUIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyJjYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIE5vZGVBcnJheV9taW5nY2k6IHtcclxuICAgICAgICAgICAgZGVmYXVsdDogW10sXHJcbiAgICAgICAgICAgIHR5cGU6IFtjYy5Ob2RlXSxcclxuICAgICAgICAgICAgdG9vbHRpcDogXCLlkI3mrKHoioLngrnmlbDnu4RcIixcclxuICAgICAgICB9LFxyXG4gICAgICAgIFNwcml0ZUFycmF5X2ppZWd1bzoge1xyXG4gICAgICAgICAgICBkZWZhdWx0OiBbXSxcclxuICAgICAgICAgICAgdHlwZTogW2NjLlNwcml0ZV0sXHJcbiAgICAgICAgICAgIHRvb2x0aXA6IFwi57uT5p6c5Zu+5qCH5pWw57uEXCIsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBTcHJpdGVGcmFtZUFycmF5X2hhb21hOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IFtdLFxyXG4gICAgICAgICAgICB0eXBlOiBbY2MuU3ByaXRlRnJhbWVdLFxyXG4gICAgICAgICAgICB0b29sdGlwOiBcIuWPt+eggeWbvuagh+i1hOa6kOaVsOe7hFwiLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgQW5pbWF0aW9uQXJyYXlfaG9yc2U6IHtcclxuICAgICAgICAgICAgZGVmYXVsdDogW10sXHJcbiAgICAgICAgICAgIHR5cGU6IFtjYy5BbmltYXRpb25dLFxyXG4gICAgICAgICAgICB0b29sdGlwOiBcIui1m+mprOeahOWKqOeUu+e7hOS7tuaVsOe7hFwiLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgQW5pbWF0aW9uQ2xpcEFycmF5X2hvcnNlTW92ZToge1xyXG4gICAgICAgICAgICBkZWZhdWx0OiBbXSxcclxuICAgICAgICAgICAgdHlwZTogW2NjLkFuaW1hdGlvbkNsaXBdLFxyXG4gICAgICAgICAgICB0b29sdGlwOiBcIui1m+mprOenu+WKqOeahOWKqOeUu+i1hOa6kOaVsOe7hFwiLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgTm9kZUFycmF5X2RpYnVtaW5nY2k6IHtcclxuICAgICAgICAgICAgZGVmYXVsdDogW10sXHJcbiAgICAgICAgICAgIHR5cGU6IFtjYy5Ob2RlXSxcclxuICAgICAgICAgICAgdG9vbHRpcDogXCLlupXpg6jlkI3mrKHoioLngrnmlbDnu4RcIixcclxuICAgICAgICB9LFxyXG4gICAgICAgIFNwZWVkX2RpYnVtaW5nY2k6IHtcclxuICAgICAgICAgICAgZGVmYXVsdDogNTAwLFxyXG4gICAgICAgICAgICB0b29sdGlwOiBcIuW6lemDqOWQjeasoeeahOenu+WKqOmAn+W6plwiLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgTGFiZWxfd2luQ29pbnM6IHtcclxuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZTogY2MuTGFiZWwsXHJcbiAgICAgICAgICAgIHRvb2x0aXA6IFwi6LWi6YeR5biB5paH5a2XXCIsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBBdWRpb1NvdXJjZV9sYXVuY2g6IHtcclxuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZTogY2MuQXVkaW9Tb3VyY2UsXHJcbiAgICAgICAgICAgIHRvb2x0aXA6IFwi5q+U6LWb5byA5aeL55qE6Z+z5pWIXCIsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBBdWRpb1NvdXJjZV9ndW94aWFuOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGU6IGNjLkF1ZGlvU291cmNlLFxyXG4gICAgICAgICAgICB0b29sdGlwOiBcIui1m+mprOi/h+e7iOeCuee6v+mfs+aViFwiLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgUGhvdG9UaW1lOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IDMsXHJcbiAgICAgICAgICAgIHRvb2x0aXA6IFwi5ouN54Wn5pe26Ze0XCIsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBBbmltYXRpb25fZGFvamlzaGk6IHtcclxuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZTogY2MuQW5pbWF0aW9uLFxyXG4gICAgICAgICAgICB0b29sdGlwOiBcIuWAkuiuoeaXtuWKqOeUu1wiLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgQW5pbWF0aW9uX2NoYW5namluZzoge1xyXG4gICAgICAgICAgICBkZWZhdWx0OiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlOiBjYy5BbmltYXRpb24sXHJcbiAgICAgICAgICAgIHRvb2x0aXA6IFwi5Zy65pmv5Yqo55S7XCIsXHJcbiAgICAgICAgfSxcclxuICAgICAgICB0aW1lc19sYWI6IGNjLkxhYmVsLFxyXG4gICAgICAgIF9pbmZpbml0eTogOTk5OTk5LFxyXG4gICAgfSxcclxuXHJcbiAgICBTZXREYXRhOiBmdW5jdGlvbiAoYXJyYXlNaW5nQ2ksIHdpbkNvaW5zKSB7XHJcbiAgICAgICAgdGhpcy5fYXJyYXlNaW5nQ2kgPSBhcnJheU1pbmdDaTtcclxuICAgICAgICB0aGlzLl93aW5Db2lucyA9IHdpbkNvaW5zO1xyXG4gICAgICAgIHZhciBhbmltID0gdGhpcy5BbmltYXRpb25fZGFvamlzaGkucGxheSgpO1xyXG4gICAgICAgIHRoaXMudGltZXNfbGFiLnN0cmluZyA9IGNjLmZpbmQoXCJDYW52YXNcIikuZ2V0Q29tcG9uZW50KFwic2FpbWFcIikudGltZXNfaWQ7XHJcbiAgICAgICAgYW5pbS5vbignZmluaXNoZWQnLCB0aGlzLkxhdW5jaCwgdGhpcyk7XHJcbiAgICB9LFxyXG5cclxuICAgIExhdW5jaDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuQW5pbWF0aW9uX2Rhb2ppc2hpLm5vZGUuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgbGV0IGNfYW5pbSA9IHRoaXMuQW5pbWF0aW9uX2NoYW5namluZy5wbGF5KCk7XHJcbiAgICAgICAgY19hbmltLm9uKCdmaW5pc2hlZCcsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zY2hlZHVsZU9uY2UoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ub2RlLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgfSwgNSk7XHJcbiAgICAgICAgfSwgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5BdWRpb1NvdXJjZV9sYXVuY2gucGxheSgpO1xyXG4gICAgICAgIHRoaXMuTGFiZWxfd2luQ29pbnMuc3RyaW5nID0gdGhpcy5fd2luQ29pbnM7XHJcbiAgICAgICAgdGhpcy5fYXJyYXlMZW5ndGggPSB0aGlzLk5vZGVBcnJheV9taW5nY2kubGVuZ3RoO1xyXG4gICAgICAgIHRoaXMuX3Bvc0FycmF5TWluZ0NpID0gbmV3IEFycmF5KHRoaXMuX2FycmF5TGVuZ3RoKTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX2FycmF5TGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5fcG9zQXJyYXlNaW5nQ2lbaV0gPSB0aGlzLk5vZGVBcnJheV9taW5nY2lbaV0uZ2V0UG9zaXRpb24oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9hcnJheUxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuTm9kZUFycmF5X21pbmdjaVtpXS5zZXRQb3NpdGlvbih0aGlzLl9wb3NBcnJheU1pbmdDaVt0aGlzLl9hcnJheU1pbmdDaVtpXV0pO1xyXG4gICAgICAgICAgICB0aGlzLk5vZGVBcnJheV9taW5nY2lbaV0uYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5TcHJpdGVBcnJheV9qaWVndW8ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIGluZGV4ID0gMDtcclxuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB0aGlzLl9hcnJheUxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fYXJyYXlNaW5nQ2lbal0gPT09IGkpIHtcclxuICAgICAgICAgICAgICAgICAgICBpbmRleCA9IGo7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5TcHJpdGVBcnJheV9qaWVndW9baV0uc3ByaXRlRnJhbWUgPSB0aGlzLlNwcml0ZUZyYW1lQXJyYXlfaGFvbWFbaW5kZXhdO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZ3VveGlhbiA9IDA7XHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fYXJyYXlMZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLkFuaW1hdGlvbkFycmF5X2hvcnNlW2ldLnBsYXkoKTtcclxuICAgICAgICAgICAgdGhpcy5BbmltYXRpb25BcnJheV9ob3JzZVtpXS5hZGRDbGlwKHRoaXMuQW5pbWF0aW9uQ2xpcEFycmF5X2hvcnNlTW92ZVt0aGlzLl9hcnJheU1pbmdDaVtpXV0sIFwibWluZ2NpXCIpO1xyXG4gICAgICAgICAgICB0aGlzLkFuaW1hdGlvbkFycmF5X2hvcnNlW2ldLnBsYXlBZGRpdGl2ZShcIm1pbmdjaVwiKTtcclxuICAgICAgICAgICAgdGhpcy5BbmltYXRpb25BcnJheV9ob3JzZVtpXS5vbkFuaW1FdmVudF9aaG9uZ0RpYW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaW5kZXg7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlbGYuX2FycmF5TGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZi5fYXJyYXlNaW5nQ2lbaV0gPT09IGd1b3hpYW4pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXggPSBpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBzZWxmLk5vZGVBcnJheV9taW5nY2lbaW5kZXhdLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBpZiAoZ3VveGlhbiA8IDMpIHsvL+WJjeS4ieWQjeaLjeeFp1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuVGFrZVBob3RvKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBndW94aWFuKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fcmFua1Bvc0FycmF5ID0gbmV3IEFycmF5KHRoaXMuX2FycmF5TGVuZ3RoKTsvL+W6lemDqOaOkuWQjeS7jjHliLA455qE5Z2Q5qCHXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9hcnJheUxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3JhbmtQb3NBcnJheVtpXSA9IHRoaXMuTm9kZUFycmF5X2RpYnVtaW5nY2lbaV0ueDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fdGFyZ2V0UG9zQXJyYXkgPSBuZXcgQXJyYXkodGhpcy5fYXJyYXlMZW5ndGgpOy8v55uu5qCH5Z2Q5qCHXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9hcnJheUxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3RhcmdldFBvc0FycmF5W2ldID0gdGhpcy5fcmFua1Bvc0FycmF5W3RoaXMuX2FycmF5TWluZ0NpW2ldXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fY3VycmVudFBvc0FycmF5ID0gbmV3IEFycmF5KHRoaXMuX2FycmF5TGVuZ3RoKTsvL+W9k+WJjeWdkOagh1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fYXJyYXlMZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLl9jdXJyZW50UG9zQXJyYXlbaV0gPSB0aGlzLk5vZGVBcnJheV9kaWJ1bWluZ2NpW2ldLng7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX25vZGVBcnJheUhvcnNlID0gbmV3IEFycmF5KHRoaXMuX2FycmF5TGVuZ3RoKTsvL+i1m+mprOiKgueCueaVsOe7hFxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fYXJyYXlMZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLl9ub2RlQXJyYXlIb3JzZVtpXSA9IHRoaXMuQW5pbWF0aW9uQXJyYXlfaG9yc2VbaV0ubm9kZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fYXJyYXlSYW5raW5nID0gbmV3IEFycmF5KHRoaXMuX2FycmF5TGVuZ3RoKTsvL+WQjeasoeaVsOe7hFxyXG4gICAgICAgIHRoaXMuX2FycmF5SG9yc2VQb3MgPSBuZXcgQXJyYXkodGhpcy5fYXJyYXlMZW5ndGgpOy8v6LWb6ams5L2N572u5pWw57uEXHJcbiAgICB9LFxyXG5cclxuICAgIG9uQnRuQ2xpY2tfYmFjazogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMubm9kZS5kaXNwYXRjaEV2ZW50KG5ldyBjYy5FdmVudC5FdmVudEN1c3RvbSgnRXZlbnRfUGFvTWFDb25maXJtJywgdHJ1ZSkpO1xyXG4gICAgICAgIHRoaXMubm9kZS5kZXN0cm95KCk7XHJcbiAgICB9LFxyXG5cclxuICAgIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9hcnJheUxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2FycmF5SG9yc2VQb3NbaV0gPSB0aGlzLl9ub2RlQXJyYXlIb3JzZVtpXS54O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLlJhbmsoKTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX2FycmF5TGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5fdGFyZ2V0UG9zQXJyYXlbaV0gPSB0aGlzLl9yYW5rUG9zQXJyYXlbdGhpcy5fYXJyYXlSYW5raW5nW2ldXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBkaXN0YW5jZSA9IHRoaXMuU3BlZWRfZGlidW1pbmdjaSAqIGR0Oy8v6L+Z5LiA5bin56e75Yqo55qE6Led56a7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9hcnJheUxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBzdWIgPSB0aGlzLl90YXJnZXRQb3NBcnJheVtpXSAtIHRoaXMuX2N1cnJlbnRQb3NBcnJheVtpXTtcclxuICAgICAgICAgICAgdmFyIGFic1N1YiA9IE1hdGguYWJzKHN1Yik7XHJcbiAgICAgICAgICAgIGlmIChhYnNTdWIgPiAwLjAxKSB7Ly/msqHliLDnm67moIfngrlcclxuICAgICAgICAgICAgICAgIHZhciBtb3ZlID0gMDtcclxuICAgICAgICAgICAgICAgIGlmIChhYnNTdWIgPiBkaXN0YW5jZSkgey8v55u45beu55qE6Led56a75aSn5LqO6L+Z5LiA5bin56e75Yqo55qE6Led56a7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN1YiA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbW92ZSA9IGRpc3RhbmNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbW92ZSA9IC1kaXN0YW5jZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBtb3ZlID0gc3ViO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5fY3VycmVudFBvc0FycmF5W2ldICs9IG1vdmU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLk5vZGVBcnJheV9kaWJ1bWluZ2NpW2ldLnggPSB0aGlzLl9jdXJyZW50UG9zQXJyYXlbaV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIFJhbms6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgaW5kZXg7Ly/mnIDlsI/lgLznmoTntKLlvJVcclxuICAgICAgICB2YXIgbWluX1g7Ly/mnIDlsI/lgLxcclxuICAgICAgICBmb3IgKHZhciByYW5raW5nID0gdGhpcy5fYXJyYXlMZW5ndGggLSAxOyByYW5raW5nID4gLTE7IHJhbmtpbmctLSkge1xyXG4gICAgICAgICAgICBtaW5fWCA9IHRoaXMuX2luZmluaXR5O1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX2FycmF5TGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9hcnJheUhvcnNlUG9zW2ldIDwgbWluX1gpIHtcclxuICAgICAgICAgICAgICAgICAgICBtaW5fWCA9IHRoaXMuX2FycmF5SG9yc2VQb3NbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgaW5kZXggPSBpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuX2FycmF5UmFua2luZ1tpbmRleF0gPSByYW5raW5nO1xyXG4gICAgICAgICAgICB0aGlzLl9hcnJheUhvcnNlUG9zW2luZGV4XSA9IHRoaXMuX2luZmluaXR5O1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgVGFrZVBob3RvOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5BdWRpb1NvdXJjZV9ndW94aWFuLnBsYXkoKTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX2FycmF5TGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5BbmltYXRpb25BcnJheV9ob3JzZVtpXS5wYXVzZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNjaGVkdWxlT25jZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fYXJyYXlMZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5BbmltYXRpb25BcnJheV9ob3JzZVtpXS5yZXN1bWUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIHRoaXMuUGhvdG9UaW1lKTtcclxuICAgIH0sXHJcbn0pOyJdfQ==