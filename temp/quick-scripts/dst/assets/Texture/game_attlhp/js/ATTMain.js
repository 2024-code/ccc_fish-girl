
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/Texture/game_attlhp/js/ATTMain.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'e07d8R6p7JNV5Qd7iaarko0', 'ATTMain');
// Texture/game_attlhp/js/ATTMain.js

"use strict";

cc.Class({
  "extends": cc.Component,
  properties: {
    lblUserCoin: {
      "default": null,
      type: cc.Label,
      displayName: '用户金币'
    },
    lblWinCoin: {
      "default": null,
      type: cc.Label,
      displayName: '本局赢得'
    },
    lblBet: {
      "default": null,
      type: cc.Label,
      displayName: '押注'
    },
    rolePb: {
      "default": [],
      type: cc.Prefab,
      displayName: '牌角色Pb'
    },
    cards: {
      "default": [],
      type: cc.Node,
      displayName: '桌面牌'
    }
  },
  onLoad: function onLoad() {
    this.playerInfo = require("PlayerInfo").getInstant;
    this.net = this.node.getComponent('ATTNetwork');
    this.audio = this.node.getComponent('ATTAudio');
    this.bet = 100;
    this.lotteryRes = null;
    this.isAni = false;
    this.chooseCardArray = [];
  },
  start: function start() {
    // this.lblWinCoin.string = '0.00';
    this.setBet();
    this.lblUserCoin.string = this.playerInfo.playerCoin.toFixed(2);
    this.dealCards();
  },
  onCLick: function onCLick(event, args) {
    if (this.isAni) {
      return;
    }

    if (args == 'roll') {
      this.sendRoll();
    } else if (args == 'add') {
      if (this.lotteryRes != null && !this.lotteryRes.viewarray.isFinal) {
        return;
      }

      this.audio.playEffect(0);
      this.bet += 100;
      this.bet = this.bet >= 10000 ? 10000 : this.bet;
      this.setBet();
    } else if (args == 'dec') {
      if (this.lotteryRes != null && !this.lotteryRes.viewarray.isFinal) {
        return;
      }

      this.audio.playEffect(5);
      this.bet -= 100;
      this.bet = this.bet > 0 ? this.bet : 100;
      this.setBet();
    } else if (args == 'max') {
      if (this.lotteryRes != null && !this.lotteryRes.viewarray.isFinal) {
        return;
      }

      this.audio.playEffect(4);
      this.bet = 10000;
      this.setBet();
    } else if (args == 'exitGame') {
      this.audio.playEffect(5);
      this.net.socket.disconnect();
      cc.director.loadScene("LobbyMain");
    }
  },
  setBet: function setBet() {
    this.lblBet.string = (this.bet / 100).toFixed(2);
    var betShowArray = [750, 250, 150, 60, 10, 7, 5, 3, 2, 1];

    for (var i = 0; i < betShowArray.length; i++) {
      this.node.getChildByName("image_pic1").getChildByName("list").getChildByName("" + (i + 1)).getComponent(cc.Label).string = betShowArray[i] * (this.bet / 100);

      if (i < 4) {
        this.node.getChildByName("caijinliebiao").getChildByName("" + (i + 1)).getComponent(cc.Label).string = betShowArray[i] * (this.bet / 100);
      }
    }
  },
  chooseCard: function chooseCard(event, data) {
    if (this.lotteryRes && !this.lotteryRes.viewarray.isFinal && !this.isAni) {
      this.audio.playEffect(1);
      var needPush = true;

      for (var i = 0; i < this.chooseCardArray.length; i++) {
        if (parseInt(data) == this.chooseCardArray[i]) {
          needPush = false;
          this.chooseCardArray.splice(i, 1);
          this.cards[data].getChildByName("UI_BaoLiu").active = false;
          break;
        }
      }

      if (needPush) {
        this.cards[data].getChildByName("UI_BaoLiu").active = true;
        this.chooseCardArray.push(parseInt(data));
      }
    }
  },
  //发牌
  dealCards: function dealCards() {
    var _this = this;

    this.isAni = true;
    this.audio.playEffect(3);

    for (var i = 0; i < this.cards.length; i++) {
      var tempCard = this.cards[i];
      tempCard.setPosition(cc.v2(-500, 0));
      tempCard.getChildByName("back").scaleX = 1;
      tempCard.getChildByName("card").scaleX = 0;
      tempCard.getChildByName("card2").scaleX = 0;
      tempCard.getChildByName("UI_BaoLiu").active = false;
      var moveToPos = cc.v2(-314 + i * 157, 0);
      tempCard.stopAllActions();
      var cardIndex = this.cards.length - 1 - i;
      tempCard.runAction(cc.sequence(cc.delayTime(cardIndex * 0.1), cc.moveTo(0.2 - cardIndex * 0.02, moveToPos)));
    }

    this.scheduleOnce(function () {
      _this.isAni = false;
    }, 0.7);
  },
  leaveCards: function leaveCards() {
    var _this2 = this;

    this.isAni = true;
    this.lotteryRes = null;

    for (var i = 0; i < this.cards.length; i++) {
      var tempCard = this.cards[i];
      tempCard.stopAllActions();
      var cardIndex = this.cards.length - 1 - i;
      tempCard.runAction(cc.sequence(cc.delayTime(cardIndex * 0.1), cc.moveBy(0.2, cc.v2(-150, 0)), cc.moveTo(0.3 - cardIndex * 0.02, cc.v2(500, 0))));
    }

    this.scheduleOnce(function () {
      _this2.dealCards();
    }, 1.5);
  },
  //开牌
  openCards: function openCards(isFinal) {
    var _this3 = this;

    this.isAni = true;
    this.audio.playEffect(2);

    if (!isFinal) {
      this.lblUserCoin.string = (this.lotteryRes.userscore / 100).toFixed(2);

      for (var i = 0; i < this.cards.length; i++) {
        var tempCard = this.cards[i];
        tempCard.getChildByName("back").runAction(cc.scaleTo(0.1, 0, 1));
        tempCard.getChildByName("card").runAction(cc.sequence(cc.delayTime(0.1), cc.scaleTo(0.1, 1, 1)));
      }

      this.scheduleOnce(function () {
        _this3.isAni = false;
      }, 0.3);
    } else {
      for (var _i = 0; _i < this.cards.length; _i++) {
        var _tempCard = this.cards[_i];
        var needAni = true;

        for (var j = 0; j < this.chooseCardArray.length; j++) {
          if (this.chooseCardArray[j] == _i) {
            _tempCard.getChildByName("card").scaleX = 0;
            _tempCard.getChildByName("card2").scaleX = 1;
            needAni = false;
            break;
          }
        }

        if (needAni) {
          _tempCard.getChildByName("card").runAction(cc.scaleTo(0.1, 0, 1));

          _tempCard.getChildByName("card2").runAction(cc.sequence(cc.delayTime(0.1), cc.scaleTo(0.1, 1, 1), cc.scaleTo(0.1, 0, 1), cc.scaleTo(0.1, 1, 1)));
        }
      }

      this.scheduleOnce(function () {
        _this3.showResult();
      }, 1);
    }
  },
  showResult: function showResult() {
    var _this4 = this;

    this.hideResultAni();
    this.lblUserCoin.string = (this.lotteryRes.userscore / 100).toFixed(2);

    if (this.lotteryRes.viewarray.winType == 0) {
      this.audio.playEffect(6);
      this.node.getChildByName("resultAni").getChildByName("ani0").active = true;
      this.node.getChildByName("resultAni").getChildByName("ani0").getComponent(cc.Animation).play();
      this.node.getChildByName("resultAni").getChildByName("aniLose").active = true;
      this.node.getChildByName("resultAni").getChildByName("aniLose").getComponent(cc.Animation).play();
    } else {
      this.audio.playEffect(7);
      this.node.getChildByName("resultAni").getChildByName("ani" + this.lotteryRes.viewarray.winType).active = true;
      this.node.getChildByName("resultAni").getChildByName("ani" + this.lotteryRes.viewarray.winType).getComponent(cc.Animation).play();
      this.node.getChildByName("resultAni").getChildByName("aniGold").active = true;
      this.node.getChildByName("resultAni").getChildByName("aniGold").getComponent(cc.Animation).play();
    }

    this.scheduleOnce(function () {
      _this4.hideResultAni();

      _this4.leaveCards();
    }, 2);
  },
  roll: function roll(list) {
    for (var i = 0; i < this.cards.length; i++) {
      if (!this.lotteryRes.viewarray.isFinal) {
        this.cards[i].getChildByName("card").removeAllChildren();
        var pb = cc.instantiate(this.rolePb[list[i]]);
        this.cards[i].getChildByName("card").addChild(pb);
      } else {
        this.cards[i].getChildByName("card2").removeAllChildren();

        var _pb = cc.instantiate(this.rolePb[list[i]]);

        this.cards[i].getChildByName("card2").addChild(_pb);
      }
    }

    this.openCards(this.lotteryRes.viewarray.isFinal);

    if (this.lotteryRes.viewarray.isFinal) {
      this.chooseCardArray = [];
    }
  },
  sendRoll: function sendRoll() {
    this.net.socket.emit('lottery', JSON.stringify({
      bet: this.bet,
      array: this.chooseCardArray
    }));
  },
  hideResultAni: function hideResultAni() {
    this.node.getChildByName("resultAni").getChildByName("aniGold").active = false;
    this.node.getChildByName("resultAni").getChildByName("aniLose").active = false;

    for (var i = 0; i < 11; i++) {
      this.node.getChildByName("resultAni").getChildByName("ani" + i).active = false;
    }
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcVGV4dHVyZVxcZ2FtZV9hdHRsaHBcXGpzXFxBVFRNYWluLmpzIl0sIm5hbWVzIjpbImNjIiwiQ2xhc3MiLCJDb21wb25lbnQiLCJwcm9wZXJ0aWVzIiwibGJsVXNlckNvaW4iLCJ0eXBlIiwiTGFiZWwiLCJkaXNwbGF5TmFtZSIsImxibFdpbkNvaW4iLCJsYmxCZXQiLCJyb2xlUGIiLCJQcmVmYWIiLCJjYXJkcyIsIk5vZGUiLCJvbkxvYWQiLCJwbGF5ZXJJbmZvIiwicmVxdWlyZSIsImdldEluc3RhbnQiLCJuZXQiLCJub2RlIiwiZ2V0Q29tcG9uZW50IiwiYXVkaW8iLCJiZXQiLCJsb3R0ZXJ5UmVzIiwiaXNBbmkiLCJjaG9vc2VDYXJkQXJyYXkiLCJzdGFydCIsInNldEJldCIsInN0cmluZyIsInBsYXllckNvaW4iLCJ0b0ZpeGVkIiwiZGVhbENhcmRzIiwib25DTGljayIsImV2ZW50IiwiYXJncyIsInNlbmRSb2xsIiwidmlld2FycmF5IiwiaXNGaW5hbCIsInBsYXlFZmZlY3QiLCJzb2NrZXQiLCJkaXNjb25uZWN0IiwiZGlyZWN0b3IiLCJsb2FkU2NlbmUiLCJiZXRTaG93QXJyYXkiLCJpIiwibGVuZ3RoIiwiZ2V0Q2hpbGRCeU5hbWUiLCJjaG9vc2VDYXJkIiwiZGF0YSIsIm5lZWRQdXNoIiwicGFyc2VJbnQiLCJzcGxpY2UiLCJhY3RpdmUiLCJwdXNoIiwidGVtcENhcmQiLCJzZXRQb3NpdGlvbiIsInYyIiwic2NhbGVYIiwibW92ZVRvUG9zIiwic3RvcEFsbEFjdGlvbnMiLCJjYXJkSW5kZXgiLCJydW5BY3Rpb24iLCJzZXF1ZW5jZSIsImRlbGF5VGltZSIsIm1vdmVUbyIsInNjaGVkdWxlT25jZSIsImxlYXZlQ2FyZHMiLCJtb3ZlQnkiLCJvcGVuQ2FyZHMiLCJ1c2Vyc2NvcmUiLCJzY2FsZVRvIiwibmVlZEFuaSIsImoiLCJzaG93UmVzdWx0IiwiaGlkZVJlc3VsdEFuaSIsIndpblR5cGUiLCJBbmltYXRpb24iLCJwbGF5Iiwicm9sbCIsImxpc3QiLCJyZW1vdmVBbGxDaGlsZHJlbiIsInBiIiwiaW5zdGFudGlhdGUiLCJhZGRDaGlsZCIsImVtaXQiLCJKU09OIiwic3RyaW5naWZ5IiwiYXJyYXkiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUFBLEVBQUUsQ0FBQ0MsS0FBSCxDQUFTO0FBQ0wsYUFBU0QsRUFBRSxDQUFDRSxTQURQO0FBR0xDLEVBQUFBLFVBQVUsRUFBRTtBQUNSQyxJQUFBQSxXQUFXLEVBQUU7QUFDVCxpQkFBUyxJQURBO0FBRVRDLE1BQUFBLElBQUksRUFBRUwsRUFBRSxDQUFDTSxLQUZBO0FBR1RDLE1BQUFBLFdBQVcsRUFBRTtBQUhKLEtBREw7QUFNUkMsSUFBQUEsVUFBVSxFQUFFO0FBQ1IsaUJBQVMsSUFERDtBQUVSSCxNQUFBQSxJQUFJLEVBQUVMLEVBQUUsQ0FBQ00sS0FGRDtBQUdSQyxNQUFBQSxXQUFXLEVBQUU7QUFITCxLQU5KO0FBV1JFLElBQUFBLE1BQU0sRUFBRTtBQUNKLGlCQUFTLElBREw7QUFFSkosTUFBQUEsSUFBSSxFQUFFTCxFQUFFLENBQUNNLEtBRkw7QUFHSkMsTUFBQUEsV0FBVyxFQUFFO0FBSFQsS0FYQTtBQWdCUkcsSUFBQUEsTUFBTSxFQUFFO0FBQ0osaUJBQVMsRUFETDtBQUVKTCxNQUFBQSxJQUFJLEVBQUVMLEVBQUUsQ0FBQ1csTUFGTDtBQUdKSixNQUFBQSxXQUFXLEVBQUU7QUFIVCxLQWhCQTtBQXFCUkssSUFBQUEsS0FBSyxFQUFFO0FBQ0gsaUJBQVMsRUFETjtBQUVIUCxNQUFBQSxJQUFJLEVBQUVMLEVBQUUsQ0FBQ2EsSUFGTjtBQUdITixNQUFBQSxXQUFXLEVBQUU7QUFIVjtBQXJCQyxHQUhQO0FBZ0NMTyxFQUFBQSxNQWhDSyxvQkFnQ0k7QUFDTCxTQUFLQyxVQUFMLEdBQWtCQyxPQUFPLENBQUMsWUFBRCxDQUFQLENBQXNCQyxVQUF4QztBQUNBLFNBQUtDLEdBQUwsR0FBVyxLQUFLQyxJQUFMLENBQVVDLFlBQVYsQ0FBdUIsWUFBdkIsQ0FBWDtB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QUFDSDtBQUNKLEdBbk9JO0FBcU9MVSxFQUFBQSxRQXJPSyxzQkFxT007QUFDUCxTQUFLakIsR0FBTCxDQUFTcUIsTUFBVCxDQUFnQjZDLElBQWhCLENBQXFCLFNBQXJCLEVBQWdDQyxJQUFJLENBQUNDLFNBQUwsQ0FBZTtBQUMzQ2hFLE1BQUFBLEdBQUcsRUFBRSxLQUFLQSxHQURpQztBQUUzQ2lFLE1BQUFBLEtBQUssRUFBRSxLQUFLOUQ7QUFGK0IsS0FBZixDQUFoQztBQUlILEdBMU9JO0FBNE9MaUQsRUFBQUEsYUE1T0ssMkJBNE9XO0FBQ1osU0FBS3ZELElBQUwsQ0FBVTJCLGNBQVYsQ0FBeUIsV0FBekIsRUFBc0NBLGNBQXRDLENBQXFELFNBQXJELEVBQWdFTSxNQUFoRSxHQUF5RSxLQUF6RTtBQUNBLFNBQUtqQyxJQUFMLENBQVUyQixjQUFWLENBQXlCLFdBQXpCLEVBQXNDQSxjQUF0QyxDQUFxRCxTQUFyRCxFQUFnRU0sTUFBaEUsR0FBeUUsS0FBekU7O0FBQ0EsU0FBSyxJQUFJUixDQUFDLEdBQUcsQ0FBYixFQUFnQkEsQ0FBQyxHQUFHLEVBQXBCLEVBQXdCQSxDQUFDLEVBQXpCLEVBQTZCO0FBQ3pCLFdBQUt6QixJQUFMLENBQVUyQixjQUFWLENBQXlCLFdBQXpCLEVBQXNDQSxjQUF0QyxDQUFxRCxRQUFRRixDQUE3RCxFQUFnRVEsTUFBaEUsR0FBeUUsS0FBekU7QUFDSDtBQUNKO0FBbFBJLENBQVQiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbImNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgbGJsVXNlckNvaW46IHtcclxuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZTogY2MuTGFiZWwsXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lOiAn55So5oi36YeR5biBJyxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGxibFdpbkNvaW46IHtcclxuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZTogY2MuTGFiZWwsXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lOiAn5pys5bGA6LWi5b6XJyxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGxibEJldDoge1xyXG4gICAgICAgICAgICBkZWZhdWx0OiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlOiBjYy5MYWJlbCxcclxuICAgICAgICAgICAgZGlzcGxheU5hbWU6ICfmirzms6gnLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcm9sZVBiOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IFtdLFxyXG4gICAgICAgICAgICB0eXBlOiBjYy5QcmVmYWIsXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lOiAn54mM6KeS6ImyUGInLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY2FyZHM6IHtcclxuICAgICAgICAgICAgZGVmYXVsdDogW10sXHJcbiAgICAgICAgICAgIHR5cGU6IGNjLk5vZGUsXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lOiAn5qGM6Z2i54mMJyxcclxuICAgICAgICB9XHJcblxyXG4gICAgfSxcclxuXHJcbiAgICBvbkxvYWQoKSB7XHJcbiAgICAgICAgdGhpcy5wbGF5ZXJJbmZvID0gcmVxdWlyZShcIlBsYXllckluZm9cIikuZ2V0SW5zdGFudDtcclxuICAgICAgICB0aGlzLm5ldCA9IHRoaXMubm9kZS5nZXRDb21wb25lbnQoJ0FUVE5ldHdvcmsnKTtcclxuICAgICAgICB0aGlzLmF1ZGlvID0gdGhpcy5ub2RlLmdldENvbXBvbmVudCgnQVRUQXVkaW8nKTtcclxuICAgICAgICB0aGlzLmJldCA9IDEwMDtcclxuICAgICAgICB0aGlzLmxvdHRlcnlSZXMgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuaXNBbmkgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmNob29zZUNhcmRBcnJheSA9IFtdO1xyXG4gICAgfSxcclxuXHJcbiAgICBzdGFydCgpIHtcclxuICAgICAgICAvLyB0aGlzLmxibFdpbkNvaW4uc3RyaW5nID0gJzAuMDAnO1xyXG4gICAgICAgIHRoaXMuc2V0QmV0KCk7XHJcbiAgICAgICAgdGhpcy5sYmxVc2VyQ29pbi5zdHJpbmcgPSB0aGlzLnBsYXllckluZm8ucGxheWVyQ29pbi50b0ZpeGVkKDIpO1xyXG4gICAgICAgIHRoaXMuZGVhbENhcmRzKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIG9uQ0xpY2soZXZlbnQsIGFyZ3MpIHtcclxuICAgICAgICBpZiAodGhpcy5pc0FuaSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChhcmdzID09ICdyb2xsJykge1xyXG4gICAgICAgICAgICB0aGlzLnNlbmRSb2xsKCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChhcmdzID09ICdhZGQnKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmxvdHRlcnlSZXMgIT0gbnVsbCAmJiAhdGhpcy5sb3R0ZXJ5UmVzLnZpZXdhcnJheS5pc0ZpbmFsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5hdWRpby5wbGF5RWZmZWN0KDApO1xyXG4gICAgICAgICAgICB0aGlzLmJldCArPSAxMDA7XHJcbiAgICAgICAgICAgIHRoaXMuYmV0ID0gdGhpcy5iZXQgPj0gMTAwMDAgPyAxMDAwMCA6IHRoaXMuYmV0O1xyXG4gICAgICAgICAgICB0aGlzLnNldEJldCgpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoYXJncyA9PSAnZGVjJykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5sb3R0ZXJ5UmVzICE9IG51bGwgJiYgIXRoaXMubG90dGVyeVJlcy52aWV3YXJyYXkuaXNGaW5hbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuYXVkaW8ucGxheUVmZmVjdCg1KTtcclxuICAgICAgICAgICAgdGhpcy5iZXQgLT0gMTAwO1xyXG4gICAgICAgICAgICB0aGlzLmJldCA9IHRoaXMuYmV0ID4gMCA/IHRoaXMuYmV0IDogMTAwO1xyXG4gICAgICAgICAgICB0aGlzLnNldEJldCgpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoYXJncyA9PSAnbWF4Jykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5sb3R0ZXJ5UmVzICE9IG51bGwgJiYgIXRoaXMubG90dGVyeVJlcy52aWV3YXJyYXkuaXNGaW5hbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuYXVkaW8ucGxheUVmZmVjdCg0KTtcclxuICAgICAgICAgICAgdGhpcy5iZXQgPSAxMDAwMDtcclxuICAgICAgICAgICAgdGhpcy5zZXRCZXQoKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGFyZ3MgPT0gJ2V4aXRHYW1lJykge1xyXG4gICAgICAgICAgICB0aGlzLmF1ZGlvLnBsYXlFZmZlY3QoNSk7XHJcbiAgICAgICAgICAgIHRoaXMubmV0LnNvY2tldC5kaXNjb25uZWN0KCk7XHJcbiAgICAgICAgICAgIGNjLmRpcmVjdG9yLmxvYWRTY2VuZShcIkxvYmJ5TWFpblwiKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIHNldEJldCgpIHtcclxuICAgICAgICB0aGlzLmxibEJldC5zdHJpbmcgPSAodGhpcy5iZXQgLyAxMDApLnRvRml4ZWQoMik7XHJcbiAgICAgICAgbGV0IGJldFNob3dBcnJheSA9IFs3NTAsIDI1MCwgMTUwLCA2MCwgMTAsIDcsIDUsIDMsIDIsIDFdO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYmV0U2hvd0FycmF5Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMubm9kZS5nZXRDaGlsZEJ5TmFtZShcImltYWdlX3BpYzFcIikuZ2V0Q2hpbGRCeU5hbWUoXCJsaXN0XCIpLmdldENoaWxkQnlOYW1lKFwiXCIgKyAoaSArIDEpKS5nZXRDb21wb25lbnQoY2MuTGFiZWwpLnN0cmluZyA9IGJldFNob3dBcnJheVtpXSAqICh0aGlzLmJldCAvIDEwMCk7XHJcbiAgICAgICAgICAgIGlmIChpIDwgNCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ub2RlLmdldENoaWxkQnlOYW1lKFwiY2FpamlubGllYmlhb1wiKS5nZXRDaGlsZEJ5TmFtZShcIlwiICsgKGkgKyAxKSkuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5zdHJpbmcgPSBiZXRTaG93QXJyYXlbaV0gKiAodGhpcy5iZXQgLyAxMDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBjaG9vc2VDYXJkIChldmVudCwgZGF0YSkge1xyXG4gICAgICAgIGlmICh0aGlzLmxvdHRlcnlSZXMgJiYgIXRoaXMubG90dGVyeVJlcy52aWV3YXJyYXkuaXNGaW5hbCAmJiAhdGhpcy5pc0FuaSkge1xyXG4gICAgICAgICAgICB0aGlzLmF1ZGlvLnBsYXlFZmZlY3QoMSk7XHJcbiAgICAgICAgICAgIGxldCBuZWVkUHVzaCA9IHRydWU7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jaG9vc2VDYXJkQXJyYXkubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmIChwYXJzZUludChkYXRhKSA9PSB0aGlzLmNob29zZUNhcmRBcnJheVtpXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5lZWRQdXNoID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaG9vc2VDYXJkQXJyYXkuc3BsaWNlKGksIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FyZHNbZGF0YV0uZ2V0Q2hpbGRCeU5hbWUoXCJVSV9CYW9MaXVcIikuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG5lZWRQdXNoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNhcmRzW2RhdGFdLmdldENoaWxkQnlOYW1lKFwiVUlfQmFvTGl1XCIpLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNob29zZUNhcmRBcnJheS5wdXNoKHBhcnNlSW50KGRhdGEpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICAvL+WPkeeJjFxyXG4gICAgZGVhbENhcmRzICgpIHtcclxuICAgICAgICB0aGlzLmlzQW5pID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmF1ZGlvLnBsYXlFZmZlY3QoMyk7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNhcmRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCB0ZW1wQ2FyZCA9IHRoaXMuY2FyZHNbaV07XHJcbiAgICAgICAgICAgIHRlbXBDYXJkLnNldFBvc2l0aW9uKGNjLnYyKC01MDAsIDApKTtcclxuICAgICAgICAgICAgdGVtcENhcmQuZ2V0Q2hpbGRCeU5hbWUoXCJiYWNrXCIpLnNjYWxlWCA9IDE7XHJcbiAgICAgICAgICAgIHRlbXBDYXJkLmdldENoaWxkQnlOYW1lKFwiY2FyZFwiKS5zY2FsZVggPSAwO1xyXG4gICAgICAgICAgICB0ZW1wQ2FyZC5nZXRDaGlsZEJ5TmFtZShcImNhcmQyXCIpLnNjYWxlWCA9IDA7XHJcbiAgICAgICAgICAgIHRlbXBDYXJkLmdldENoaWxkQnlOYW1lKFwiVUlfQmFvTGl1XCIpLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBsZXQgbW92ZVRvUG9zID0gY2MudjIoLTMxNCArIGkgKiAxNTcsIDApO1xyXG4gICAgICAgICAgICB0ZW1wQ2FyZC5zdG9wQWxsQWN0aW9ucygpO1xyXG4gICAgICAgICAgICBsZXQgY2FyZEluZGV4ID0gdGhpcy5jYXJkcy5sZW5ndGggLSAxIC0gaTtcclxuICAgICAgICAgICAgdGVtcENhcmQucnVuQWN0aW9uKGNjLnNlcXVlbmNlKGNjLmRlbGF5VGltZShjYXJkSW5kZXggKiAwLjEpLCBcclxuICAgICAgICAgICAgICAgIGNjLm1vdmVUbygwLjIgLSBjYXJkSW5kZXggKiAwLjAyLCBtb3ZlVG9Qb3MpXHJcbiAgICAgICAgICAgICkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNjaGVkdWxlT25jZSgoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuaXNBbmkgPSBmYWxzZTtcclxuICAgICAgICB9LCAwLjcpO1xyXG4gICAgfSxcclxuICAgIGxlYXZlQ2FyZHMgKCkge1xyXG4gICAgICAgIHRoaXMuaXNBbmkgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMubG90dGVyeVJlcyA9IG51bGw7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNhcmRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCB0ZW1wQ2FyZCA9IHRoaXMuY2FyZHNbaV07XHJcbiAgICAgICAgICAgIHRlbXBDYXJkLnN0b3BBbGxBY3Rpb25zKCk7XHJcbiAgICAgICAgICAgIGxldCBjYXJkSW5kZXggPSB0aGlzLmNhcmRzLmxlbmd0aCAtIDEgLSBpO1xyXG4gICAgICAgICAgICB0ZW1wQ2FyZC5ydW5BY3Rpb24oXHJcbiAgICAgICAgICAgICAgICBjYy5zZXF1ZW5jZShjYy5kZWxheVRpbWUoY2FyZEluZGV4ICogMC4xKSwgXHJcbiAgICAgICAgICAgICAgICBjYy5tb3ZlQnkoMC4yLCBjYy52MigtMTUwLCAwKSksXHJcbiAgICAgICAgICAgICAgICBjYy5tb3ZlVG8oMC4zIC0gY2FyZEluZGV4ICogMC4wMiwgY2MudjIoNTAwLCAwKSlcclxuICAgICAgICAgICAgKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2NoZWR1bGVPbmNlKCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5kZWFsQ2FyZHMgKCk7XHJcbiAgICAgICAgfSwgMS41KTtcclxuICAgIH0sXHJcbiAgICAvL+W8gOeJjFxyXG4gICAgb3BlbkNhcmRzIChpc0ZpbmFsKSB7XHJcbiAgICAgICAgdGhpcy5pc0FuaSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5hdWRpby5wbGF5RWZmZWN0KDIpO1xyXG4gICAgICAgIGlmICghaXNGaW5hbCkge1xyXG4gICAgICAgICAgICB0aGlzLmxibFVzZXJDb2luLnN0cmluZyA9ICh0aGlzLmxvdHRlcnlSZXMudXNlcnNjb3JlIC8gMTAwKS50b0ZpeGVkKDIpO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY2FyZHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGxldCB0ZW1wQ2FyZCA9IHRoaXMuY2FyZHNbaV07XHJcbiAgICAgICAgICAgICAgICB0ZW1wQ2FyZC5nZXRDaGlsZEJ5TmFtZShcImJhY2tcIikucnVuQWN0aW9uKGNjLnNjYWxlVG8oMC4xLCAwLCAxKSk7XHJcbiAgICAgICAgICAgICAgICB0ZW1wQ2FyZC5nZXRDaGlsZEJ5TmFtZShcImNhcmRcIikucnVuQWN0aW9uKGNjLnNlcXVlbmNlKGNjLmRlbGF5VGltZSgwLjEpLGNjLnNjYWxlVG8oMC4xLCAxLCAxKSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuc2NoZWR1bGVPbmNlKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaXNBbmkgPSBmYWxzZTtcclxuICAgICAgICAgICAgfSwgMC4zKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY2FyZHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGxldCB0ZW1wQ2FyZCA9IHRoaXMuY2FyZHNbaV07XHJcbiAgICAgICAgICAgICAgICBsZXQgbmVlZEFuaSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMuY2hvb3NlQ2FyZEFycmF5Lmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY2hvb3NlQ2FyZEFycmF5W2pdID09IGkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcENhcmQuZ2V0Q2hpbGRCeU5hbWUoXCJjYXJkXCIpLnNjYWxlWCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBDYXJkLmdldENoaWxkQnlOYW1lKFwiY2FyZDJcIikuc2NhbGVYID0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmVlZEFuaSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAobmVlZEFuaSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBDYXJkLmdldENoaWxkQnlOYW1lKFwiY2FyZFwiKS5ydW5BY3Rpb24oY2Muc2NhbGVUbygwLjEsIDAsIDEpKTtcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wQ2FyZC5nZXRDaGlsZEJ5TmFtZShcImNhcmQyXCIpLnJ1bkFjdGlvbihjYy5zZXF1ZW5jZShjYy5kZWxheVRpbWUoMC4xKSxjYy5zY2FsZVRvKDAuMSwgMSwgMSksY2Muc2NhbGVUbygwLjEsIDAsIDEpLGNjLnNjYWxlVG8oMC4xLCAxLCAxKSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuc2NoZWR1bGVPbmNlKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvd1Jlc3VsdCgpO1xyXG4gICAgICAgICAgICB9LCAxKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgc2hvd1Jlc3VsdCAoKSB7XHJcbiAgICAgICAgdGhpcy5oaWRlUmVzdWx0QW5pKCk7XHJcbiAgICAgICAgdGhpcy5sYmxVc2VyQ29pbi5zdHJpbmcgPSAodGhpcy5sb3R0ZXJ5UmVzLnVzZXJzY29yZSAvIDEwMCkudG9GaXhlZCgyKTtcclxuICAgICAgICBpZiAodGhpcy5sb3R0ZXJ5UmVzLnZpZXdhcnJheS53aW5UeXBlID09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5hdWRpby5wbGF5RWZmZWN0KDYpO1xyXG4gICAgICAgICAgICB0aGlzLm5vZGUuZ2V0Q2hpbGRCeU5hbWUoXCJyZXN1bHRBbmlcIikuZ2V0Q2hpbGRCeU5hbWUoXCJhbmkwXCIpLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMubm9kZS5nZXRDaGlsZEJ5TmFtZShcInJlc3VsdEFuaVwiKS5nZXRDaGlsZEJ5TmFtZShcImFuaTBcIikuZ2V0Q29tcG9uZW50KGNjLkFuaW1hdGlvbikucGxheSgpO1xyXG4gICAgICAgICAgICB0aGlzLm5vZGUuZ2V0Q2hpbGRCeU5hbWUoXCJyZXN1bHRBbmlcIikuZ2V0Q2hpbGRCeU5hbWUoXCJhbmlMb3NlXCIpLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMubm9kZS5nZXRDaGlsZEJ5TmFtZShcInJlc3VsdEFuaVwiKS5nZXRDaGlsZEJ5TmFtZShcImFuaUxvc2VcIikuZ2V0Q29tcG9uZW50KGNjLkFuaW1hdGlvbikucGxheSgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXVkaW8ucGxheUVmZmVjdCg3KTtcclxuICAgICAgICAgICAgdGhpcy5ub2RlLmdldENoaWxkQnlOYW1lKFwicmVzdWx0QW5pXCIpLmdldENoaWxkQnlOYW1lKFwiYW5pXCIgKyB0aGlzLmxvdHRlcnlSZXMudmlld2FycmF5LndpblR5cGUpLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMubm9kZS5nZXRDaGlsZEJ5TmFtZShcInJlc3VsdEFuaVwiKS5nZXRDaGlsZEJ5TmFtZShcImFuaVwiICsgdGhpcy5sb3R0ZXJ5UmVzLnZpZXdhcnJheS53aW5UeXBlKS5nZXRDb21wb25lbnQoY2MuQW5pbWF0aW9uKS5wbGF5KCk7XHJcbiAgICAgICAgICAgIHRoaXMubm9kZS5nZXRDaGlsZEJ5TmFtZShcInJlc3VsdEFuaVwiKS5nZXRDaGlsZEJ5TmFtZShcImFuaUdvbGRcIikuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5ub2RlLmdldENoaWxkQnlOYW1lKFwicmVzdWx0QW5pXCIpLmdldENoaWxkQnlOYW1lKFwiYW5pR29sZFwiKS5nZXRDb21wb25lbnQoY2MuQW5pbWF0aW9uKS5wbGF5KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2NoZWR1bGVPbmNlKCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5oaWRlUmVzdWx0QW5pKCk7XHJcbiAgICAgICAgICAgIHRoaXMubGVhdmVDYXJkcygpO1xyXG4gICAgICAgIH0sIDIpO1xyXG4gICAgfSxcclxuXHJcbiAgICByb2xsKGxpc3QpIHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY2FyZHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmxvdHRlcnlSZXMudmlld2FycmF5LmlzRmluYWwpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2FyZHNbaV0uZ2V0Q2hpbGRCeU5hbWUoXCJjYXJkXCIpLnJlbW92ZUFsbENoaWxkcmVuKCk7XHJcbiAgICAgICAgICAgICAgICBsZXQgcGIgPSBjYy5pbnN0YW50aWF0ZSh0aGlzLnJvbGVQYltsaXN0W2ldXSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNhcmRzW2ldLmdldENoaWxkQnlOYW1lKFwiY2FyZFwiKS5hZGRDaGlsZChwYik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNhcmRzW2ldLmdldENoaWxkQnlOYW1lKFwiY2FyZDJcIikucmVtb3ZlQWxsQ2hpbGRyZW4oKTtcclxuICAgICAgICAgICAgICAgIGxldCBwYiA9IGNjLmluc3RhbnRpYXRlKHRoaXMucm9sZVBiW2xpc3RbaV1dKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2FyZHNbaV0uZ2V0Q2hpbGRCeU5hbWUoXCJjYXJkMlwiKS5hZGRDaGlsZChwYik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5vcGVuQ2FyZHModGhpcy5sb3R0ZXJ5UmVzLnZpZXdhcnJheS5pc0ZpbmFsKTtcclxuICAgICAgICBpZiAodGhpcy5sb3R0ZXJ5UmVzLnZpZXdhcnJheS5pc0ZpbmFsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2hvb3NlQ2FyZEFycmF5ID0gW107XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBzZW5kUm9sbCgpIHtcclxuICAgICAgICB0aGlzLm5ldC5zb2NrZXQuZW1pdCgnbG90dGVyeScsIEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgYmV0OiB0aGlzLmJldCxcclxuICAgICAgICAgICAgYXJyYXk6IHRoaXMuY2hvb3NlQ2FyZEFycmF5LFxyXG4gICAgICAgIH0pKTtcclxuICAgIH0sXHJcblxyXG4gICAgaGlkZVJlc3VsdEFuaSgpIHtcclxuICAgICAgICB0aGlzLm5vZGUuZ2V0Q2hpbGRCeU5hbWUoXCJyZXN1bHRBbmlcIikuZ2V0Q2hpbGRCeU5hbWUoXCJhbmlHb2xkXCIpLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMubm9kZS5nZXRDaGlsZEJ5TmFtZShcInJlc3VsdEFuaVwiKS5nZXRDaGlsZEJ5TmFtZShcImFuaUxvc2VcIikuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMTsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMubm9kZS5nZXRDaGlsZEJ5TmFtZShcInJlc3VsdEFuaVwiKS5nZXRDaGlsZEJ5TmFtZShcImFuaVwiICsgaSkuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxufSk7Il19