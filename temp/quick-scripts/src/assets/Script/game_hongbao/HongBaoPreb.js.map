{"version":3,"sources":["assets\\Script\\game_hongbao\\HongBaoPreb.js"],"names":["cc","Class","Component","properties","money_lab","Label","name_lab","remainNum_lab","finishBg","Node","onLoad","playerInfo","require","getInstant","exchangeRate","netWork","gameMain","find","getComponent","start","initUI","string","data","money","player","nowNum","maxNum","isHave","checkIsGet","initData","isGet","i","receiveList","length","playerId","userId","active","onClick_openGetHbPanel","nowHbId","hbId","open_panel","gameSocket","emit"],"mappings":";;;;;;AAAAA,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAGLC,EAAAA,UAAU,EAAE;AACRC,IAAAA,SAAS,EAAEJ,EAAE,CAACK,KADN;AAERC,IAAAA,QAAQ,EAAEN,EAAE,CAACK,KAFL;AAGRE,IAAAA,aAAa,EAAEP,EAAE,CAACK,KAHV;AAIRG,IAAAA,QAAQ,EAAER,EAAE,CAACS;AAJL,GAHP;AAULC,EAAAA,MAVK,oBAUI;AACL,SAAKC,UAAL,GAAkBC,OAAO,CAAC,YAAD,CAAP,CAAsBC,UAAxC;AACA,SAAKC,YAAL,GAAoB,KAAKH,UAAL,CAAgBG,YAApC;AACA,SAAKC,OAAL,GAAeH,OAAO,CAAC,gBAAD,CAAP,CAA0BC,UAAzC;AACA,SAAKG,QAAL,GAAgBhB,EAAE,CAACiB,IAAH,CAAQ,QAAR,EAAkBC,YAAlB,CAA+B,aAA/B,CAAhB;AACH,GAfI;AAiBLC,EAAAA,KAjBK,mBAiBG;AACJ,SAAKC,MAAL;AACH,GAnBI;AAqBLA,EAAAA,MArBK,oBAqBI;AACL,SAAKhB,SAAL,CAAeiB,MAAf,GAAwB,KAAKC,IAAL,CAAUC,KAAV,GAAkB,KAAKT,YAAvB,GAAsC,GAA9D;AACA,SAAKR,QAAL,CAAce,MAAd,GAAuB,KAAKC,IAAL,CAAUE,MAAjC;AACA,SAAKjB,aAAL,CAAmBc,MAAnB,GAA+B,KAAKC,IAAL,CAAUG,MAAzC,SAAmD,KAAKH,IAAL,CAAUI,MAA7D;AACA,SAAKC,MAAL,GAAc,KAAKL,IAAL,CAAUG,MAAV,GAAmB,CAAjC;AACA,SAAKG,UAAL;AACH,GA3BI;AA6BLC,EAAAA,QA7BK,oBA6BIP,IA7BJ,EA6BU;AACX,SAAKA,IAAL,GAAYA,IAAZ;AACH,GA/BI;AAgCL;AACAM,EAAAA,UAjCK,wBAiCQ;AACT,SAAKE,KAAL,GAAa,KAAb;;AACA,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKT,IAAL,CAAUU,WAAV,CAAsBC,MAA1C,EAAkDF,CAAC,EAAnD,EAAuD;AACnD,UAAI,KAAKpB,UAAL,CAAgBuB,QAAhB,IAA4B,KAAKZ,IAAL,CAAUU,WAAV,CAAsBD,CAAtB,EAAyBI,MAAzD,EAAiE;AAC7D,aAAKL,KAAL,GAAa,IAAb;AACA;AACH;AACJ;;AACD,SAAKtB,QAAL,CAAc4B,MAAd,GAAuB,KAAKN,KAAL,IAAc,CAAC,KAAKH,MAA3C;AACH,GA1CI;AA2CL;AACAU,EAAAA,sBA5CK,oCA4CoB;AACrB,QAAI,CAAC,KAAKP,KAAN,IAAe,KAAKH,MAAxB,EAAgC;AAC5B,WAAKX,QAAL,CAAcsB,OAAd,GAAwB,KAAKhB,IAAL,CAAUiB,IAAlC;AACA,WAAKvB,QAAL,CAAcwB,UAAd,CAAyB,OAAzB;AACH,KAHD,MAGK;AACD,WAAKzB,OAAL,CAAa0B,UAAb,CAAwBC,IAAxB,CAA6B,OAA7B,EAAsC;AAClCH,QAAAA,IAAI,EAAE,KAAKjB,IAAL,CAAUiB,IADkB,CACZ;;AADY,OAAtC;AAGH;AACJ;AArDI,CAAT","sourceRoot":"/","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        money_lab: cc.Label,\r\n        name_lab: cc.Label,\r\n        remainNum_lab: cc.Label,\r\n        finishBg: cc.Node,\r\n    },\r\n\r\n    onLoad() {\r\n        this.playerInfo = require(\"PlayerInfo\").getInstant;\r\n        this.exchangeRate = this.playerInfo.exchangeRate;\r\n        this.netWork = require(\"HongBaoNetWork\").getInstant;\r\n        this.gameMain = cc.find('Canvas').getComponent('HongBaoMain');\r\n    },\r\n\r\n    start() {\r\n        this.initUI();\r\n    },\r\n\r\n    initUI() {\r\n        this.money_lab.string = this.data.money / this.exchangeRate + \"元\";\r\n        this.name_lab.string = this.data.player;\r\n        this.remainNum_lab.string = `${this.data.nowNum}/${this.data.maxNum}`;\r\n        this.isHave = this.data.nowNum > 0;\r\n        this.checkIsGet();\r\n    },\r\n\r\n    initData(data) {\r\n        this.data = data;\r\n    },\r\n    //检查是否已领取\r\n    checkIsGet() {\r\n        this.isGet = false;\r\n        for (let i = 0; i < this.data.receiveList.length; i++) {\r\n            if (this.playerInfo.playerId == this.data.receiveList[i].userId) {\r\n                this.isGet = true;\r\n                break;\r\n            }\r\n        }\r\n        this.finishBg.active = this.isGet || !this.isHave;\r\n    },\r\n    //打开领红包\r\n    onClick_openGetHbPanel() {\r\n        if (!this.isGet && this.isHave) {\r\n            this.gameMain.nowHbId = this.data.hbId;\r\n            this.gameMain.open_panel(\"开始抢红包\");\r\n        }else{\r\n            this.netWork.gameSocket.emit(\"getHb\", {\r\n                hbId: this.data.hbId, //红包id\r\n            });\r\n        }\r\n    },\r\n\r\n});\r\n"]}