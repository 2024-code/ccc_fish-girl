{"version":3,"sources":["assets\\Script\\game_hongbao\\HongBaoMain.js"],"names":["cc","Class","Component","properties","maskPanel","Node","roomPrice_lab","Label","roomRule_lab","getHbCoin_lab","hbScrollview","ScrollView","hbItem","Prefab","hbDetailPanel","hbDetail_lab","playerScrollview","playerItem","playerNode","horseLamp_Node","horseLamp_lab","onLoad","log","playerInfo","require","getInstant","setGameObj_Function","netWork","sethongbaoObj_Function","gameSocket","emit","hongbaoPlayer","getComponent","start","active","gameInit","data","nowHbId","lampList","nowPrice","hbPrice","string","exchangeRate","ruleType","hbList","content","removeAllChildren","i","length","item","instantiate","initData","addChild","scrollToBottom","createMsg","info","billing_Function","updateView","updateHongBaoList","push","getHongBao","getChildByName","ResultCode","updateHbInList","ResultData","packageMoney","toFixed","open_panel","open_hbDetail","itemList","children","hbId","initUI","node","nowNum","maxNum","showTime","receiveList","date","close_hbDetail","disconnectNetWork_Function","name","callback","panelAction1","close_panel","panelAction2","scale","runAction","sequence","scaleTo","callFunc","horseLamp","cb","x","luckName","hostName","type","moveTo","shift","time","leftd","Math","floor","lefth","leftm","lefts","result"],"mappings":"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","sourceRoot":"/","sourcesContent":["\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        maskPanel: cc.Node,//各种弹板黑背景\r\n        roomPrice_lab: cc.Label,//房间红包金额\r\n        roomRule_lab: cc.Label,//房间红包规则\r\n        getHbCoin_lab: cc.Label,//得到的红包金额\r\n        hbScrollview: cc.ScrollView,\r\n        hbItem: cc.Prefab,\r\n        hbDetailPanel: cc.Node,//红包详情面板\r\n        hbDetail_lab: cc.Label,\r\n        playerScrollview: cc.ScrollView,\r\n        playerItem: cc.Prefab,\r\n        playerNode: cc.Node,\r\n        horseLamp_Node: cc.Node,\r\n        horseLamp_lab: cc.Label\r\n    },\r\n\r\n    onLoad() {\r\n        cc.log('进入红包达人================================================');\r\n        this.playerInfo = require(\"PlayerInfo\").getInstant;\r\n        this.playerInfo.setGameObj_Function(this);\r\n        this.netWork = require(\"HongBaoNetWork\").getInstant;\r\n        this.netWork.sethongbaoObj_Function(this);\r\n        this.netWork.gameSocket.emit(\"hbInit\");\r\n        this.hongbaoPlayer = this.playerNode.getComponent(\"HongBaoPlayer\");\r\n    },\r\n\r\n    start() {\r\n        this.horseLamp_Node.active = false;\r\n    },\r\n\r\n    gameInit(data) {\r\n        this.nowHbId = 0;\r\n        this.lampList = [];\r\n        this.nowPrice = data.hbPrice;//每个红包的价格\r\n        this.roomPrice_lab.string = `金额${this.nowPrice / this.playerInfo.exchangeRate}元`;\r\n        this.roomRule_lab.string = data.ruleType == 0 ? \"最小接龙\" : \"最大接龙\";\r\n        this.hbList = data.hbList;\r\n        cc.log(this.hbList);\r\n        this.hbScrollview.content.removeAllChildren();\r\n        for (let i = 0; i < this.hbList.length; i++) {\r\n            let item = new cc.instantiate(this.hbItem);\r\n            item.getComponent(\"HongBaoPreb\").initData(this.hbList[i]);\r\n            this.hbScrollview.content.addChild(item);\r\n        }\r\n        this.hbScrollview.scrollToBottom(0.2);\r\n    },\r\n\r\n    createMsg(info) {\r\n\r\n    },\r\n    //金币结算\r\n    billing_Function(data) {\r\n        cc.log(\"coinresult----\", data);\r\n        this.hongbaoPlayer.updateView(data);\r\n    },\r\n\r\n    //刷新红包列表\r\n    updateHongBaoList(data) {\r\n        this.hbList.push(data);\r\n        let item = new cc.instantiate(this.hbItem);\r\n        this.hbScrollview.content.addChild(item);\r\n        item.getComponent(\"HongBaoPreb\").initData(data);\r\n        this.hbScrollview.scrollToBottom(0.2);\r\n    },\r\n    //领取红包\r\n    getHongBao(data) {\r\n        cc.log(\"getHongBao----\", data);\r\n        this.maskPanel.getChildByName(\"开始抢红包\").active = false;\r\n        switch (data.ResultCode) {\r\n            case 0://领取成功\r\n                this.updateHbInList(data.ResultData);\r\n                this.getHbCoin_lab.string = (data.packageMoney / this.playerInfo.exchangeRate).toFixed(2);\r\n                this.open_panel(\"抢到红包\");\r\n                break;\r\n            case 1000://没有剩余了\r\n                this.updateHbInList(data.ResultData);\r\n                this.open_panel(\"未抢到红包\");\r\n                break;\r\n            case 1001://领过了\r\n                this.updateHbInList(data.ResultData);\r\n                this.open_hbDetail(data.ResultData);\r\n                break;\r\n        }\r\n    },\r\n    //更新红包状态\r\n    updateHbInList(data) {\r\n        let itemList = this.hbScrollview.content.children;\r\n        for (let i = 0; i < itemList.length; i++) {\r\n            if (data.hbId == itemList[i].getComponent(\"HongBaoPreb\").data.hbId) {\r\n                itemList[i].getComponent(\"HongBaoPreb\").initData(data);\r\n                itemList[i].getComponent(\"HongBaoPreb\").initUI(data);\r\n            }\r\n        }\r\n    },\r\n    //打开红包详情\r\n    open_hbDetail(data) {\r\n        this.hbDetailPanel.active = true;\r\n        this.hbScrollview.node.active = false;\r\n        if (data.nowNum > 0) {\r\n            this.hbDetail_lab.string = `当前剩余红包${data.nowNum}个`;\r\n        } else {\r\n            this.hbDetail_lab.string = `${data.maxNum}个红包，${this.showTime(data.receiveList[data.maxNum - 1].date - data.receiveList[0].date)}抢完`;\r\n        }\r\n        this.playerScrollview.content.removeAllChildren();\r\n        for (let i = 0; i < data.receiveList.length; i++) {\r\n            let item = new cc.instantiate(this.playerItem);\r\n            item.getComponent(\"HongBaoPlayerItem\").initData(data.receiveList[i]);\r\n            this.playerScrollview.content.addChild(item);\r\n        }\r\n    },\r\n    //关闭红包详情\r\n    close_hbDetail() {\r\n        this.hbDetailPanel.active = false;\r\n        this.hbScrollview.node.active = true;\r\n    },\r\n    //断开连接\r\n    disconnectNetWork_Function() {\r\n\r\n    },\r\n    //打开某个弹板\r\n    open_panel(name, callback) {\r\n        this.maskPanel.active = true;\r\n        this.panelAction1(this.maskPanel.getChildByName(name), callback);\r\n    },\r\n    //关闭某个弹板\r\n    close_panel(name, callback) {\r\n        this.panelAction2(this.maskPanel.getChildByName(name), callback);\r\n    },\r\n    //打开弹板动效\r\n    panelAction1(node, callback) {\r\n        node.scale = 0.8;\r\n        node.active = true;\r\n        node.runAction(\r\n            cc.sequence(\r\n                cc.scaleTo(0.2, 1.1),\r\n                cc.scaleTo(0.1, 0.9),\r\n                cc.scaleTo(0.1, 1),\r\n                cc.callFunc(() => {\r\n                    callback && callback();\r\n                })\r\n            )\r\n        );\r\n    },\r\n    //关闭弹板动效\r\n    panelAction2(node, callback) {\r\n        node.runAction(\r\n            cc.sequence(\r\n                cc.scaleTo(0.1, 1.1),\r\n                cc.scaleTo(0.2, 0.8),\r\n                cc.callFunc(() => {\r\n                    node.active = false;\r\n                    this.maskPanel.active = false;\r\n                    callback && callback();\r\n                })\r\n            )\r\n        );\r\n    },\r\n    //跑马灯\r\n    horseLamp(data) {\r\n        this.lampList.push(data);\r\n        if (this.lampList.length == 1) {\r\n            let cb = () => {\r\n                this.horseLamp_Node.active = true;\r\n                this.horseLamp_lab.node.x = 550;\r\n                this.horseLamp_lab.string = `${this.lampList[0].luckName}抽中 ${this.lampList[0].hostName}的${this.lampList[0].type == 0 ? \"最小红包\" : \"最大红包\"}，2秒后发送新红包哦`;\r\n                this.horseLamp_lab.node.runAction(cc.sequence(\r\n                    cc.moveTo(10, -1500, 0),\r\n                    cc.callFunc(() => {\r\n                        this.lampList.shift();\r\n                        if (this.lampList.length == 0) {\r\n                            this.horseLamp_Node.active = false;\r\n                        } else {\r\n                            cb();\r\n                        }\r\n                    })\r\n                ));\r\n            };\r\n            cb();\r\n        }\r\n    },\r\n    //时间差转换\r\n    showTime(time) {\r\n        let leftd = Math.floor(time / (1000 * 60 * 60 * 24)),  //计算天数\r\n            lefth = Math.floor(time / (1000 * 60 * 60) % 24),  //计算小时数\r\n            leftm = Math.floor(time / (1000 * 60) % 60),  //计算分钟数\r\n            lefts = Math.floor(time / 1000 % 60);  //计算秒数\r\n        let result = \"\";\r\n        if (leftd > 0) {\r\n            result += (leftd + \"天\");\r\n        }\r\n        if (lefth > 0) {\r\n            result += (lefth + \"小时\");\r\n        }\r\n        if (leftm > 0) {\r\n            result += (leftm + \"分\");\r\n        }\r\n        if (lefts > 0) {\r\n            result += (lefts + \"秒\");\r\n        }\r\n        return result;\r\n    }\r\n});\r\n"]}