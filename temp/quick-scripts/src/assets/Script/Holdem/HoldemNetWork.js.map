{"version":3,"sources":["assets\\Script\\Holdem\\HoldemNetWork.js"],"names":["HoldemNetWork","getInstant","_instance","undefined","Single","lobbyMain","holdem","holdemSocket","playerInfo","tableId","seatIndex","playerHead","tax","addScore","eventOn","seats","turn","button","chu","isOver","consume_num","init","require","loginGame_Function","loginIP","port","userid","sign","self","socket","cc","sys","isNative","SocketIO","connect","connectServer_Function","on","isBrowser","close","gameDisconnect","contentGameServerFail_Function","ret","emit","gametype","error","result","changeResultJSON_Function","log","JSON","stringify","resultid","playerCoin","Obj","score","getComponent","netWork","disconnect","roomid","setHoldemSocketOn_Function","loginRoom_Function","loadGameScene","showMessagebox_Function","msg","console","ResultCode","bg_Black","active","ResultData","TableId","seatId","addscore","gameName","audioEngine","stopAll","find","QieHuanScene_normal","reset","curaction","i","length","op","ready","isOwner","getSelfData","getSeatByID","userId","getSeatIndexByID","seat","s","getLocalIndex","index","getLocalIndexByUserId","data","errcode","reconnectP","playerId","scene","errmsg","myHolds","countDown","gameBegin","updateDiChi","money","toFixed","myInfo","myTurn","myTurnForNoMoney","oneGuo","oneGen","oneAllIn","oneQuit","playersInNewCircle","newCircle","gameTurnChanged","isWinner","settlement","caculateResult","myARGStatusChanged","gameOver","gameInfoById","userInfoById","allGuo","exitResult","name","changeUserState","gameExit","disconnectNetWork_Function","seatindex","online","status","headUrl","headimgurl","parse","updateSeatInfo","setLobbyMainObj_Function","setHoldemObj_Function","jsonstr","e","module","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["/**\r\n * 炸金花SOCKET通讯\r\n */\r\nvar HoldemNetWork = (function () {\r\n    /**\r\n     * 单例模式\r\n     */\r\n    function getInstant() {\r\n        var _instance;\r\n        if (_instance === undefined) {\r\n            _instance = new Single();\r\n        }\r\n        return _instance;\r\n    }\r\n    /**\r\n     * 逻辑层\r\n     */\r\n    function Single() {\r\n        this.lobbyMain = null;\r\n        this.holdem = null;\r\n        this.holdemSocket = null;\r\n        this.playerInfo = null;\r\n        this.tableId = -1;\r\n        this.seatIndex = -1;\r\n        this.playerHead = null;\r\n        this.tax = -1;\r\n        this.addScore = 0;\r\n        this.eventOn = false;\r\n\r\n        this.seats = null;\r\n        this.turn = -1;\r\n        this.button = -1;\r\n        this.chu = -1;\r\n        this.isOver = false;\r\n        this.consume_num = 0;\r\n\r\n        /**\r\n         * 初始化\r\n         */\r\n        this.init = function () {\r\n                this.playerInfo = require(\"PlayerInfo\").getInstant;\r\n            },\r\n\r\n            /**\r\n             * 进入游戏\r\n             * @param {*} loginIP \r\n             * @param {*} port \r\n             * @param {*} userid \r\n             * @param {*} sign \r\n             */\r\n            this.loginGame_Function = function (loginIP, port, userid, sign) {\r\n                var self = this;\r\n                var socket = null;\r\n                if (cc.sys.isNative) {\r\n                    self.holdemSocket = SocketIO.connect(loginIP + \":\" + port);\r\n                } else {\r\n                    socket = require(\"socket-io\");\r\n                    self.holdemSocket = socket(loginIP + \":\" + port);\r\n                }\r\n                //用户连接游戏服务器\r\n                this.connectServer_Function(userid, sign);\r\n                //连接失败\r\n                this.holdemSocket.on(\"error\", function () {\r\n                        cc.sys.isBrowser && self.holdemSocket.close();\r\n                        self.holdemSocket = null;\r\n                        self.playerInfo.gameDisconnect || self.lobbyMain.contentGameServerFail_Function(\"Holdem\");\r\n                    }),\r\n                    //连接失败\r\n                    this.holdemSocket.on(\"connect_error\", function () {\r\n                        cc.sys.isBrowser && self.holdemSocket.close();\r\n                        self.holdemSocket = null;\r\n                        self.playerInfo.gameDisconnect || self.lobbyMain.contentGameServerFail_Function(\"Holdem\");\r\n                    });\r\n                //连接超时\r\n                this.holdemSocket.on(\"connect_timeout\", function () {\r\n                    cc.sys.isBrowser && self.holdemSocket.close();\r\n                    self.holdemSocket = null;\r\n                    self.playerInfo.gameDisconnect || self.lobbyMain.contentGameServerFail_Function(\"Holdem\");\r\n                });\r\n                //连接\r\n                this.holdemSocket.on(\"connected\", function (ret) {\r\n                    if (ret) {\r\n                        try {\r\n                            //进入游戏\r\n                            self.holdemSocket.emit(\"LoginGame\", {\r\n                                userid: userid, //用户ID\r\n                                gametype: 11, //游戏类型\r\n                                sign: sign //签名\r\n                            });\r\n                        } catch (error) {}\r\n                    }\r\n                });\r\n            };\r\n\r\n        /**\r\n         * 连接德州扑克服务器\r\n         * @param {*} userid \r\n         * @param {*} sign \r\n         */\r\n        this.connectServer_Function = function (userid, sign) {\r\n            var self = this;\r\n\r\n            this.holdemSocket && this.holdemSocket.on(\"loginGameResult\", function (ret) {\r\n                var result = self.changeResultJSON_Function(ret);\r\n                cc.log('游戏登陆成功=======================' + JSON.stringify(result));\r\n                if (result.resultid) { //游戏登录成功\r\n                    self.playerInfo.playerCoin = result.Obj.score;\r\n                    self.lobbyMain.getComponent(\"LobbyMain\").netWork.socket.disconnect();\r\n                    self.holdemSocket.emit(\"LoginRoom\", { //登录游戏房间接口 roomid传 1 就好\r\n                        roomid: 1\r\n                    });\r\n                    self.setHoldemSocketOn_Function();\r\n                    self.loginRoom_Function();\r\n                } else {\r\n                    //游戏登录失败\r\n                    self.lobbyMain.getComponent(\"LobbyMain\").loadGameScene = false;\r\n                    self.lobbyMain.getComponent(\"LobbyMain\").showMessagebox_Function(result.msg, 1, 4);\r\n                    self.eventOn = true;\r\n                }\r\n            });\r\n        };\r\n\r\n        /**\r\n         * 进入房间\r\n         */\r\n        this.loginRoom_Function = function () {\r\n            cc.log('进入房间')\r\n            var self = this;\r\n            //返回房间数据\r\n            this.holdemSocket.on(\"LoginRoomResult\", function (ret) {\r\n                console.log('LoginRoomResult:', ret);\r\n                var result = self.changeResultJSON_Function(ret);\r\n                if (result.ResultCode) {\r\n                    self.lobbyMain.bg_Black.active = true;\r\n                    self.tableId = result.ResultData.TableId;\r\n                    self.seatId = result.ResultData.seatId;\r\n                    self.tax = result.ResultData.tax;\r\n                    self.addScore = result.ResultData.addscore;\r\n                    self.playerInfo.gameDisconnect = false;\r\n                    self.playerInfo.gameName = \"Holdem\";\r\n                    cc.audioEngine.stopAll();\r\n                    cc.find(\"Canvas/buttonCtrl\").getComponent(\"LobbyButtonClick\").QieHuanScene_normal(\"HoldemMain\");\r\n                }\r\n            });\r\n        };\r\n\r\n        this.reset = function () {\r\n            this.turn = -1;\r\n            this.chu = -1;\r\n            this.button = -1;\r\n            this.curaction = null;\r\n            for (var i = 0; i < this.seats.length; ++i) {\r\n                this.seats[i].op = null;\r\n                this.seats[i].ready = false;\r\n            }\r\n        }\r\n\r\n        this.isOwner = function () {\r\n            return this.seatIndex == 0;\r\n        }\r\n\r\n        this.getSelfData = function () {\r\n            return this.seats[this.seatIndex];\r\n        }\r\n\r\n        this.getSeatByID = function (userId) {\r\n            var seatIndex = this.getSeatIndexByID(userId);\r\n            var seat = this.seats[seatIndex];\r\n            return seat;\r\n        };\r\n\r\n        this.getSeatIndexByID = function (userId) {\r\n            for (var i = 0; i < this.seats.length; ++i) {\r\n                var s = this.seats[i];\r\n                if (s.userid == userId) {\r\n                    return i;\r\n                }\r\n            }\r\n            return -1;\r\n        }\r\n\r\n        this.getLocalIndex = function (index) {\r\n            var ret = (index - this.seatIndex + 5) % 5;\r\n            return ret;\r\n        }\r\n\r\n        this.getLocalIndexByUserId = function (userId) {\r\n            var seatIndex = this.getSeatIndexByID(userId);\r\n            var ret = this.getLocalIndex(seatIndex);\r\n            return ret;\r\n        }\r\n\r\n        /**\r\n         * 长连通讯\r\n         */\r\n        this.setHoldemSocketOn_Function = function () {\r\n                var self = this;\r\n\r\n                /**\r\n                 * 长连接断开监听\r\n                 */\r\n                this.holdemSocket.on(\"login_result\", function (data) {\r\n                    data = self.changeResultJSON_Function(data);\r\n                    console.log(\"login_result:\", data);\r\n                    if (data.errcode === 0) {\r\n                        self.reconnectP = data.ret;\r\n                        var data = data.data;\r\n                        self.seats = data.seats;\r\n                        self.seatIndex = self.getSeatIndexByID(self.playerInfo.playerId);\r\n                        self.isOver = false;\r\n                        self.consume_num = data.scene.consume_num ? data.scene.consume_num : 50;\r\n                    } else {\r\n                        console.log(data.errmsg);\r\n                    }\r\n\r\n                });\r\n\r\n                this.holdemSocket.on(\"socket_MyHolds\", function (data) {\r\n                    data = self.changeResultJSON_Function(data);\r\n                    if (data && data.length > 0) {\r\n                        self.holdem.myHolds(data);\r\n                    }\r\n                });\r\n                this.holdemSocket.on(\"count_down_push\", function (data) {\r\n                    data = self.changeResultJSON_Function(data);\r\n                    !!self.holdem && !!self.holdem.countDown && self.holdem.countDown(data);\r\n                });\r\n                this.holdemSocket.on(\"game_begin_push\", function (data) {\r\n                    data = self.changeResultJSON_Function(data);\r\n                    self.holdem.gameBegin(data);\r\n                });\r\n                this.holdemSocket.on(\"game_diChiUpdate_push\", function (data) {\r\n                    data = self.changeResultJSON_Function(data);\r\n                    self.holdem.updateDiChi(data);\r\n                });\r\n                this.holdemSocket.on(\"game_myInfo_push\", function (data) {\r\n                    data = self.changeResultJSON_Function(data);\r\n                    var seat = self.getSeatByID(data.userid);\r\n                    seat.score = (data.money * 0.01).toFixed(2);\r\n                    self.holdem.myInfo(data);\r\n                });\r\n                this.holdemSocket.on(\"game_myTurn_push\", function (data) {\r\n                    data = self.changeResultJSON_Function(data);\r\n                    self.holdem.myTurn(data);\r\n                });\r\n\r\n                this.holdemSocket.on(\"myTurn_time_init\", function (data) {\r\n                    data = self.changeResultJSON_Function(data);\r\n                    self.holdem.myTurnForNoMoney(data);\r\n                });\r\n\r\n                this.holdemSocket.on(\"game_oneClickGuo_push\", function (data) {\r\n                    data = self.changeResultJSON_Function(data);\r\n                    self.holdem.oneGuo(data);\r\n                });\r\n                this.holdemSocket.on(\"game_oneGen_push\", function (data) {\r\n                    data = self.changeResultJSON_Function(data);\r\n                    var seat = self.getSeatByID(data.userid);\r\n                    seat.score = (data.money * 0.01).toFixed(2);\r\n                    self.holdem.oneGen(data);\r\n                });\r\n                this.holdemSocket.on(\"game_oneAllIn_push\", function (data) {\r\n                    data = self.changeResultJSON_Function(data);\r\n                    var seat = self.getSeatByID(data.userid);\r\n                    seat.score = (data.money * 0.01).toFixed(2);\r\n                    self.holdem.oneAllIn(data);\r\n                });\r\n                this.holdemSocket.on(\"game_oneQuit_push\", function (data) {\r\n                    data = self.changeResultJSON_Function(data);\r\n                    self.holdem.oneQuit(data);\r\n                });\r\n                this.holdemSocket.on(\"game_playersInNewCircle_push\", function (data) {\r\n                    data = self.changeResultJSON_Function(data);\r\n                    self.holdem.playersInNewCircle(data);\r\n                });\r\n                this.holdemSocket.on(\"game_newCircle_push\", function (data) {\r\n                    data = self.changeResultJSON_Function(data);\r\n                    self.holdem.newCircle(data);\r\n                });\r\n                this.holdemSocket.on(\"game_turnChanged_push\", function (data) {\r\n                    data = self.changeResultJSON_Function(data);\r\n                    if (self.playerInfo.playerId != data) {\r\n                        self.holdem.gameTurnChanged(data);\r\n                    }\r\n                });\r\n                this.holdemSocket.on(\"game_caculateResult_push\", function (data) {\r\n                    data = self.changeResultJSON_Function(data);\r\n                    for (var i = 0; i < data.length; i++) {\r\n                        if (self.playerInfo.playerId == data[i].userid && data[i].isWinner) {\r\n                            self.holdem.settlement(false);\r\n                        } else if (self.playerInfo.playerId == data[i].userid && !data[i].isWinner) {\r\n                            self.holdem.settlement(true);\r\n                        }\r\n                    };\r\n                    self.holdem.caculateResult(data);\r\n                });\r\n                this.holdemSocket.on(\"game_myARGStatusChanged_push\", function (data) {\r\n                    data = self.changeResultJSON_Function(data);\r\n                    self.holdem.myARGStatusChanged(data);\r\n                });\r\n                this.holdemSocket.on(\"game_over\", function (data) {\r\n                    data = self.changeResultJSON_Function(data);\r\n                    self.holdem.gameOver(data);\r\n                });\r\n                this.holdemSocket.on(\"game_gameInfoById_push\", function (data) {\r\n                    if (data) {\r\n                        data = self.changeResultJSON_Function(data);\r\n                        self.holdem.gameInfoById(data);\r\n                    }\r\n                });\r\n                this.holdemSocket.on(\"game_userInfoById_push\", function (data) {\r\n                    data = self.changeResultJSON_Function(data);\r\n                    self.holdem.userInfoById(data);\r\n                });\r\n                this.holdemSocket.on(\"game_allGuo_push\", function (data) {\r\n                    data = self.changeResultJSON_Function(data);\r\n                    self.holdem.allGuo(data);\r\n                });\r\n                this.holdemSocket.on(\"exit_result\", function (data) {\r\n                    data = self.changeResultJSON_Function(data);\r\n                    console.log('离开房间返回信息:' + data);\r\n                    self.turn = -1;\r\n                    self.seats = null;\r\n                    self.holdem.exitResult(data);\r\n                    self.holdem = null;\r\n                });\r\n                this.holdemSocket.on(\"exit_notify_push\", function (data) {\r\n                    data = self.changeResultJSON_Function(data);\r\n                    var userId = data;\r\n                    var s = self.getSeatByID(userId);\r\n                    cc.log('离开桌子===================' + JSON.stringify(s));\r\n                    if (s != null) {\r\n                        s.userid = 0;\r\n                        s.name = \"\";\r\n                        self.holdem.changeUserState(s);\r\n                    }\r\n                });\r\n\r\n                this.holdemSocket.on(\"noExit\", ret => {\r\n                    cc.find('Canvas/com_ingame_tips').active = true;\r\n                });\r\n\r\n                this.holdemSocket.on(\"dispress_push\", function (data) {\r\n                    self.turn = -1;\r\n                    self.seats = null;\r\n                });\r\n                this.holdemSocket.on(\"disconnect\", function (data) {\r\n                    cc.find('Canvas/Loading').active = true;\r\n                    if (!self.holdem.gameExit) {\r\n                        self.holdem.disconnectNetWork_Function();\r\n                    }\r\n                });\r\n                // 新人加入房间\r\n                this.holdemSocket.on(\"new_user_comes_push\", function (data) {\r\n                    data = self.changeResultJSON_Function(data);\r\n                    cc.log('有新玩家加入==============' + JSON.stringify(data));\r\n                    var seatIndex = data.seatindex;\r\n                    if (self.seats[seatIndex].userid > 0) {\r\n                        self.seats[seatIndex].online = true;\r\n                        self.seats[seatIndex].ready = data.ready;\r\n                        self.seats[seatIndex].score = data.score;\r\n                        self.seats[seatIndex].status = data.status;\r\n                        self.seats[seatIndex].headUrl = data.headimgurl;\r\n                    } else {\r\n                        data.online = true;\r\n                        self.seats[seatIndex] = JSON.parse(JSON.stringify(data));\r\n                        !!self.holdem && self.holdem.updateSeatInfo(self.seats[seatIndex]);\r\n                    }\r\n                });\r\n            },\r\n\r\n            /**\r\n             * 传递this作用域\r\n             * @param {*} scene 来自LobbyMain.js\r\n             */\r\n            this.setLobbyMainObj_Function = function (scene) {\r\n                this.lobbyMain = scene;\r\n            },\r\n\r\n            /**\r\n             * 传递this作用域\r\n             * @param {*} scene 来自FlowerMain.js\r\n             */\r\n            this.setHoldemObj_Function = function (scene) {\r\n                this.holdem = scene;\r\n            },\r\n\r\n            /**\r\n             * 解析JSON数据\r\n             * @param {*} ret \r\n             */\r\n            this.changeResultJSON_Function = function (ret) {\r\n                // if (cc.sys.isNative) {\r\n                //     return JSON.parse(ret);\r\n                // }\r\n                var jsonstr = null;\r\n                try {\r\n                    jsonstr = JSON.parse(ret);\r\n                } catch (e) {\r\n                    jsonstr = null;\r\n                }\r\n                if (jsonstr == null)\r\n                    return ret;\r\n                else\r\n                    return jsonstr;\r\n            },\r\n            this.init();\r\n    }\r\n    return {\r\n        getInstant: new getInstant()\r\n    }\r\n})();\r\n\r\nmodule.exports = HoldemNetWork;"]}