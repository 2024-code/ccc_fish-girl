{"version":3,"sources":["assets\\Script\\Flower\\FlowerNetWork.js"],"names":["FlowerNetWork","getInstant","_instance","undefined","Single","lobbyMain","flower","flowerSocket","playerInfo","tableId","seatIndex","playerHead","tax","addScore","eventOn","seats","turn","button","chu","isOver","consume_num","init","require","loginGame_Function","loginIP","port","userid","sign","self","socket","cc","sys","isNative","SocketIO","connect","connectServer_Function","on","isBrowser","close","gameDisconnect","contentGameServerFail_Function","ret","emit","gametype","error","find","active","result","changeResultJSON_Function","resultid","playerCoin","Obj","score","getComponent","netWork","disconnect","roomid","setFlowerSocketOn_Function","loginRoom_Function","loadGameScene","showMessagebox_Function","msg","console","log","ResultCode","bg_Black","ResultData","TableId","seatId","addscore","gameName","audioEngine","stopAll","reset","curaction","i","length","op","ready","isOwner","getSelfData","getSeatByID","userId","getSeatIndexByID","seat","s","getLocalIndex","index","getLocalIndexByUserId","data","errcode","reconnectP","toFixed","roomId","playerId","QieHuanScene_normal","errmsg","actionData","name","changedUserState","gameCountDown","seatindex","online","JSON","parse","stringify","addUser","kanpai","qipaiResult","gameWannaToCompare","qiPaiNotify","gameMyTurnPush","changedGameTurn","gameTimerInitCounter","guoNotify","gameOverNotify","win","gamestate","gameBegin","currentZhu","noMoneyExit","a","commonInfo","key","money","gameMoneyPool","genZhuNotify","kanPaiNotify","jiaZhuNotify","messageNotify","gameCircleCount","gameUserInBiPaiResult","changedGameAction","gameAntiResults","userInfoById","gameInfoById","sbInAllIn","exitRoom","director","loadScene","gameExit","disconnectNetWork_Function","setLobbyMainObj_Function","scene","setFlowerObj_Function","module","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["/**\r\n * 炸金花SOCKET通讯\r\n */\r\nvar FlowerNetWork = (function () {\r\n    /**\r\n     * 单例模式\r\n     */\r\n    function getInstant() {\r\n        var _instance;\r\n        if (_instance === undefined) {\r\n            _instance = new Single();\r\n        }\r\n        return _instance;\r\n    }\r\n    /**\r\n     * 逻辑层\r\n     */\r\n    function Single() {\r\n        this.lobbyMain = null;\r\n        this.flower = null;\r\n        this.flowerSocket = null;\r\n        this.playerInfo = null;\r\n        this.tableId = -1;\r\n        this.seatIndex = -1;\r\n        this.playerHead = null;\r\n        this.tax = -1;\r\n        this.addScore = 0;\r\n        this.eventOn = false;\r\n\r\n        this.seats = null;\r\n        this.turn = -1;\r\n        this.button = -1;\r\n        this.chu = -1;\r\n        this.isOver = false;\r\n        this.consume_num = 0;\r\n\r\n        /**\r\n         * 初始化\r\n         */\r\n        this.init = function () {\r\n                this.playerInfo = require(\"PlayerInfo\").getInstant;\r\n            },\r\n\r\n            /**\r\n             * 进入游戏\r\n             * @param {*} loginIP \r\n             * @param {*} port \r\n             * @param {*} userid \r\n             * @param {*} sign \r\n             */\r\n            this.loginGame_Function = function (loginIP, port, userid, sign) {\r\n                var self = this;\r\n                var socket = null;\r\n                if (cc.sys.isNative) {\r\n                    self.flowerSocket = SocketIO.connect(loginIP + \":\" + port);\r\n                } else {\r\n                    socket = require(\"socket-io\");\r\n                    self.flowerSocket = socket(loginIP + \":\" + port);\r\n                }\r\n                //用户连接游戏服务器\r\n                this.connectServer_Function(userid, sign);\r\n                //连接失败\r\n                this.flowerSocket.on(\"error\", function () {\r\n                        cc.sys.isBrowser && self.flowerSocket.close();\r\n                        self.flowerSocket = null;\r\n                        self.playerInfo.gameDisconnect || self.lobbyMain.contentGameServerFail_Function(\"Flower\");\r\n                    }),\r\n                    //连接失败\r\n                    this.flowerSocket.on(\"connect_error\", function () {\r\n                        cc.sys.isBrowser && self.flowerSocket.close();\r\n                        self.flowerSocket = null;\r\n                        self.playerInfo.gameDisconnect || self.lobbyMain.contentGameServerFail_Function(\"Flower\");\r\n                    });\r\n                //连接超时\r\n                this.flowerSocket.on(\"connect_timeout\", function () {\r\n                    cc.sys.isBrowser && self.flowerSocket.close();\r\n                    self.flowerSocket = null;\r\n                    self.playerInfo.gameDisconnect || self.lobbyMain.contentGameServerFail_Function(\"Flower\");\r\n                });\r\n                //连接\r\n                this.flowerSocket.on(\"connected\", function (ret) {\r\n                    if (ret) {\r\n                        try {\r\n                            //进入游戏\r\n                            self.flowerSocket.emit(\"LoginGame\", {\r\n                                userid: userid, //用户ID\r\n                                gametype: 11, //游戏类型\r\n                                sign: sign //签名\r\n                            });\r\n                        } catch (error) {}\r\n                    }\r\n                });\r\n\r\n                this.flowerSocket.on(\"disconnect\", function (ret) {\r\n                    cc.find('Canvas/Loading').active = true;\r\n                });\r\n            };\r\n\r\n        /**\r\n         * 连接炸金花服务器\r\n         * @param {*} userid \r\n         * @param {*} sign \r\n         */\r\n        this.connectServer_Function = function (userid, sign) {\r\n            var self = this;\r\n\r\n            this.flowerSocket && this.flowerSocket.on(\"loginGameResult\", function (ret) {\r\n                var result = self.changeResultJSON_Function(ret);\r\n                if (result.resultid) { //游戏登录成功\r\n                    self.playerInfo.playerCoin = result.Obj.score;\r\n                    self.lobbyMain.getComponent(\"LobbyMain\").netWork.socket.disconnect();\r\n                    self.flowerSocket.emit(\"LoginRoom\", { //登录游戏房间接口 roomid传 1 就好\r\n                        roomid: 1\r\n                    });\r\n                    self.setFlowerSocketOn_Function();\r\n                    self.loginRoom_Function();\r\n                } else {\r\n                    //游戏登录失败\r\n                    self.lobbyMain.getComponent(\"LobbyMain\").loadGameScene = false;\r\n                    self.lobbyMain.getComponent(\"LobbyMain\").showMessagebox_Function(result.msg, 1, 4);\r\n                    self.eventOn = true;\r\n                }\r\n            });\r\n        };\r\n\r\n        /**\r\n         * 进入房间\r\n         */\r\n        this.loginRoom_Function = function () {\r\n            var self = this;\r\n            //返回房间数据\r\n            this.flowerSocket.on(\"LoginRoomResult\", function (ret) {\r\n                console.log('LoginRoomResult:', ret);\r\n                var result = self.changeResultJSON_Function(ret);\r\n                if (result.ResultCode) {\r\n                    self.lobbyMain.bg_Black.active = true;\r\n                    self.tableId = result.ResultData.TableId;\r\n                    self.seatIndex = result.ResultData.seatId;\r\n                    self.tax = result.ResultData.tax;\r\n                    self.addScore = result.ResultData.addscore;\r\n                    self.playerInfo.gameDisconnect = false;\r\n                    self.playerInfo.gameName = \"Flower\";\r\n                    cc.audioEngine.stopAll();\r\n                    // cc.director.loadScene(\"FlowerMain\");\r\n                }\r\n            });\r\n        };\r\n\r\n\r\n        this.reset = function () {\r\n            this.turn = -1;\r\n            this.chu = -1;\r\n            this.button = -1;\r\n            this.curaction = null;\r\n            for (var i = 0; i < this.seats.length; ++i) {\r\n                this.seats[i].op = null;\r\n                this.seats[i].ready = false;\r\n            }\r\n        }\r\n\r\n        this.isOwner = function () {\r\n            return this.seatIndex == 0;\r\n        }\r\n\r\n        this.getSelfData = function () {\r\n            return this.seats[this.seatIndex];\r\n        }\r\n\r\n        this.getSeatByID = function (userId) {\r\n            var seatIndex = this.getSeatIndexByID(userId);\r\n            var seat = this.seats[seatIndex];\r\n            return seat;\r\n        };\r\n\r\n        this.getSeatIndexByID = function (userId) {\r\n            for (var i = 0; i < this.seats.length; ++i) {\r\n                var s = this.seats[i];\r\n                if (s.userid == userId) {\r\n                    return i;\r\n                }\r\n            }\r\n            return -1;\r\n        }\r\n\r\n        this.getLocalIndex = function (index) {\r\n            var ret = (index - this.seatIndex + 5) % 5;\r\n            return ret;\r\n        }\r\n\r\n        this.getLocalIndexByUserId = function (userId) {\r\n            var seatIndex = this.getSeatIndexByID(userId);\r\n            var ret = this.getLocalIndex(seatIndex);\r\n            return ret;\r\n        }\r\n\r\n        /**\r\n         * 长连通讯\r\n         */\r\n        this.setFlowerSocketOn_Function = function () {\r\n                var self = this;\r\n\r\n                this.flowerSocket.on(\"login_result\", function (data) {\r\n                    console.log(\"login_result:\", data);\r\n                    data = self.changeResultJSON_Function(data);\r\n                    if (data.errcode === 0) {\r\n                        self.reconnectP = data.ret;\r\n                        var data = data.data;\r\n                        var seat = data.seats;\r\n                        for (let i = 0; i < seat.length; i++) {\r\n                            if (seat[i].score != \"\") {\r\n                                seat[i].score = (seat[i].score * 0.01).toFixed(2);\r\n                            }\r\n                        }\r\n                        self.roomId = data.roomid;\r\n                        self.seats = data.seats;\r\n                        self.seatIndex = self.getSeatIndexByID(self.playerInfo.playerId);\r\n                        console.log('返回登陆结果==================' + self.seatIndex);\r\n                        self.isOver = false;\r\n                        cc.find(\"Canvas/buttonCtrl\").getComponent(\"LobbyButtonClick\").QieHuanScene_normal(\"FlowerMain\");\r\n                    } else {\r\n                        console.log(data.errmsg);\r\n                    }\r\n                });\r\n\r\n                this.flowerSocket.on(\"exit_result\", function (data) {\r\n                    data = self.changeResultJSON_Function(data);\r\n                    self.roomId = null;\r\n                    self.turn = -1;\r\n                    self.seats = null;\r\n                    if (data) {\r\n                        //特殊情况下（锦标赛等）可以设置这里的data，在退出的时候进行操作\r\n                        self.actionData = data;\r\n                    }\r\n                });\r\n                this.flowerSocket.on(\"exit_notify_push\", function (data) {\r\n                    data = self.changeResultJSON_Function(data);\r\n                    var userId = data;\r\n                    var s = self.getSeatByID(userId);\r\n                    if (s != null) {\r\n                        s.userid = 0;\r\n                        s.name = \"\";\r\n                        self.flower.changedUserState(s);\r\n                    }\r\n                });\r\n                this.flowerSocket.on(\"count_down_push\", function (data) {\r\n                    data = self.changeResultJSON_Function(data);\r\n                    self.flower.gameCountDown(data);\r\n                });\r\n                this.flowerSocket.on(\"dispress_push\", function (data) {\r\n                    self.roomId = null;\r\n                    self.turn = -1;\r\n                    self.seats = null;\r\n                });\r\n\r\n\r\n                this.flowerSocket.on(\"new_user_comes_push\", function (data) {\r\n                    data = self.changeResultJSON_Function(data);\r\n                    var seatIndex = data.seatindex;\r\n                    if (self.seats[seatIndex].userid > 0) {\r\n                        self.seats[seatIndex].online = true;\r\n                    } else {\r\n                        data.online = true;\r\n                        self.seats[seatIndex] = JSON.parse(JSON.stringify(data));\r\n                        !!self.flower && self.flower.addUser(self.seats[seatIndex]);\r\n                    }\r\n\r\n                });\r\n                this.flowerSocket.on(\"game_checkPai_push\", function (data) {\r\n                    data = self.changeResultJSON_Function(data);\r\n                    self.flower.kanpai(data);\r\n                });\r\n                this.flowerSocket.on(\"game_losed_push\", function (data) {\r\n                    self.flower.qipaiResult();\r\n                });\r\n                this.flowerSocket.on(\"game_wannaToCompare_push\", function (data) {\r\n                    data = self.changeResultJSON_Function(data);\r\n                    self.flower.gameWannaToCompare(data);\r\n                });\r\n                //弃牌通知 game_userInlosed_push\r\n                this.flowerSocket.on(\"game_userInlosed_push\", function (data) {\r\n                    data = self.changeResultJSON_Function(data);\r\n                    self.flower.qiPaiNotify(data);\r\n                });\r\n                this.flowerSocket.on(\"game_myTurn_push\", function (data) {\r\n                    data = self.changeResultJSON_Function(data);\r\n                    self.flower.gameMyTurnPush(data);\r\n                });\r\n                this.flowerSocket.on(\"game_turnChanged_push\", function (data) {\r\n                    data = self.changeResultJSON_Function(data);\r\n                    self.flower.changedGameTurn(data);\r\n                });\r\n                this.flowerSocket.on(\"game_timerInitCounter_push\", function (data) {\r\n                    data = self.changeResultJSON_Function(data);\r\n                    self.flower.gameTimerInitCounter(data);\r\n                });\r\n                this.flowerSocket.on(\"guo_notify_push\", function (data) {\r\n                    data = self.changeResultJSON_Function(data);\r\n                    self.flower.guoNotify(data);\r\n                });\r\n                this.flowerSocket.on(\"game_myWin_push\", function (data) {\r\n                    //我赢了\r\n                    //self.flower.win(data);\r\n                });\r\n                this.flowerSocket.on(\"gameOver_notify_push\", function (data) {\r\n                    data = self.changeResultJSON_Function(data);\r\n                    //游戏结束清除定时器\r\n                    self.flower.gameOverNotify(data);\r\n                })\r\n                this.flowerSocket.on(\"game_oneInWin_push\", function (data) {\r\n                    data = self.changeResultJSON_Function(data);\r\n                    //赢了\r\n                    self.flower.win(data);\r\n                });\r\n                this.flowerSocket.on(\"game_begin_push\", function (data) {\r\n                    data = self.changeResultJSON_Function(data);\r\n                    self.button = data;\r\n                    self.turn = self.button;\r\n                    self.gamestate = \"begin\";\r\n                    self.flower.gameBegin({\r\n                        currentZhu: data.currentZhu,\r\n                        turn: data.turn\r\n                    });\r\n                });\r\n                //没钱了通知前端，让其退出\r\n                this.flowerSocket.on(\"game_noMoney_exit\", function (data) {\r\n                    data = self.changeResultJSON_Function(data);\r\n                    self.flower.noMoneyExit(data);\r\n                });\r\n                //总注通知\r\n                this.flowerSocket.on(\"game_moneyPool_push\", function (data) {\r\n                    data = self.changeResultJSON_Function(data);\r\n                    console.log('game_moneyPool_push', data);\r\n                    let a = data.commonInfo;\r\n                    for (var key in a) {\r\n                        a[key].money = (a[key].money * 0.01).toFixed(2);\r\n                    }\r\n                    self.flower.gameMoneyPool(data);\r\n                });\r\n                //跟注通知\r\n                this.flowerSocket.on(\"genZhu_notify_push\", function (data) {\r\n                    console.log('跟注通知：genZhu_notify_push');\r\n                    data = self.changeResultJSON_Function(data);\r\n                    console.log(data);\r\n                    self.flower.genZhuNotify(data);\r\n                });\r\n                //看牌通知 game_oneInCheckPai_push\r\n                this.flowerSocket.on(\"game_oneInCheckPai_push\", function (data) {\r\n                    console.log('game_oneInCheckPai_push');\r\n                    data = self.changeResultJSON_Function(data);\r\n                    console.log(data);\r\n                    self.flower.kanPaiNotify(data);\r\n                });\r\n                //加注通知 jiaZhu_notify_push\r\n                this.flowerSocket.on(\"jiaZhu_notify_push\", function (data) {\r\n                    console.log('jiaZhu_notify_push');\r\n                    data = self.changeResultJSON_Function(data);\r\n                    console.log(data);\r\n                    self.flower.jiaZhuNotify(data);\r\n                });\r\n                //提示消息通知\r\n                this.flowerSocket.on(\"message_notify_push\", function (data) {\r\n                    console.log('message_notify_push');\r\n                    data = self.changeResultJSON_Function(data);\r\n                    console.log(data);\r\n                    self.flower.messageNotify(data);\r\n                });\r\n                //轮数通知\r\n                this.flowerSocket.on(\"game_circleCount_push\", function (data) {\r\n                    console.log('game_circleCount_push');\r\n                    data = self.changeResultJSON_Function(data);\r\n                    console.log(data);\r\n                    self.flower.gameCircleCount(data);\r\n                });\r\n                //比牌结果通知 game_userInBipai_result_push\r\n                this.flowerSocket.on(\"game_userInBipai_result_push\", function (data) {\r\n                    console.log('game_userInBipai_result_push');\r\n                    data = self.changeResultJSON_Function(data);\r\n                    console.log(data);\r\n                    self.flower.gameUserInBiPaiResult(data);\r\n                });\r\n                this.flowerSocket.on(\"game_actionChanged_push\", function (data) {\r\n                    data = self.changeResultJSON_Function(data);\r\n                    self.flower.changedGameAction(data);\r\n                });\r\n                this.flowerSocket.on(\"game_AntiResults_push\", function (data) {\r\n                    data = self.changeResultJSON_Function(data);\r\n                    self.flower.gameAntiResults(data);\r\n                });\r\n                this.flowerSocket.on(\"game_userInfoById_push\", function (data) {\r\n                    data = self.changeResultJSON_Function(data);\r\n                    if (data) {\r\n                        self.flower.userInfoById(data);\r\n                    }\r\n                });\r\n                this.flowerSocket.on(\"game_gameInfoById_push\", function (data) {\r\n                    data = self.changeResultJSON_Function(data);\r\n                    if (data) {\r\n                        self.flower.gameInfoById(data);\r\n                    }\r\n                });\r\n                this.flowerSocket.on(\"game_sbInAllIn_push\", function (data) {\r\n                    data = self.changeResultJSON_Function(data);\r\n                    if (data) {\r\n                        self.flower.sbInAllIn(data);\r\n                    }\r\n                });\r\n\r\n\r\n                this.flowerSocket.on(\"noExit\", ret => {\r\n                    cc.find('Canvas/com_ingame_tips').active = true;\r\n                });\r\n\r\n                /**\r\n                 * 长连接断开监听\r\n                 */\r\n                this.flowerSocket.on(\"disconnect\", function (ret) {\r\n\r\n                    //console.log(\"aaaxxxxxxxxxxxx\");\r\n                    //console.log(self.flower);\r\n\r\n                    var actionData = self.actionData;\r\n                    self.flower.exitRoom();\r\n                    console.log(self.roomId);\r\n\r\n                    // if (self.roomId == null) {\r\n\r\n                    //     if (actionData) {\r\n                    //         if (actionData.msg) {\r\n                    //             //alert.show(\"提示\", actionData.msg);\r\n                    //         }\r\n                    //         setTimeout(function() {\r\n                    //             self.actionData = null;\r\n                    //             cc.audioEngine.stopAll();\r\n                    //             cc.director.loadScene(\"LobbyMain\");\r\n                    //         }, actionData.delay * 1000);\r\n                    //     } else {\r\n                    cc.audioEngine.stopAll();\r\n                    cc.director.loadScene(\"LobbyMain\");\r\n                    //    }\r\n                    //}\r\n\r\n                    if (!self.flower.gameExit) {\r\n                        self.flower.disconnectNetWork_Function();\r\n                    }\r\n                });\r\n            },\r\n\r\n            /**\r\n             * 传递this作用域\r\n             * @param {*} scene 来自LobbyMain.js\r\n             */\r\n            this.setLobbyMainObj_Function = function (scene) {\r\n                this.lobbyMain = scene;\r\n            },\r\n\r\n            /**\r\n             * 传递this作用域\r\n             * @param {*} scene 来自FlowerMain.js\r\n             */\r\n            this.setFlowerObj_Function = function (scene) {\r\n                this.flower = scene;\r\n            },\r\n\r\n            /**\r\n             * 解析JSON数据\r\n             * @param {*} ret \r\n             */\r\n            this.changeResultJSON_Function = function (ret) {\r\n                if (cc.sys.isNative) {\r\n                    return JSON.parse(ret);\r\n                }\r\n                return ret;\r\n            },\r\n            this.init();\r\n    }\r\n    return {\r\n        getInstant: new getInstant()\r\n    }\r\n})();\r\n\r\nmodule.exports = FlowerNetWork;"]}