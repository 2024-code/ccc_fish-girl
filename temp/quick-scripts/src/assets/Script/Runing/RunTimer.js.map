{"version":3,"sources":["assets\\Script\\Runing\\RunTimer.js"],"names":["cc","Class","Component","properties","count","num","onLoad","timing","cancelTimer","node","parent","getComponent","btnPlayerState","active","getChildByName","string","pInfo","soundEffectControl","audioEngine","play","baoJingAudio","startTimer","schedule","unschedule"],"mappings":";;;;;;AAAA;AACA;AACA;AACAA,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAGLC,EAAAA,UAAU,EAAE;AACRC,IAAAA,KAAK,EAAE,CADC;AAERC,IAAAA,GAAG,EAAE;AAFG,GAHP;AAOLC,EAAAA,MAAM,EAAE,kBAAW,CAAE,CAPhB;;AASL;AACJ;AACA;AACIC,EAAAA,MAAM,EAAE,kBAAW;AAEf,QAAG,KAAKF,GAAL,KAAa,KAAKD,KAArB,EACA;AACI,WAAKI,WAAL;;AACA,UAAG,KAAKC,IAAL,CAAUC,MAAV,CAAiBC,YAAjB,CAA8B,YAA9B,EAA4CC,cAA/C,EACA;AACI,aAAKH,IAAL,CAAUC,MAAV,CAAiBC,YAAjB,CAA8B,YAA9B,EAA4CC,cAA5C,CAA2DC,MAA3D,GAAoE,KAApE;AACH;;AACD,WAAKJ,IAAL,CAAUI,MAAV,GAAmB,KAAnB;AACH,KARD,MAUA;AACI,WAAKJ,IAAL,CAAUK,cAAV,CAAyB,OAAzB,EAAkCH,YAAlC,CAA+C,UAA/C,EAA2DI,MAA3D,GAAoE,KAAKV,GAAL,GAAW,KAAKD,KAApF,CADJ,CAGI;;AACA,UAAG,KAAKK,IAAL,CAAUK,cAAV,CAAyB,OAAzB,EAAkCH,YAAlC,CAA+C,UAA/C,EAA2DI,MAA3D,IAAqE,GAArE,IAA4E,KAAKN,IAAL,CAAUC,MAAV,CAAiBC,YAAjB,CAA8B,YAA9B,EAA4CK,KAA5C,CAAkDC,kBAAjI,EACA;AACIjB,QAAAA,EAAE,CAACkB,WAAH,CAAeC,IAAf,CAAoB,KAAKV,IAAL,CAAUC,MAAV,CAAiBC,YAAjB,CAA8B,YAA9B,EAA4CS,YAA5C,CAAyD,CAAzD,CAApB;AACH;;AACD,WAAKhB,KAAL;AAEH;AACJ,GAnCI;;AAqCL;AACJ;AACA;AACIiB,EAAAA,UAAU,EAAE,sBAAW;AACnB,SAAKZ,IAAL,CAAUK,cAAV,CAAyB,OAAzB,EAAkCH,YAAlC,CAA+C,UAA/C,EAA2DI,MAA3D,GAAoE,KAAKV,GAAL,GAAW,KAAKD,KAApF;AACA,SAAKA,KAAL;;AAEA,QAAG,KAAKC,GAAL,GAAW,CAAd,EACA;AACI,WAAKD,KAAL,GAAa,CAAb;;AACA,UAAG,KAAKK,IAAL,CAAUC,MAAV,CAAiBC,YAAjB,CAA8B,YAA9B,EAA4CC,cAA/C,EACA;AACI,aAAKH,IAAL,CAAUC,MAAV,CAAiBC,YAAjB,CAA8B,YAA9B,EAA4CC,cAA5C,CAA2DC,MAA3D,GAAoE,KAApE;AACH;;AACD,WAAKJ,IAAL,CAAUI,MAAV,GAAmB,KAAnB;AACH,KARD,MAUA;AACI,WAAKS,QAAL,CAAc,KAAKf,MAAnB,EAA2B,CAA3B,EAA8B,KAAKF,GAAL,GAAW,CAAzC;AACH;AACJ,GAzDI;;AA2DL;AACJ;AACA;AACIG,EAAAA,WAAW,EAAE,uBAAW;AACpB,SAAKe,UAAL,CAAgB,KAAKhB,MAArB;AACH;AAhEI,CAAT","sourceRoot":"/","sourcesContent":["/**\r\n * 跑得快定时器\r\n */\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        count: 0,\r\n        num: 0\r\n    },\r\n    onLoad: function() {},\r\n\r\n    /**\r\n     * 定时器\r\n     */\r\n    timing: function() {\r\n\r\n        if(this.num === this.count)\r\n        {\r\n            this.cancelTimer();\r\n            if(this.node.parent.getComponent(\"RuningMain\").btnPlayerState)\r\n            {\r\n                this.node.parent.getComponent(\"RuningMain\").btnPlayerState.active = false;\r\n            }\r\n            this.node.active = false;\r\n        }\r\n        else\r\n        {\r\n            this.node.getChildByName(\"times\").getComponent(\"cc.Label\").string = this.num - this.count;\r\n\r\n            //还剩下5秒时，开始报警\r\n            if(this.node.getChildByName(\"times\").getComponent(\"cc.Label\").string == '5' && this.node.parent.getComponent(\"RuningMain\").pInfo.soundEffectControl)\r\n            {\r\n                cc.audioEngine.play(this.node.parent.getComponent(\"RuningMain\").baoJingAudio[2]);\r\n            }\r\n            this.count++;\r\n\r\n        }\r\n    },\r\n\r\n    /**\r\n     * 开始定时\r\n     */\r\n    startTimer: function() {\r\n        this.node.getChildByName(\"times\").getComponent(\"cc.Label\").string = this.num - this.count;\r\n        this.count++;\r\n\r\n        if(this.num < 1)\r\n        {\r\n            this.count = 0;\r\n            if(this.node.parent.getComponent(\"RuningMain\").btnPlayerState)\r\n            {\r\n                this.node.parent.getComponent(\"RuningMain\").btnPlayerState.active = false;\r\n            }\r\n            this.node.active = false;\r\n        }\r\n        else\r\n        {\r\n            this.schedule(this.timing, 1, this.num - 1);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * 取消定时器\r\n     */\r\n    cancelTimer: function() {\r\n        this.unschedule(this.timing);\r\n    }\r\n});\r\n"]}