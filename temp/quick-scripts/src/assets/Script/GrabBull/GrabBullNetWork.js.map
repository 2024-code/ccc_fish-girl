{"version":3,"sources":["assets\\Script\\GrabBull\\GrabBullNetWork.js"],"names":["GrabBullNetWork","getInstant","_instance","undefined","Single","lobbyMain","grabBull","grabBullSocket","playerInfo","tableId","seatId","playerHead","tax","addScore","eventOn","init","require","loginGame_Function","loginIP","port","userid","sign","console","log","self","socket","cc","sys","isNative","SocketIO","connect","connectServer_Function","on","isBrowser","close","gameDisconnect","contentGameServerFail_Function","ret","emit","gametype","error","result","changeResultJSON_Function","resultid","playerCoin","Obj","score","getComponent","netWork","disconnect","roomid","loginRoom_Function","loadGameScene","showMessagebox_Function","msg","ResultCode","bg_Black","active","ResultData","TableId","addscore","gameName","audioEngine","stopAll","find","QieHuanScene_normal","setGrabBullSocketOn_Function","gameStart_Function","sendCard_Function","checkBanker_Function","setXbetBankerLabel_Function","setXBetPlayerLabel_Function","reissueCard_Function","Result","showBullPoint_Function","data","cowPoint","card","billing_Function","playerEnterRoom_Function","playerLeaveRoom_Function","PlayerSeatId","userId","firstTimeEntryInit_Function","ResuleCode","playerMessageInit_Function","tableList","noMoneyOut_Function","gameExit","disconnectNetWork_Function","exitGame_Function","vipTap","showVipBool","showVipIndexList","i","card_list","seatIndex","changeSeatId_Function","push","j","cardArray","open_Function","com_Button","getChildByName","setLobbyMainObj_Function","scene","setGrabBullObj_Function","JSON","parse","module","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["/**\r\n * 抢庄牛牛SOCKET通讯\r\n */\r\nvar GrabBullNetWork = (function () {\r\n    /**\r\n     * 单例模式\r\n     */\r\n    function getInstant() {\r\n        var _instance;\r\n        if (_instance === undefined) {\r\n            _instance = new Single();\r\n        }\r\n        return _instance;\r\n    }\r\n    /**\r\n     * 逻辑层\r\n     */\r\n    function Single() {\r\n        this.lobbyMain = null;\r\n        this.grabBull = null;\r\n        this.grabBullSocket = null;\r\n        this.playerInfo = null;\r\n        this.tableId = -1;\r\n        this.seatId = -1;\r\n        this.playerHead = null;\r\n        this.tax = -1;\r\n        this.addScore = 0;\r\n        this.eventOn = false;\r\n\r\n        /**\r\n         * 初始化\r\n         */\r\n        this.init = function () {\r\n                this.playerInfo = require(\"PlayerInfo\").getInstant;\r\n            },\r\n\r\n            /**\r\n             * 进入游戏\r\n             * @param {*} loginIP \r\n             * @param {*} port \r\n             * @param {*} userid \r\n             * @param {*} sign \r\n             */\r\n            this.loginGame_Function = function (loginIP, port, userid, sign) {\r\n                console.log('loginIP:', loginIP);\r\n                console.log('port:', port);\r\n                console.log('userid:', userid);\r\n                console.log('sign:', sign);\r\n                var self = this;\r\n                var socket = null;\r\n                if (cc.sys.isNative) {\r\n                    self.grabBullSocket = SocketIO.connect(loginIP + \":\" + port);\r\n                } else {\r\n                    socket = require(\"socket-io\");\r\n                    self.grabBullSocket = socket(loginIP + \":\" + port);\r\n                }\r\n                //用户连接游戏服务器\r\n                this.connectServer_Function(userid, sign);\r\n                //连接失败\r\n                this.grabBullSocket.on(\"error\", function () {\r\n                        cc.sys.isBrowser && self.grabBullSocket.close();\r\n                        self.grabBullSocket = null;\r\n                        self.playerInfo.gameDisconnect || self.lobbyMain.contentGameServerFail_Function(\"GrabBull\");\r\n                    }),\r\n                    //连接失败\r\n                    this.grabBullSocket.on(\"connect_error\", function () {\r\n                        cc.sys.isBrowser && self.grabBullSocket.close();\r\n                        self.grabBullSocket = null;\r\n                        self.playerInfo.gameDisconnect || self.lobbyMain.contentGameServerFail_Function(\"GrabBull\");\r\n                    });\r\n                //连接超时\r\n                this.grabBullSocket.on(\"connect_timeout\", function () {\r\n                    cc.sys.isBrowser && self.grabBullSocket.close();\r\n                    self.grabBullSocket = null;\r\n                    self.playerInfo.gameDisconnect || self.lobbyMain.contentGameServerFail_Function(\"GrabBull\");\r\n                });\r\n                //连接\r\n                this.grabBullSocket.on(\"connected\", function (ret) {\r\n                    if (ret) {\r\n                        try {\r\n                            //进入游戏\r\n                            self.grabBullSocket.emit(\"LoginGame\", {\r\n                                userid: userid, //用户ID\r\n                                gametype: 4, //游戏类型\r\n                                sign: sign //签名\r\n                            });\r\n                        } catch (error) {}\r\n                    }\r\n                });\r\n            };\r\n\r\n        /**\r\n         * 连接抢庄牛牛服务器\r\n         * @param {*} userid \r\n         * @param {*} sign \r\n         */\r\n        this.connectServer_Function = function (userid, sign) {\r\n            var self = this;\r\n\r\n            this.grabBullSocket && this.grabBullSocket.on(\"loginGameResult\", function (ret) {\r\n                /*游戏登录接口(LoginGame)的回调\r\n                    ret=\r\n                    {\r\n                        resultid: 1,    登录成功为 1\r\n                        msg: \"login 抢庄牛牛 succeed!\",\r\n                        Obj: {account: \"账号\", id: xxx, nickname: \"用户名\", score: 金币}\r\n                    }\r\n                */\r\n                var result = self.changeResultJSON_Function(ret);\r\n                if (result.resultid) { //游戏登录成功\r\n                    self.playerInfo.playerCoin = result.Obj.score;\r\n                    self.lobbyMain.getComponent(\"LobbyMain\").netWork.socket.disconnect();\r\n                    self.grabBullSocket.emit(\"LoginRoom\", { //登录游戏房间接口 roomid传 1 就好\r\n                        roomid: 1\r\n                    });\r\n                    self.loginRoom_Function();\r\n                } else {\r\n                    //游戏登录失败\r\n                    self.lobbyMain.getComponent(\"LobbyMain\").loadGameScene = false;\r\n                    self.lobbyMain.getComponent(\"LobbyMain\").showMessagebox_Function(result.msg, 1, 4);\r\n                    self.eventOn = true;\r\n                }\r\n            });\r\n        };\r\n\r\n        /**\r\n         * 进入房间\r\n         */\r\n        this.loginRoom_Function = function () {\r\n            var self = this;\r\n            //返回房间数据\r\n            this.grabBullSocket.on(\"LoginRoomResult\", function (ret) {\r\n                console.log('LoginRoomResult:', ret);\r\n                var result = self.changeResultJSON_Function(ret);\r\n                if (result.ResultCode) {\r\n                    self.lobbyMain.bg_Black.active = true;\r\n                    self.tableId = result.ResultData.TableId;\r\n                    self.seatId = result.ResultData.seatId;\r\n                    self.tax = result.ResultData.tax;\r\n                    self.addScore = result.ResultData.addscore;\r\n                    self.playerInfo.gameDisconnect = false;\r\n                    self.playerInfo.gameName = \"GrabBull\";\r\n                    cc.audioEngine.stopAll();\r\n                    cc.find(\"Canvas/buttonCtrl\").getComponent(\"LobbyButtonClick\").QieHuanScene_normal(\"GrabBullMain\");\r\n                }\r\n            });\r\n        };\r\n\r\n        /**\r\n         * 抢庄牛牛长连通讯\r\n         */\r\n        this.setGrabBullSocketOn_Function = function () {\r\n                var self = this;\r\n\r\n                /**\r\n                 * 游戏开始\r\n                 */\r\n                this.grabBullSocket.on(\"readyPlay\", function (ret) {\r\n                    var result = self.changeResultJSON_Function(ret);\r\n                    self.grabBull.gameStart_Function(result);\r\n                });\r\n\r\n                /**\r\n                 * 开始发牌\r\n                 */\r\n                this.grabBullSocket.on(\"sendCard\", function (ret) {\r\n                    var result = self.changeResultJSON_Function(ret);\r\n                    self.grabBull.sendCard_Function(result);\r\n                });\r\n\r\n                /**\r\n                 * 抢庄倍数\r\n                 */\r\n                this.grabBullSocket.on(\"selectBet\", function (ret) {\r\n                    var result = self.changeResultJSON_Function(ret);\r\n                    self.grabBull.checkBanker_Function(result)\r\n                });\r\n\r\n                /**\r\n                 * 抢庄回调 这段无用\r\n                 */\r\n                this.grabBullSocket.on(\"callResult\", function (ret) {\r\n                    var result = self.changeResultJSON_Function(ret);\r\n                });\r\n\r\n                /**\r\n                 * 抢庄倍数回调\r\n                 */\r\n                this.grabBullSocket.on(\"callValueId\", function (ret) {\r\n                    var result = self.changeResultJSON_Function(ret);\r\n                    self.grabBull.setXbetBankerLabel_Function(result);\r\n                });\r\n\r\n                /**\r\n                 * 无用\r\n                 */\r\n                this.grabBullSocket.on(\"reCallResult\", function (ret) {\r\n                    var result = self.changeResultJSON_Function(ret);\r\n                });\r\n\r\n                /**\r\n                 * 下注回调\r\n                 */\r\n                this.grabBullSocket.on(\"reCallValueId\", function (ret) {\r\n                    var result = self.changeResultJSON_Function(ret);\r\n                    self.grabBull.setXBetPlayerLabel_Function(result);\r\n                });\r\n\r\n                /**\r\n                 * 补牌\r\n                 */\r\n                this.grabBullSocket.on(\"couCow\", function (ret) {\r\n                    var result = self.changeResultJSON_Function(ret);\r\n                    self.grabBull.reissueCard_Function(result);\r\n                });\r\n\r\n                /**\r\n                 * 明牌\r\n                 */\r\n                this.grabBullSocket.on(\"showResult\", function (ret) {\r\n                    console.log('showResult:', ret);\r\n                    var result = self.changeResultJSON_Function(ret);\r\n                    switch (result.Result) {\r\n                        case 0:\r\n                            self.grabBull.showBullPoint_Function(result.data.cowPoint, result.data.seatId, result.data.card);\r\n                            break;\r\n                    }\r\n                });\r\n\r\n                /**\r\n                 * 本局金币结算回调,输了为负数\r\n                 */\r\n                this.grabBullSocket.on(\"open\", function (ret) {\r\n                    var result = self.changeResultJSON_Function(ret);\r\n                    self.grabBull.billing_Function(result);\r\n                });\r\n\r\n                /**\r\n                 * 玩家进来的数据\r\n                 */\r\n                this.grabBullSocket.on(\"playEnter\", function (ret) {\r\n                    var result = self.changeResultJSON_Function(ret);\r\n                    result.ResultCode && self.grabBull.playerEnterRoom_Function(result.ResultData);\r\n                });\r\n\r\n                /**\r\n                 * 离开的玩家数据\r\n                 */\r\n                this.grabBullSocket.on(\"PlayerOut\", function (ret) {\r\n                    var result = self.changeResultJSON_Function(ret);\r\n                    result && self.grabBull.playerLeaveRoom_Function(result.PlayerSeatId, result.userId);\r\n                });\r\n\r\n                /**\r\n                 * 桌子状态信息\r\n                 */\r\n                this.grabBullSocket.on(\"getDownTimeResult\", function (ret) {\r\n                    var result = self.changeResultJSON_Function(ret);\r\n                    result.ResultCode || self.grabBull.firstTimeEntryInit_Function(result);\r\n                });\r\n\r\n                /**\r\n                 * 当前桌子所有玩家信息\r\n                 */\r\n                this.grabBullSocket.on(\"getTableListResult\", function (ret) {\r\n                    var result = self.changeResultJSON_Function(ret);\r\n                    result.ResuleCode || self.grabBull.playerMessageInit_Function(result.data.tableList);\r\n                });\r\n\r\n                /**\r\n                 * 金币不足,踢出房间\r\n                 */\r\n                this.grabBullSocket.on(\"notEnouhtScore\", function () {\r\n                    self.grabBull.noMoneyOut_Function();\r\n                });\r\n\r\n                /**\r\n                 * 长连接断开监听\r\n                 */\r\n                this.grabBullSocket.on(\"disconnect\", function (ret) {\r\n                    if (!self.grabBull.gameExit) {\r\n                        self.grabBull.disconnectNetWork_Function();\r\n                    }\r\n                });\r\n\r\n\r\n\r\n                this.grabBullSocket.on(\"noExit\", ret => {\r\n                    ret = self.changeResultJSON_Function(ret);\r\n                    if (!!ret) {\r\n                        cc.find('Canvas/com_ingame_tips').active = true;\r\n                    } else {\r\n                        self.grabBull.gameExit = true;\r\n                        self.grabBull.exitGame_Function();\r\n                    }\r\n                });\r\n\r\n                //vip特权\r\n                this.grabBullSocket.on(\"vipGetCardResult\", function (ret) {\r\n                    let result = self.changeResultJSON_Function(ret);\r\n                    if (!!result && !!self.vipTap) {\r\n                        self.showVipBool = true;\r\n                        self.showVipIndexList = [];\r\n                        for (let i in result.card_list) {\r\n                            let seatIndex = self.grabBull.changeSeatId_Function(result.card_list[i].seatId);\r\n                            self.showVipIndexList.push(seatIndex);\r\n                            for (var j = 0; j < 5; j++) {\r\n                                self.grabBull.cardArray[j + 5 * seatIndex].getComponent(\"GrabBullCard\").open_Function(result.card_list[i].card[j]);\r\n                            }\r\n                        }\r\n                    }\r\n                })\r\n\r\n                this.grabBullSocket.on(\"CanExit\", ret => {\r\n                    ret = self.changeResultJSON_Function(ret);\r\n                    console.log('canExit', ret.result);\r\n                    self.grabBull.com_Button.getChildByName(\"bt_Exit\").active = ret.result;\r\n                    // cc.find('Canvas/com_exit_tips').active = ret.result;\r\n                });\r\n            },\r\n\r\n            /**\r\n             * 传递this作用域\r\n             * @param {*} scene 来自LobbyMain.js\r\n             */\r\n            this.setLobbyMainObj_Function = function (scene) {\r\n                this.lobbyMain = scene;\r\n            },\r\n\r\n            /**\r\n             * 传递this作用域\r\n             * @param {*} scene 来自GrabBullMain.js\r\n             */\r\n            this.setGrabBullObj_Function = function (scene) {\r\n                this.grabBull = scene;\r\n            },\r\n\r\n            /**\r\n             * 解析JSON数据\r\n             * @param {*} ret \r\n             */\r\n            this.changeResultJSON_Function = function (ret) {\r\n                if (cc.sys.isNative) {\r\n                    return JSON.parse(ret);\r\n                }\r\n                return ret;\r\n            },\r\n            this.init();\r\n    }\r\n    return {\r\n        getInstant: new getInstant()\r\n    }\r\n})();\r\n\r\nmodule.exports = GrabBullNetWork;"]}