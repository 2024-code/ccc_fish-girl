{"version":3,"sources":["assets\\Script\\Fish_haiwang2\\Fishhaiwang2Main.js"],"names":["cc","Class","Component","properties","bg_anim","Node","effect_frozen","effect_lockFish","lab_lockFish","Label","bg_picList","seat_node","seat_noPlayer_node","touchLayer","bulletPb","Prefab","bulletBg","netBg","netPb","fishBg","fishPb","coinPb","diamondPb","label_pb","musicToggle","Toggle","soundToggle","onLoad","window","fish_ins","FishPool","NodePool","left_stat","bulletId","allowBullet","isAutoShot","isLockFish","bulletPower","targetFish","bigFishType","sys","isNative","view","setOrientation","macro","ORIENTATION_LANDSCAPE","collisionMgr","director","getCollisionManager","enabled","fishNet","require","getInstant","setFishObj_Funtion","pInfo","setGameObj_Function","disconnected","roomBet","playerList","cannonList","pos","v2","on","e","getLocation","schedule","shoot","REPEAT_FOREVER","isSwitchTarget","children","child","fishType","getComponent","x","y","getBoundingBoxToWorld","contains","console","log","unschedule","bulletPool","i","pb","instantiate","put","netPool","set_left_view","power_list","skillMaxTime","skillTime","skillCost","skillCD","skillMaxCD","find","string","Helper","fixNum","start_","userList","usr","seatId","name","nickname","score","diamond","uid","userId","head","headimgurl","playBGM","checkSeatShow","checkSelf","isChecked","musicControl","soundEffectControl","fishNode","getBigFish","isValid","getPosition","playerUid","playerId","playEffect","fishSocket","emit","JSON","stringify","userid","bet","position","getNextBulletID","shoot_r","bid","getSeatByUser","bang","setPlayerEnter","UserId","error","setPlayerExit","active","pinfo","getChildByName","runAction","sequence","delayTime","hide","getBullet","size","get","getNet","openAlert","node","loadScene","switch_left","instance","left","right","stopAllActions","t","tween","to","start","call","createFish","info","type","paths","pathArr","path_list","fishPath","offsetX","offsetY","listX","listY","fishLineup","fishCount","setTimeout","fish","parent","zIndex","pathIndex","fishInfo","fishId","offset","executeMove","Math","floor","width","height","getFishById","fid","checkFishId","onFishHit","target","fishes","targetSeat","fishidlist","chlid","push","fishIdList","isSelf","addCoinAnime","hitSocre","destroy","onBoomFishHit","key","fishList","isAddScore","check_pan","coinbg","coinpb","coinnum","parseInt","ceil","coin","moveBy","moveTo","removeSelf","s","random","label","opacity","t1","s1","t2","spawn","fadeIn","fadeOut","callFunc","addscore","bullet_change","num","index","indexOf","length","changePower","betLbl","cast_skill","sid","playerCoin","getBigFishId","cast_skill_r","pauseAllActions","update","dt","ProgressBar","progress","resumeAllActions","scale","bigfishNode","setAutoShot","isAuto","setMusic","audioEngine","stopAll","writeUserSettingDate_Function","setSound","data","writeData_Function"],"mappings":"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","sourceRoot":"/","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        bg_anim: cc.Node, //海水特效\r\n        effect_frozen: cc.Node, //海水特效\r\n        effect_lockFish: cc.Node,   //锁定效果\r\n        lab_lockFish: cc.Label,//锁定文字\r\n        bg_picList: [cc.Node], //背景列表\r\n        seat_node: [cc.Node], //座位列表\r\n        seat_noPlayer_node: [cc.Node], //没座位列表\r\n        touchLayer: cc.Node, //点击层\r\n        bulletPb: cc.Prefab, //子弹pb\r\n        bulletBg: cc.Node, //子弹层\r\n        netBg: cc.Node, // 网层\r\n        netPb: cc.Prefab, // 网pb\r\n        fishBg: cc.Node, //鱼层\r\n        fishPb: [cc.Prefab],\r\n        //\r\n        //heartBeat: 0,\r\n        coinPb: [cc.Prefab],\r\n        diamondPb: cc.Prefab,\r\n        label_pb: cc.Prefab,\r\n        musicToggle: cc.Toggle,\r\n        soundToggle: cc.Toggle,\r\n    },\r\n\r\n    onLoad() {\r\n        //是否允许开炮\r\n        // var t;\r\n        // for (this.fishW = [62.4, 80, 73.2, 74, 62.4, 72, 117.6, 112.8, 100, 120, 225, 180, 180, 235.2, 237.6, 160, 160, 160, 160, 160, 160, 350, 350, 350, 350, 350, 350], this.labelPosition = new Array(this.maxPlayer), t = 0; t < this.labelPosition.length; ++t) this.labelPosition[t] = cc.p(0, 0);\r\n        //         cc.p(0, 0);\r\n\r\n        window.fish_ins = this;\r\n        this.FishPool = new cc.NodePool(\"Fishhaiwang2\");\r\n        this.left_stat = 0;\r\n        this.bulletId = 0;\r\n        this.allowBullet = true;\r\n        this.isAutoShot = false;\r\n        this.isLockFish = false;\r\n\r\n        this.bulletPower = 1;\r\n        this.targetFish = null;\r\n        this.bigFishType = 15;\r\n\r\n        //屏幕适配\r\n        if (cc.sys.isNative) {\r\n            cc.view.setOrientation(cc.macro.ORIENTATION_LANDSCAPE);\r\n        }\r\n\r\n        //碰撞管理器\r\n        this.collisionMgr = cc.director.getCollisionManager();\r\n        this.collisionMgr.enabled = true;\r\n        // this.collisionMgr.enabledDebugDraw = true;\r\n        // this.collisionMgr.enabledDrawBoundingBox = true;\r\n\r\n        //获取组件\r\n        this.fishNet = require(\"./Fishhaiwang2NetWork\").getInstant;\r\n        this.fishNet.setFishObj_Funtion(this);\r\n        this.pInfo = require(\"PlayerInfo\").getInstant;\r\n        this.pInfo.setGameObj_Function(this);\r\n        this.fishNet.disconnected = false;\r\n        //获取房间倍率\r\n        this.roomBet = this.fishNet.roomBet;\r\n        //房间玩家信息\r\n        this.playerList = [null, null, null, null];\r\n\r\n        //炮对象 在BUlletCtrl中赋值\r\n        this.cannonList = [];\r\n\r\n        //注册点击事件\r\n        this.pos = cc.v2(667, 375);\r\n        this.touchLayer.on(\"touchstart\", e => {\r\n            if (this.isLockFish) return;\r\n            this.pos = e.getLocation();\r\n            this.schedule(this.shoot, 0.2, cc.macro.REPEAT_FOREVER, 0.01);\r\n        })\r\n\r\n        this.touchLayer.on(\"touchmove\", e => {\r\n            this.pos = e.getLocation();\r\n        })\r\n\r\n        this.touchLayer.on(\"touchend\", e => {\r\n            if (this.isLockFish) {\r\n                let isSwitchTarget = false;\r\n                for (const child of this.fishBg.children) {\r\n                    let fishType = child.getComponent(\"Fishhaiwang2\").fishType;\r\n                    if (child.x < -667 || child.x > 667 || child.y < -375 || child.y > 375 || fishType < this.bigFishType) {\r\n                        continue;\r\n                    }\r\n                    if (child.getBoundingBoxToWorld().contains(e.getLocation()) && child != this.targetFish) {\r\n                        this.targetFish = child;\r\n                        isSwitchTarget = true;\r\n                        console.log(\"点击锁定鱼\", child);\r\n                    }\r\n                }\r\n                if (!isSwitchTarget) {\r\n                    this.shoot();\r\n                }\r\n            } else {\r\n                if (this.isAutoShot) {\r\n                    this.schedule(this.shoot, 0.3, cc.macro.REPEAT_FOREVER, 0.01);\r\n                } else {\r\n                    this.unschedule(this.shoot);\r\n                }\r\n            }\r\n        })\r\n\r\n        this.touchLayer.on(\"touchcancel\", e => {\r\n            if (this.isLockFish) return;\r\n            if (this.isAutoShot) {\r\n                this.schedule(this.shoot, 0.3, cc.macro.REPEAT_FOREVER, 0.01);\r\n            } else {\r\n                this.unschedule(this.shoot);\r\n            }\r\n        })\r\n\r\n        //生成子弹池\r\n        this.bulletPool = new cc.NodePool();\r\n        for (let i = 0; i < 50; i++) {\r\n            let pb = cc.instantiate(this.bulletPb);\r\n            this.bulletPool.put(pb);\r\n        }\r\n\r\n        //生成网池\r\n        this.netPool = new cc.NodePool();\r\n        for (let i = 0; i < 20; i++) {\r\n            let pb = cc.instantiate(this.netPb);\r\n            this.netPool.put(pb);\r\n        }\r\n        this.set_left_view(true);\r\n\r\n        if (this.roomBet == 1) {\r\n            this.power_list = [1, 2, 3, 4, 5];\r\n        } else if (this.roomBet == 10) {\r\n            this.power_list = [1, 2, 3, 4, 5];\r\n        } else if (this.roomBet == 100) {\r\n            this.power_list = [1, 2, 3, 4, 5];\r\n        } else if (this.roomBet == 1000) {\r\n            this.power_list = [1, 2, 3, 4, 5];\r\n        }\r\n        this.skillMaxTime = [5 * 60, 100000 * 60];\r\n        this.skillTime = [0, 0];\r\n        this.skillCost = [10 * this.roomBet, 20 * this.roomBet];\r\n        this.skillCD = [0, 0];\r\n        this.skillMaxCD = [10 * 60, 100000 * 60];\r\n        cc.find('Canvas/UI/right/右侧导航栏/s1/shuzi').getComponent(cc.Label).string = Helper.fixNum(this.skillCost[0]);\r\n        cc.find('Canvas/UI/right/右侧导航栏/s2/shuzi').getComponent(cc.Label).string = Helper.fixNum(this.skillCost[1]);\r\n    },\r\n\r\n    start_() {\r\n        for (let i in this.fishNet.userList) {\r\n            let usr = this.fishNet.userList[i];\r\n            this.playerList[usr.seatId] = {\r\n                name: usr.nickname,\r\n                score: usr.score,\r\n                diamond: usr.diamond,\r\n                uid: usr.userId,\r\n                head: usr.headimgurl,\r\n            }\r\n        }\r\n        playBGM('bg_0');\r\n        this.checkSeatShow();\r\n        this.checkSelf();\r\n        this.musicToggle.isChecked = this.pInfo.musicControl;\r\n        this.soundToggle.isChecked = this.pInfo.soundEffectControl;\r\n    },\r\n\r\n    /**\r\n     * 射击\r\n     */\r\n    shoot() {\r\n        this.isLockFish\r\n        // if (this.isAiming())\r\n        if (this.isLockFish)\r\n        // if(this.isLockFish)\r\n        {\r\n            var fishNode = this.getBigFish();\r\n            if (!cc.isValid(fishNode)) {\r\n                this.pos = cc.v2(667, 375);\r\n            } else {\r\n\r\n                this.pos = fishNode.getPosition();\r\n                this.pos.x += 667;\r\n                this.pos.y += 375;\r\n            }\r\n        } else {\r\n            if (this.fishNet.seatId > 1 && this.pos.y > 700 || this.fishNet.seatId <= 1 && this.pos.y < 50) {\r\n                // console.log('touch outsider!');\r\n                return;\r\n            }\r\n        }\r\n\r\n        let playerUid = this.playerList[this.fishNet.seatId].uid;\r\n        if (playerUid == this.pInfo.playerId) {\r\n\r\n            playEffect('shot');\r\n            this.fishNet.fishSocket && this.fishNet.fishSocket.emit('fishShoot', JSON.stringify({\r\n                userid: playerUid,\r\n                bet: this.bulletPower,\r\n                position: this.pos,\r\n                bulletId: this.getNextBulletID(),\r\n            }));\r\n        }\r\n    },\r\n\r\n    shoot_r(userid, pos, bet, bid) {\r\n        // console.log(\"SHOOT :\"+pos.x+\"-\"+pos.y);\r\n        // var node = cc.find(\"Canvas/GameNode/aurabg/aura\");\r\n        // console.log(\"aura :\"+node.position.x+\"-\"+node.position.y);\r\n\r\n        var seatId = this.getSeatByUser(userid);\r\n        if (seatId < 0) return;\r\n        if (this.allowBullet) {\r\n            this.cannonList[seatId].bang(pos, bet, bid);\r\n        }\r\n    },\r\n\r\n    getSeatByUser(userid) {\r\n        for (var i in this.playerList) {\r\n            if (this.playerList[i] == null) continue;\r\n            if (this.playerList[i].uid == userid) {\r\n                return i;\r\n            }\r\n        }\r\n        return -1;\r\n    },\r\n\r\n    /**\r\n     * 其它玩家进入房间\r\n     * @param {用户id} UserId \r\n     * @param {座位id} seatId \r\n     * @param {用户名} nickname \r\n     * @param {用户分数} score \r\n     */\r\n    setPlayerEnter(UserId, seatId, nickname, score, head, diamond) {\r\n        if (!this.playerList[seatId]) {\r\n            this.playerList[seatId] = {\r\n                name: nickname,\r\n                score: score,\r\n                diamond: diamond,\r\n                uid: UserId,\r\n                head: head,\r\n            }\r\n            playEffect('sit_down');\r\n            this.checkSeatShow();\r\n        } else {\r\n            console.error('位置已占-不能进入座位-请检查');\r\n        }\r\n    },\r\n\r\n    /**\r\n     * 其它玩家离开房间操作\r\n     * @param {座位id} seatId \r\n     */\r\n    setPlayerExit(seatId) {\r\n        this.playerList[seatId] = null;\r\n        this.checkSeatShow();\r\n    },\r\n\r\n    /**\r\n     * 控制座位的显隐\r\n     */\r\n    checkSeatShow() {\r\n        for (let i in this.playerList) {\r\n            this.seat_noPlayer_node[i].active = !this.playerList[i];\r\n            this.seat_node[i].active = !this.seat_noPlayer_node[i].active;\r\n        }\r\n    },\r\n\r\n    checkSelf() {\r\n        var pinfo = require('PlayerInfo').getInstant;\r\n        for (var i in this.playerList) {\r\n            if (this.playerList[i] && this.playerList[i].uid == pinfo.playerId) {\r\n                this.seat_node[i].getChildByName('your_position').active = true;\r\n                this.seat_node[i].getChildByName('your_position').runAction(cc.sequence(cc.delayTime(5), cc.hide()));\r\n                break;\r\n            }\r\n        }\r\n    },\r\n\r\n    /**\r\n     * 获取子弹池中的子弹\r\n     */\r\n    getBullet() {\r\n        if (this.bulletPool.size() <= 0) {\r\n            let pb = cc.instantiate(this.bulletPb);\r\n            this.bulletPool.put(pb);\r\n        }\r\n        return this.bulletPool.get();\r\n    },\r\n\r\n    /**\r\n     * 获取渔网池中的渔网\r\n     */\r\n    getNet() {\r\n        if (this.netPool.size() <= 0) {\r\n            let pb = cc.instantiate(this.netPb);\r\n            this.netPool.put(pb);\r\n        }\r\n        return this.netPool.get();\r\n    },\r\n    getNextBulletID() {\r\n        if (this.bulletId >= 1e4)\r\n            this.bulletId = 0;\r\n        else\r\n            this.bulletId++;\r\n\r\n        return this.bulletId;\r\n    },\r\n    openAlert() {\r\n        this.node && (this.node.getChildByName('messageboxbg').active = true);\r\n        cc.director.loadScene(\"LobbyMain\");\r\n    },\r\n    //打开菜单栏\r\n    switch_left() {\r\n        if (this.left_stat == 0) {\r\n            this.left_stat = 1;\r\n        } else {\r\n            this.left_stat = 0;\r\n        }\r\n        this.set_left_view();\r\n    },\r\n    set_left_view(instance) {\r\n        let left = this.node.getChildByName('UI').getChildByName('left');\r\n        let right = this.node.getChildByName('UI').getChildByName('right');\r\n        left.stopAllActions();\r\n        right.stopAllActions();\r\n        let t = 0.2;\r\n        if (instance) t = 0;\r\n        if (this.left_stat == 1) {\r\n            cc.find('Canvas/UI/left/左侧导航栏').active = true;\r\n            cc.tween(left)\r\n                .to(t, { position: cc.v2(-667, 0) })\r\n                .start();\r\n            cc.find('Canvas/UI/right/右侧导航栏').active = true;\r\n            cc.tween(right)\r\n                .to(t, { position: cc.v2(640, 0) })\r\n                .start();\r\n        } else {\r\n            cc.tween(left)\r\n                .to(t, { position: cc.v2(-790, 0) })\r\n                .call(() => {\r\n                    cc.find('Canvas/UI/left/左侧导航栏').active = false;\r\n                }).start();\r\n            cc.tween(right)\r\n                .to(t, { position: cc.v2(760, 0) })\r\n                .call(() => {\r\n                    cc.find('Canvas/UI/right/右侧导航栏').active = false;\r\n                }).start();\r\n        }\r\n    },\r\n\r\n    createFish(info) {\r\n        //{\"fishId\":[2324,2325,2326],\r\n        //\"fishType\":11,\"fishPath\":7,\"fishCount\":3,\r\n        //\"fishLineup\":1,\"lineup\":false,\"propCount\":0}\r\n        let type = info.fishType;\r\n        let paths = this.node.getComponent(\"Fishhaiwang2Path\");\r\n        let pathArr = paths.path_list[info.fishPath];\r\n\r\n        let offsetX = 0;\r\n        let offsetY = 0;\r\n        let listX = 1;\r\n        let listY = 1;\r\n\r\n        //console.log(\"出鱼: 鱼类型-\", type, \" 鱼的排列-\", info.fishLineup, \" 鱼的数量-\", info.fishCount);\r\n\r\n        switch (info.fishLineup) {\r\n            case 0:\r\n                break;\r\n            case 1:\r\n                //并排\r\n                listX = 1;\r\n                listY = info.fishCount;\r\n                break;\r\n            case 2:\r\n                //正方形 4只\r\n                listX = 2;\r\n                listY = 2;\r\n                break;\r\n            case 3:\r\n                //5星 5只\r\n                listX = 1;\r\n                listY = info.fishCount;\r\n                break;\r\n            case 4:\r\n                //长方形 6只\r\n                listX = 2;\r\n                listY = 3;\r\n                break;\r\n        }\r\n\r\n        if (info.fishLineup == 0) {\r\n            for (let i = 0; i < info.fishCount; i++) {\r\n                setTimeout(() => {\r\n                    if (this.fishPb) {\r\n                        let fish = cc.instantiate(this.fishPb[type]);\r\n\r\n                        fish.parent = this.fishBg;\r\n                        fish.zIndex = info.fishType;\r\n\r\n                        fish.getComponent(\"Fishhaiwang2\").pathArr = pathArr;\r\n                        fish.getComponent(\"Fishhaiwang2\").pathIndex = 0;\r\n                        fish.getComponent(\"Fishhaiwang2\").fishInfo = info;\r\n                        fish.getComponent(\"Fishhaiwang2\").fishId = info.fishId[i];\r\n                        fish.getComponent(\"Fishhaiwang2\").fishType = type;\r\n                        fish.getComponent(\"Fishhaiwang2\").offset = cc.v2(offsetX, offsetY);\r\n                        fish.position = cc.v2(pathArr[0][0], pathArr[0][1]);\r\n\r\n                        fish.getComponent('Fishhaiwang2').executeMove();\r\n                    }\r\n                }, i * 800);\r\n            }\r\n        }\r\n        else {\r\n            for (let i = 0; i < info.fishCount; i++) {\r\n                let fish = cc.instantiate(this.fishPb[type]);\r\n\r\n                offsetX = (Math.floor(i / listY) - (listX - 1) / 2) * fish.width;\r\n                offsetY = (i % listY - (listY - 1) / 2) * fish.height;\r\n\r\n                fish.parent = this.fishBg;\r\n                fish.zIndex = info.fishType;\r\n\r\n                fish.getComponent(\"Fishhaiwang2\").pathArr = pathArr;\r\n                fish.getComponent(\"Fishhaiwang2\").pathIndex = 0;\r\n                fish.getComponent(\"Fishhaiwang2\").fishInfo = info;\r\n                fish.getComponent(\"Fishhaiwang2\").fishId = info.fishId[i];\r\n                fish.getComponent(\"Fishhaiwang2\").fishType = type;\r\n                fish.getComponent(\"Fishhaiwang2\").offset = cc.v2(offsetX, offsetY);\r\n                fish.position = cc.v2(pathArr[0][0] + offsetX, pathArr[0][1] + offsetY);\r\n\r\n                fish.getComponent('Fishhaiwang2').executeMove();\r\n            }\r\n        }\r\n\r\n    },\r\n\r\n    getFishById(fid) {\r\n        for (const fishNode of this.fishBg.children) {\r\n            let fish = fishNode.getComponent(\"Fishhaiwang2\");\r\n            if (fish.fishId == fid) {\r\n                if (fishNode.x >= -667 && fishNode.x <= 667 && fishNode.y >= -375 && fishNode.y <= 375) {\r\n                    return fishNode;\r\n                }\r\n            }\r\n        }\r\n        return null;\r\n    },\r\n\r\n    checkFishId(fid) {\r\n        return cc.isValid(this.getFishById(fid));\r\n    },\r\n\r\n    onFishHit(info) {\r\n        // fishId\r\n        // hitScore\r\n        // propCount\r\n        // propId\r\n        // userId\r\n        let target = null;\r\n        let fishes = this.fishBg.children;\r\n        for (let i in fishes) {\r\n            let fishNode = fishes[i];\r\n            let fish = fishNode.getComponent(\"Fishhaiwang2\");\r\n            if (fish.fishId == info.fishId) {\r\n                target = fishNode;\r\n                break;\r\n            }\r\n        }\r\n        if (target == null) return;\r\n        //如果选中的鱼被打死，就清空选中容器\r\n        if (target == this.targetFish) {\r\n            this.targetFish = null;\r\n        }\r\n\r\n        let targetSeat = this.getSeatByUser(info.userId);\r\n\r\n        if (target.getComponent(\"Fishhaiwang2\").fishType == 24 ||\r\n            target.getComponent(\"Fishhaiwang2\").fishType == 25) {\r\n            // fishId,fishIdList,sendId\r\n\r\n            let fish = null;\r\n            let fishidlist = [];\r\n            for (const chlid of this.fishBg.children) {\r\n                fish = chlid.getComponent(\"Fishhaiwang2\");\r\n                fishidlist.push(fish.fishId);\r\n            }\r\n            console.log(\"击中鱼列表：\", fishidlist);\r\n            this.fishNet.fishSocket.emit('boomFishHit', JSON.stringify({\r\n                fishId: info.fishId,\r\n                fishIdList: fishidlist,\r\n            }));\r\n        }\r\n\r\n        let isSelf = false;\r\n        if (this.pInfo.playerId == info.userId) {\r\n            isSelf = true;\r\n        }\r\n\r\n        this.addCoinAnime(targetSeat, info.hitSocre * this.roomBet, target.position, target.getComponent(\"Fishhaiwang2\").fishInfo, isSelf, true);\r\n\r\n        target.parent = null;\r\n        target.destroy();\r\n    },\r\n\r\n    onBoomFishHit(info) {\r\n        // info:{userId:_userId,hitSocre:score,fishList:outfishList}}\r\n        console.log(\"击中炸弹事件：\", info);\r\n        let fishNode = null;\r\n        let isSelf = false;\r\n        let targetSeat = this.getSeatByUser(info.userId);\r\n        if (this.pInfo.playerId == info.userId) {\r\n            isSelf = true;\r\n        }\r\n        for (const key in info.fishList) {\r\n            let fishId = info.fishList[key];\r\n            fishNode = this.getFishById(fishId);\r\n            if (cc.isValid(fishNode)) {\r\n                if (key == 0) {\r\n                    this.addCoinAnime(targetSeat, info.hitSocre * this.roomBet, fishNode.position, fishNode.getComponent(\"Fishhaiwang2\").fishType, isSelf, true);\r\n                } else {\r\n                    this.addCoinAnime(targetSeat, info.hitSocre * this.roomBet, fishNode.position, fishNode.getComponent(\"Fishhaiwang2\").fishType, isSelf, false);\r\n                }\r\n                fishNode.parent = null;\r\n                fishNode.destroy();\r\n            }\r\n        }\r\n    },\r\n\r\n    addCoinAnime(targetSeat, score, position, fishType, isSelf, isAddScore) {\r\n        this.cannonList[targetSeat].check_pan(fishType, score);\r\n\r\n        //console.log(\"score++ \"+score);\r\n        var coinbg = cc.find('Canvas/GameNode/coinbg');\r\n\r\n        var coinpb = null;\r\n        var coinnum = 0;\r\n        if (score >= 100) {\r\n            coinpb = this.coinPb[0];\r\n            coinnum = parseInt(score / 100);\r\n        } else if (score >= 10) {\r\n            coinpb = this.coinPb[1];\r\n            coinnum = parseInt(score / 10);\r\n        } else {\r\n            coinpb = this.coinPb[2];\r\n            coinnum = Math.ceil(score);\r\n        }\r\n        if (coinnum > 6) coinnum = 6;\r\n        for (var i = 0; i < coinnum; i++) {\r\n            var coin = cc.instantiate(coinpb);\r\n            coin.parent = coinbg;\r\n            coin.position = position;\r\n\r\n            coin.runAction(cc.sequence(cc.delayTime(0.3 * (i + 1)),\r\n                cc.moveBy(0.4, 0, 65),\r\n                cc.moveTo(0.5, this.cannonList[targetSeat].node.position),\r\n                cc.removeSelf()));\r\n\r\n        }\r\n\r\n        if (isSelf) {\r\n            var s = parseInt(Math.random() * 19);\r\n            playEffect('die_' + s);\r\n            playEffect('collect_2');\r\n\r\n            var label = cc.instantiate(this.label_pb);\r\n            label.opacity = 0;\r\n            label.position = position;\r\n            label.getComponent(cc.Label).string = \"+\" + Helper.fixNum(score);\r\n            label.parent = coinbg;\r\n            label.zIndex = 200;\r\n            var t1 = 0.4;\r\n            var s1 = 80;\r\n            var t2 = 0.6\r\n            label.runAction(cc.sequence(\r\n                cc.spawn(cc.fadeIn(t1), cc.moveBy(t1, cc.v2(0, t1 * s1))),\r\n                cc.moveBy(t2, cc.v2(0, t2 * s1)),\r\n                cc.spawn(cc.fadeOut(t1), cc.moveBy(t1, cc.v2(0, t1 * s1))),\r\n                cc.removeSelf()));\r\n        }\r\n        //分数增加\r\n        if (isAddScore) {\r\n            this.node.runAction(cc.sequence(cc.delayTime(0.3 * (coinnum + 1)),\r\n                cc.callFunc(function () {\r\n                    this.cannonList[targetSeat].addscore(score);\r\n                }, this)));\r\n        }\r\n\r\n    },\r\n\r\n    bullet_change(num) {\r\n        var index = this.power_list.indexOf(this.bulletPower);\r\n        index += num;\r\n        if (index < 0 || index >= this.power_list.length) return;\r\n        this.bulletPower = this.power_list[index];\r\n\r\n        this.fishNet.fishSocket.emit('changePower', JSON.stringify({\r\n            userid: this.pInfo.playerId,\r\n            bet: this.bulletPower,\r\n        }));\r\n    },\r\n\r\n\r\n    changePower(info) {\r\n        for (var i in this.playerList) {\r\n            if (this.playerList && this.playerList[i].uid == info.userid) {\r\n                this.cannonList[i].betLbl.string = Helper.fixNum(info.bet * this.roomBet);\r\n                break;\r\n            }\r\n        }\r\n    },\r\n\r\n    cast_skill(sid) {\r\n        if (sid == 1) {\r\n            if (this.skillCD[0] > 0 || this.pInfo.playerCoin < this.skillCost[0]) {\r\n                return;\r\n            }\r\n            let info = { uid: this.pInfo.playerId, sid: sid };\r\n\r\n            //this.cast_skill_r(info);            \r\n            this.fishNet.fishSocket.emit('useSKill', JSON.stringify(info));\r\n        }\r\n        // 锁定开关\r\n        if (sid == 2) {\r\n            this.isLockFish = !this.isLockFish;\r\n            if (this.isLockFish) {\r\n                this.getBigFishId();\r\n                this.effect_lockFish.active = true;\r\n                this.lab_lockFish.string = \"解除锁定\";\r\n            } else {\r\n                this.effect_lockFish.active = false;\r\n                this.lab_lockFish.string = \"锁定\";\r\n            }\r\n        }\r\n\r\n    },\r\n\r\n    cast_skill_r(info) {\r\n        var seatId = this.getSeatByUser(info.uid);\r\n        if (seatId < 0) return;\r\n\r\n        if (info.sid == 1) {\r\n            this.skillTime[0] = this.skillMaxTime[0];\r\n            this.skillCD[0] = this.skillMaxCD[0];\r\n            this.effect_frozen.active = true;\r\n            for (var i in this.fishBg.children) {\r\n                var fish = this.fishBg.children[i];\r\n                fish.pauseAllActions();\r\n            }\r\n        }\r\n\r\n        // if (info.uid == this.pInfo.playerId)\r\n        // {\r\n        //     else if (info.sid == 2)\r\n        //     {\r\n        //         this.skillCD[1]  = this.skillMaxCD[1];\r\n        //         this.skillTime[1] = this.skillMaxTime[1];\r\n        //         this.schedule(this.shoot, 0.2, cc.macro.REPEAT_FOREVER, 0.01);\r\n        //     }\r\n        // }\r\n\r\n        // if (info.sid == 2){\r\n        //     this.cannonList[seatId].autoTime = this.skillMaxTime[1];\r\n        // }\r\n    },\r\n\r\n    // isAiming(){\r\n    //     return this.skillTime[1]>0;\r\n    // },\r\n\r\n    update(dt) {\r\n        for (var i in this.skillTime) {\r\n            if (this.skillTime[i] > 0) {\r\n                this.skillTime[i]--;\r\n            }\r\n            if (this.skillCD[i] > 0) {\r\n                this.skillCD[i]--;\r\n            }\r\n\r\n            var node;\r\n            if (i == 0) {\r\n                node = cc.find('Canvas/UI/right/右侧导航栏/s1/cd');\r\n            } else if (i == 1) {\r\n                node = cc.find('Canvas/UI/right/右侧导航栏/s2/cd');\r\n            }\r\n\r\n            node.getComponent(cc.ProgressBar).progress = this.skillCD[i] / this.skillMaxCD[i];\r\n        }\r\n\r\n        if (this.skillTime[0] == 1) {\r\n            for (var i in this.fishBg.children) {\r\n                var fish = this.fishBg.children[i];\r\n                fish.resumeAllActions();\r\n            }\r\n            this.effect_frozen.active = false;\r\n        }\r\n        // if (this.skillTime[1] == 1)\r\n        // {\r\n        //     if (this.isAutoShot) {\r\n        //         this.schedule(this.shoot, 0.3, cc.macro.REPEAT_FOREVER, 0.01);\r\n        //     }else{\r\n        //         this.unschedule(this.shoot);\r\n        //     }\r\n        // }\r\n\r\n        // var aura = false;\r\n        // for (var i in this.cannonList)\r\n        // {\r\n        //     if (this.cannonList[i].autoTime && this.cannonList[i].autoTime>0){\r\n        //         aura = true;\r\n        //     }\r\n        // }\r\n\r\n        var node = cc.find(\"Canvas/GameNode/aurabg/aura\");\r\n        if (this.isLockFish) {\r\n            var fish = this.getBigFish();\r\n            if (cc.isValid(fish)) {\r\n                node.active = true;\r\n                node.position = fish.position;\r\n                node.scale = fish.height * 0.75 / 249;\r\n            } else {\r\n                node.active = false;\r\n            }\r\n        } else {\r\n            node.active = false;\r\n        }\r\n\r\n    },\r\n\r\n    getBigFishId() {\r\n        let fishNode = this.getBigFish();\r\n        if (!cc.isValid(fishNode)) return -1;\r\n        return fishNode.getComponent(\"Fishhaiwang2\").fishId;\r\n    },\r\n    getBigFish() {\r\n        if (cc.isValid(this.targetFish)) {\r\n            return this.targetFish;\r\n        }\r\n        var bigfishNode = null;\r\n        for (var i in this.fishBg.children) {\r\n            var fishNode = this.fishBg.children[i];\r\n            var fish = fishNode.getComponent(\"Fishhaiwang2\");\r\n            if (fishNode.x < -667 || fishNode.x > 667 || fishNode.y < -375 || fishNode.y > 375 || fish.fishType < this.bigFishType) {\r\n                continue;\r\n            }\r\n            if (bigfishNode == null || fish.fishType > bigfishNode.getComponent(\"Fishhaiwang2\").fishType) {\r\n                bigfishNode = fishNode;\r\n            }\r\n        }\r\n        return bigfishNode;\r\n    },\r\n\r\n    setAutoShot(isAuto) {\r\n        this.isAutoShot = isAuto;\r\n        //if (this.skillTime[1]>0) return;\r\n        if (isAuto) {\r\n            this.schedule(this.shoot, 0.3, cc.macro.REPEAT_FOREVER, 0.01);\r\n        } else {\r\n            this.unschedule(this.shoot);\r\n        }\r\n    },\r\n\r\n    setMusic() {\r\n        if (this.pInfo.musicControl) {\r\n            this.pInfo.musicControl = 0;\r\n            this.musicToggle.isChecked = false;\r\n            cc.audioEngine.stopAll();\r\n        } else {\r\n            this.pInfo.musicControl = 1;\r\n            this.musicToggle.isChecked = true;\r\n            playBGM('bg_0');\r\n        }\r\n        this.writeUserSettingDate_Function();\r\n    },\r\n\r\n    setSound() {\r\n        if (this.pInfo.soundEffectControl) {\r\n            this.pInfo.soundEffectControl = 0;\r\n            this.soundToggle.isChecked = false;\r\n        } else {\r\n            this.pInfo.soundEffectControl = 1;\r\n            this.soundToggle.isChecked = true;\r\n        }\r\n        this.writeUserSettingDate_Function();\r\n    },\r\n    /**\r\n     * 将设置数据写入缓存数据\r\n     */\r\n    writeUserSettingDate_Function: function () {\r\n        var data = {\r\n            musicControl: this.pInfo.musicControl,\r\n            soundEffectControl: this.pInfo.soundEffectControl\r\n        };\r\n        this.pInfo.writeData_Function(\"userSetting\", data);\r\n    },\r\n});"]}