{"version":3,"sources":["assets\\LaoHuJi\\module\\paomadeng\\paomadeng.js"],"names":["i18n","require","String","prototype","replaceAll","exp","newStr","replace","RegExp","format","args","result","arguments","length","data","key","value","undefined","cc","Class","Component","properties","Label_Text","RichText","_totalTime","_countDown","_strTemplate_SubGame","onLoad","node","active","onDestroy","update","dt","onWorldWinMSG","parameterArray","strNickName","nGameId","nWinCoin","template","t","strGameName","string","onSendNotice","strNotice"],"mappings":";;;;;;AACA,IAAMA,IAAI,GAAGC,OAAO,CAAC,MAAD,CAApB;AACA;AACA;AACA;AACA;AACA;;;AACAC,MAAM,CAACC,SAAP,CAAiBC,UAAjB,GAA8B,UAAUC,GAAV,EAAeC,MAAf,EAAuB;AACjD,SAAO,KAAKC,OAAL,CAAa,IAAIC,MAAJ,CAAWH,GAAX,EAAgB,IAAhB,CAAb,EAAoCC,MAApC,CAAP;AACH,CAFD;AAIA;AACA;AACA;AACA;;;AACAJ,MAAM,CAACC,SAAP,CAAiBM,MAAjB,GAA0B,UAAUC,IAAV,EAAgB;AACtC,MAAIC,MAAM,GAAG,IAAb;;AACA,MAAIC,SAAS,CAACC,MAAV,GAAmB,CAAvB,EAA0B;AACtB,WAAOF,MAAP;AACH;;AAED,MAAIG,IAAI,GAAGF,SAAX,CANsC,CAMhB;;AACtB,MAAIA,SAAS,CAACC,MAAV,IAAoB,CAApB,IAAyB,OAAQH,IAAR,IAAiB,QAA9C,EAAwD;AACpD;AACAI,IAAAA,IAAI,GAAGJ,IAAP;AACH;;AACD,OAAK,IAAIK,GAAT,IAAgBD,IAAhB,EAAsB;AAClB,QAAIE,KAAK,GAAGF,IAAI,CAACC,GAAD,CAAhB;;AACA,QAAIE,SAAS,IAAID,KAAjB,EAAwB;AACpBL,MAAAA,MAAM,GAAGA,MAAM,CAACP,UAAP,CAAkB,QAAQW,GAAR,GAAc,KAAhC,EAAuCC,KAAvC,CAAT;AACH;AACJ;;AACD,SAAOL,MAAP;AACH,CAlBD;;AAoBAO,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAGLC,EAAAA,UAAU,EAAE;AACRC,IAAAA,UAAU,EAAEJ,EAAE,CAACK,QADP;AAERC,IAAAA,UAAU,EAAE,EAFJ;AAEO;AACfC,IAAAA,UAAU,EAAE,CAHJ;AAGM;AACdC,IAAAA,oBAAoB,EAAE;AAJd,GAHP;AAULC,EAAAA,MAAM,EAAE,kBAAY;AAChB;AACA;AACA,SAAKC,IAAL,CAAUC,MAAV,GAAmB,KAAnB;AACH,GAdI;AAgBL;AACAC,EAAAA,SAAS,EAAE,qBAAY,CACnB;AACA;AACH,GApBI;AAsBLC,EAAAA,MAAM,EAAE,gBAAUC,EAAV,EAAc;AAClB,SAAKP,UAAL,IAAmBO,EAAnB;;AACA,QAAI,KAAKP,UAAL,GAAkB,CAAtB,EAAyB;AACrB,WAAKG,IAAL,CAAUC,MAAV,GAAmB,KAAnB;AACH;AACJ,GA3BI;AA6BL;AACAI,EAAAA,aAAa,EAAE,uBAAUC,cAAV,EAA0BC,WAA1B,EAAuC;AAClD,SAAKP,IAAL,CAAUC,MAAV,GAAmB,IAAnB;AACA,SAAKJ,UAAL,GAAkB,KAAKD,UAAvB;AAEA,QAAIY,OAAO,GAAGF,cAAc,CAAC,CAAD,CAA5B;AACA,QAAIG,QAAQ,GAAGH,cAAc,CAAC,CAAD,CAA7B;AACA,QAAII,QAAQ,GAAGtC,IAAI,CAACuC,CAAL,CAAO,iBAAP,CAAf;AACA,QAAIC,WAAW,GAAGxC,IAAI,CAACuC,CAAL,CAAO,KAAKb,oBAAL,CAA0BjB,MAA1B,CAAiC2B,OAAjC,CAAP,CAAlB;AACA,SAAKd,UAAL,CAAgBmB,MAAhB,GAAyBH,QAAQ,CAAC7B,MAAT,CAAgB0B,WAAhB,EAA6BK,WAA7B,EAA0CH,QAA1C,CAAzB;AACH,GAvCI;AAyCL;AACAK,EAAAA,YAAY,EAAE,sBAAUC,SAAV,EAAqB;AAC/B,SAAKf,IAAL,CAAUC,MAAV,GAAmB,IAAnB;AACA,SAAKJ,UAAL,GAAkB,KAAKD,UAAvB;AACA,SAAKF,UAAL,CAAgBmB,MAAhB,GAAyBE,SAAzB;AACH;AA9CI,CAAT","sourceRoot":"/","sourcesContent":["\r\nconst i18n = require('i18n');\r\n/**\r\n * 替换所有匹配exp的字符串为指定字符串\r\n * @param exp 被替换部分的正则\r\n * @param newStr 替换成的字符串\r\n */\r\nString.prototype.replaceAll = function (exp, newStr) {\r\n    return this.replace(new RegExp(exp, \"gm\"), newStr);\r\n};\r\n\r\n/**\r\n * 原型：字符串格式化\r\n * @param args 格式化参数值\r\n */\r\nString.prototype.format = function (args) {\r\n    var result = this;\r\n    if (arguments.length < 1) {\r\n        return result;\r\n    }\r\n\r\n    var data = arguments; // 如果模板参数是数组\r\n    if (arguments.length == 1 && typeof (args) == \"object\") {\r\n        // 如果模板参数是对象\r\n        data = args;\r\n    }\r\n    for (var key in data) {\r\n        var value = data[key];\r\n        if (undefined != value) {\r\n            result = result.replaceAll(\"\\\\{\" + key + \"\\\\}\", value);\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        Label_Text: cc.RichText,\r\n        _totalTime: 10,//显示时长\r\n        _countDown: 0,//显示倒计时\r\n        _strTemplate_SubGame: \"LHJ_SUBGAME_GAMEID_{0}\"\r\n    },\r\n\r\n    onLoad: function () {\r\n        ////KBEngineEvent.register(\"onWorldWinMSG\", this, \"onWorldWinMSG\");\r\n        ////KBEngineEvent.register(\"onSendNotice\", this, \"onSendNotice\");\r\n        this.node.active = false;\r\n    },\r\n\r\n    //取消注册\r\n    onDestroy: function () {\r\n        ////KBEngineEvent.deregister(\"onWorldWinMSG\", this);\r\n        ////KBEngineEvent.deregister(\"onSendNotice\", this);\r\n    },\r\n\r\n    update: function (dt) {\r\n        this._countDown -= dt;\r\n        if (this._countDown < 0) {\r\n            this.node.active = false;\r\n        }\r\n    },\r\n\r\n    //收到消息:玩家中奖跑马灯\r\n    onWorldWinMSG: function (parameterArray, strNickName) {\r\n        this.node.active = true;\r\n        this._countDown = this._totalTime;\r\n\r\n        var nGameId = parameterArray[0];\r\n        var nWinCoin = parameterArray[1];        \r\n        var template = i18n.t(\"LHJ_GONGGAO_WIN\");\r\n        var strGameName = i18n.t(this._strTemplate_SubGame.format(nGameId));\r\n        this.Label_Text.string = template.format(strNickName, strGameName, nWinCoin);\r\n    },\r\n\r\n    //公告消息\r\n    onSendNotice: function (strNotice) {\r\n        this.node.active = true;\r\n        this._countDown = this._totalTime;\r\n        this.Label_Text.string = strNotice;\r\n    },\r\n});"]}