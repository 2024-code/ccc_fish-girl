{"version":3,"sources":["assets\\Texture\\game_attlhp\\js\\ATTMain.js"],"names":["cc","Class","Component","properties","lblUserCoin","type","Label","displayName","lblWinCoin","lblBet","rolePb","Prefab","cards","Node","onLoad","playerInfo","require","getInstant","net","node","getComponent","audio","bet","lotteryRes","isAni","chooseCardArray","start","setBet","string","playerCoin","toFixed","dealCards","onCLick","event","args","sendRoll","viewarray","isFinal","playEffect","socket","disconnect","director","loadScene","betShowArray","i","length","getChildByName","chooseCard","data","needPush","parseInt","splice","active","push","tempCard","setPosition","v2","scaleX","moveToPos","stopAllActions","cardIndex","runAction","sequence","delayTime","moveTo","scheduleOnce","leaveCards","moveBy","openCards","userscore","scaleTo","needAni","j","showResult","hideResultAni","winType","Animation","play","roll","list","removeAllChildren","pb","instantiate","addChild","emit","JSON","stringify","array"],"mappings":"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","sourceRoot":"/","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        lblUserCoin: {\r\n            default: null,\r\n            type: cc.Label,\r\n            displayName: '用户金币',\r\n        },\r\n        lblWinCoin: {\r\n            default: null,\r\n            type: cc.Label,\r\n            displayName: '本局赢得',\r\n        },\r\n        lblBet: {\r\n            default: null,\r\n            type: cc.Label,\r\n            displayName: '押注',\r\n        },\r\n        rolePb: {\r\n            default: [],\r\n            type: cc.Prefab,\r\n            displayName: '牌角色Pb',\r\n        },\r\n        cards: {\r\n            default: [],\r\n            type: cc.Node,\r\n            displayName: '桌面牌',\r\n        }\r\n\r\n    },\r\n\r\n    onLoad() {\r\n        this.playerInfo = require(\"PlayerInfo\").getInstant;\r\n        this.net = this.node.getComponent('ATTNetwork');\r\n        this.audio = this.node.getComponent('ATTAudio');\r\n        this.bet = 100;\r\n        this.lotteryRes = null;\r\n        this.isAni = false;\r\n        this.chooseCardArray = [];\r\n    },\r\n\r\n    start() {\r\n        // this.lblWinCoin.string = '0.00';\r\n        this.setBet();\r\n        this.lblUserCoin.string = this.playerInfo.playerCoin.toFixed(2);\r\n        this.dealCards();\r\n    },\r\n\r\n    onCLick(event, args) {\r\n        if (this.isAni) {\r\n            return;\r\n        }\r\n        if (args == 'roll') {\r\n            this.sendRoll();\r\n        } else if (args == 'add') {\r\n            if (this.lotteryRes != null && !this.lotteryRes.viewarray.isFinal) {\r\n                return;\r\n            }\r\n            this.audio.playEffect(0);\r\n            this.bet += 100;\r\n            this.bet = this.bet >= 10000 ? 10000 : this.bet;\r\n            this.setBet();\r\n        } else if (args == 'dec') {\r\n            if (this.lotteryRes != null && !this.lotteryRes.viewarray.isFinal) {\r\n                return;\r\n            }\r\n            this.audio.playEffect(5);\r\n            this.bet -= 100;\r\n            this.bet = this.bet > 0 ? this.bet : 100;\r\n            this.setBet();\r\n        } else if (args == 'max') {\r\n            if (this.lotteryRes != null && !this.lotteryRes.viewarray.isFinal) {\r\n                return;\r\n            }\r\n            this.audio.playEffect(4);\r\n            this.bet = 10000;\r\n            this.setBet();\r\n        } else if (args == 'exitGame') {\r\n            this.audio.playEffect(5);\r\n            this.net.socket.disconnect();\r\n            cc.director.loadScene(\"LobbyMain\");\r\n        }\r\n    },\r\n\r\n    setBet() {\r\n        this.lblBet.string = (this.bet / 100).toFixed(2);\r\n        let betShowArray = [750, 250, 150, 60, 10, 7, 5, 3, 2, 1];\r\n        for (let i = 0; i < betShowArray.length; i++) {\r\n            this.node.getChildByName(\"image_pic1\").getChildByName(\"list\").getChildByName(\"\" + (i + 1)).getComponent(cc.Label).string = betShowArray[i] * (this.bet / 100);\r\n            if (i < 4) {\r\n                this.node.getChildByName(\"caijinliebiao\").getChildByName(\"\" + (i + 1)).getComponent(cc.Label).string = betShowArray[i] * (this.bet / 100);\r\n            }\r\n        }\r\n    },\r\n\r\n    chooseCard (event, data) {\r\n        if (this.lotteryRes && !this.lotteryRes.viewarray.isFinal && !this.isAni) {\r\n            this.audio.playEffect(1);\r\n            let needPush = true;\r\n            for (let i = 0; i < this.chooseCardArray.length; i++) {\r\n                if (parseInt(data) == this.chooseCardArray[i]) {\r\n                    needPush = false;\r\n                    this.chooseCardArray.splice(i, 1);\r\n                    this.cards[data].getChildByName(\"UI_BaoLiu\").active = false;\r\n                    break;\r\n                }\r\n            }\r\n            if (needPush) {\r\n                this.cards[data].getChildByName(\"UI_BaoLiu\").active = true;\r\n                this.chooseCardArray.push(parseInt(data));\r\n            }\r\n        }\r\n    },\r\n    //发牌\r\n    dealCards () {\r\n        this.isAni = true;\r\n        this.audio.playEffect(3);\r\n        for (let i = 0; i < this.cards.length; i++) {\r\n            let tempCard = this.cards[i];\r\n            tempCard.setPosition(cc.v2(-500, 0));\r\n            tempCard.getChildByName(\"back\").scaleX = 1;\r\n            tempCard.getChildByName(\"card\").scaleX = 0;\r\n            tempCard.getChildByName(\"card2\").scaleX = 0;\r\n            tempCard.getChildByName(\"UI_BaoLiu\").active = false;\r\n            let moveToPos = cc.v2(-314 + i * 157, 0);\r\n            tempCard.stopAllActions();\r\n            let cardIndex = this.cards.length - 1 - i;\r\n            tempCard.runAction(cc.sequence(cc.delayTime(cardIndex * 0.1), \r\n                cc.moveTo(0.2 - cardIndex * 0.02, moveToPos)\r\n            ));\r\n        }\r\n        this.scheduleOnce(() => {\r\n            this.isAni = false;\r\n        }, 0.7);\r\n    },\r\n    leaveCards () {\r\n        this.isAni = true;\r\n        this.lotteryRes = null;\r\n        for (let i = 0; i < this.cards.length; i++) {\r\n            let tempCard = this.cards[i];\r\n            tempCard.stopAllActions();\r\n            let cardIndex = this.cards.length - 1 - i;\r\n            tempCard.runAction(\r\n                cc.sequence(cc.delayTime(cardIndex * 0.1), \r\n                cc.moveBy(0.2, cc.v2(-150, 0)),\r\n                cc.moveTo(0.3 - cardIndex * 0.02, cc.v2(500, 0))\r\n            ));\r\n        }\r\n        this.scheduleOnce(() => {\r\n            this.dealCards ();\r\n        }, 1.5);\r\n    },\r\n    //开牌\r\n    openCards (isFinal) {\r\n        this.isAni = true;\r\n        this.audio.playEffect(2);\r\n        if (!isFinal) {\r\n            this.lblUserCoin.string = (this.lotteryRes.userscore / 100).toFixed(2);\r\n            for (let i = 0; i < this.cards.length; i++) {\r\n                let tempCard = this.cards[i];\r\n                tempCard.getChildByName(\"back\").runAction(cc.scaleTo(0.1, 0, 1));\r\n                tempCard.getChildByName(\"card\").runAction(cc.sequence(cc.delayTime(0.1),cc.scaleTo(0.1, 1, 1)));\r\n            }\r\n            this.scheduleOnce(() => {\r\n                this.isAni = false;\r\n            }, 0.3);\r\n        } else {\r\n            for (let i = 0; i < this.cards.length; i++) {\r\n                let tempCard = this.cards[i];\r\n                let needAni = true;\r\n                for (let j = 0; j < this.chooseCardArray.length; j++) {\r\n                    if (this.chooseCardArray[j] == i) {\r\n                        tempCard.getChildByName(\"card\").scaleX = 0;\r\n                        tempCard.getChildByName(\"card2\").scaleX = 1;\r\n                        needAni = false;\r\n                        break;\r\n                    }\r\n                }\r\n                if (needAni) {\r\n                    tempCard.getChildByName(\"card\").runAction(cc.scaleTo(0.1, 0, 1));\r\n                    tempCard.getChildByName(\"card2\").runAction(cc.sequence(cc.delayTime(0.1),cc.scaleTo(0.1, 1, 1),cc.scaleTo(0.1, 0, 1),cc.scaleTo(0.1, 1, 1)));\r\n                }\r\n            }\r\n            this.scheduleOnce(() => {\r\n                this.showResult();\r\n            }, 1);\r\n        }\r\n    },\r\n    showResult () {\r\n        this.hideResultAni();\r\n        this.lblUserCoin.string = (this.lotteryRes.userscore / 100).toFixed(2);\r\n        if (this.lotteryRes.viewarray.winType == 0) {\r\n            this.audio.playEffect(6);\r\n            this.node.getChildByName(\"resultAni\").getChildByName(\"ani0\").active = true;\r\n            this.node.getChildByName(\"resultAni\").getChildByName(\"ani0\").getComponent(cc.Animation).play();\r\n            this.node.getChildByName(\"resultAni\").getChildByName(\"aniLose\").active = true;\r\n            this.node.getChildByName(\"resultAni\").getChildByName(\"aniLose\").getComponent(cc.Animation).play();\r\n        } else {\r\n            this.audio.playEffect(7);\r\n            this.node.getChildByName(\"resultAni\").getChildByName(\"ani\" + this.lotteryRes.viewarray.winType).active = true;\r\n            this.node.getChildByName(\"resultAni\").getChildByName(\"ani\" + this.lotteryRes.viewarray.winType).getComponent(cc.Animation).play();\r\n            this.node.getChildByName(\"resultAni\").getChildByName(\"aniGold\").active = true;\r\n            this.node.getChildByName(\"resultAni\").getChildByName(\"aniGold\").getComponent(cc.Animation).play();\r\n        }\r\n        this.scheduleOnce(() => {\r\n            this.hideResultAni();\r\n            this.leaveCards();\r\n        }, 2);\r\n    },\r\n\r\n    roll(list) {\r\n        for (let i = 0; i < this.cards.length; i++) {\r\n            if (!this.lotteryRes.viewarray.isFinal) {\r\n                this.cards[i].getChildByName(\"card\").removeAllChildren();\r\n                let pb = cc.instantiate(this.rolePb[list[i]]);\r\n                this.cards[i].getChildByName(\"card\").addChild(pb);\r\n            } else {\r\n                this.cards[i].getChildByName(\"card2\").removeAllChildren();\r\n                let pb = cc.instantiate(this.rolePb[list[i]]);\r\n                this.cards[i].getChildByName(\"card2\").addChild(pb);\r\n            }\r\n        }\r\n        this.openCards(this.lotteryRes.viewarray.isFinal);\r\n        if (this.lotteryRes.viewarray.isFinal) {\r\n            this.chooseCardArray = [];\r\n        }\r\n    },\r\n\r\n    sendRoll() {\r\n        this.net.socket.emit('lottery', JSON.stringify({\r\n            bet: this.bet,\r\n            array: this.chooseCardArray,\r\n        }));\r\n    },\r\n\r\n    hideResultAni() {\r\n        this.node.getChildByName(\"resultAni\").getChildByName(\"aniGold\").active = false;\r\n        this.node.getChildByName(\"resultAni\").getChildByName(\"aniLose\").active = false;\r\n        for (let i = 0; i < 11; i++) {\r\n            this.node.getChildByName(\"resultAni\").getChildByName(\"ani\" + i).active = false;\r\n        }\r\n    },\r\n});"]}