{"version":3,"sources":["assets\\Texture\\Slot_EgyptianTreasures\\js\\EFMain.js"],"names":["BETNUM","LINES","BET","RULELIST","cc","Class","Component","properties","spUserFace","type","Sprite","displayName","lblUserName","Label","lblUserCoin","lblBet","lblLines","lblCurBet","lblWinCoin","lblCoinList","rollBtnAnim","Animation","rolePb","Prefab","spAtlas","SpriteAtlas","autoBtn","effectAnimPr","Node","bigWinNode","bigWinResultAnim","freeTimesNode","extraNode","shadowEf","helpUI","helpNum","audioBtn","onLoad","playerInfo","require","getInstant","net","node","getComponent","audio","wheelList","freeWheelList","bet","auto","status","bigWinResList","bigWinBoo","freeTimes","rollResult","rollIndex","lotteryRes","stopFree","start","string","setBet","Helper","loadHead","playerHeadId","sp","spriteFrame","playerName","playerCoin","toFixed","onCLick","event","args","getSpriteFrame","sendRoll","play","stopImmediately","active","length","playBgm","hr","children","i","socket","disconnect","director","loadScene","pInfo","musicControl","stopAudio","stateCallBack","st","rIndex","userscore","winscore","freeGold","playWinAnim","viewarray","ADD_Free","bFlag","getChildByName","nFreeTime","getFreeTime","nIndex","map","currentValue","index","arr","playFree","scheduleOnce","closeShine","playFreeWheel","startRoll","startFreeGame","hasWinBool","allLine","nWinCards","push","lines","nWinLinesDetail","list","animIndex","schedule","clsoeAnim","parseInt","j","showAnim","stopFreeTimes","freeHideNode","initWheel","spList","lbl","showId","cols","roleIdList","rolePbList","nodeList","anim","setCurrentTime","stop","roll","line","emit","JSON","stringify","nBetList","closeDoorAnim","doorNode","chList"],"mappings":"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","sourceRoot":"/","sourcesContent":["const BETNUM = 0.2; //单注值\r\nconst LINES = 20; //线数\r\nconst BET = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];\r\nconst RULELIST = [10, 6, 0.5, 8, 4, 0.25, 5, 2, 0.2, 4, 1, 0.15, 3, 0.9, 0.15, 2, 0.8, 0.12, 1.5, 0.7, 0.12, 1.5, 0.7, 0.1, 1, 0.6, 0.08, 0.6, 0.5, 0.05, 0.5, 0.4, 0.04]; //规则\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        spUserFace: {\r\n            default: null,\r\n            type: cc.Sprite,\r\n            displayName: '用户头像',\r\n        },\r\n        lblUserName: {\r\n            default: null,\r\n            type: cc.Label,\r\n            displayName: '用户名',\r\n        },\r\n        lblUserCoin: {\r\n            default: null,\r\n            type: cc.Label,\r\n            displayName: '用户金币',\r\n        },\r\n        lblBet: {\r\n            default: null,\r\n            type: cc.Label,\r\n            displayName: '单注',\r\n        },\r\n        lblLines: {\r\n            default: null,\r\n            type: cc.Label,\r\n            displayName: '线数',\r\n        },\r\n        lblCurBet: {\r\n            default: null,\r\n            type: cc.Label,\r\n            displayName: '本局总注',\r\n        },\r\n        lblWinCoin: {\r\n            default: null,\r\n            type: cc.Label,\r\n            displayName: '本局赢得',\r\n        },\r\n        lblCoinList: {\r\n            default: [],\r\n            type: cc.Label,\r\n            displayName: '列倍率显示',\r\n        },\r\n        rollBtnAnim: {\r\n            default: null,\r\n            type: cc.Animation,\r\n            displayName: 'roll按钮动画',\r\n        },\r\n        rolePb: {\r\n            default: [],\r\n            type: cc.Prefab,\r\n            displayName: '滚轮角色Pb',\r\n        },\r\n        spAtlas: {\r\n            default: null,\r\n            type: cc.SpriteAtlas,\r\n            displayName: '图集',\r\n        },\r\n        autoBtn: {\r\n            default: null,\r\n            type: cc.Sprite,\r\n            displayName: '自动按钮Sprite',\r\n        },\r\n        effectAnimPr: {\r\n            default: null,\r\n            type: cc.Node,\r\n            displayName: '中奖特效',\r\n        },\r\n\r\n        bigWinNode: {\r\n            default: null,\r\n            type: cc.Node,\r\n            displayName: '大奖节点',\r\n        },\r\n\r\n        bigWinResultAnim: {\r\n            default: null,\r\n            type: cc.Node,\r\n            displayName: 'bigWin中奖'\r\n        },\r\n\r\n        //免费次数有关\r\n\r\n        freeTimesNode: {\r\n            default: null,\r\n            type: cc.Node,\r\n            displayName: '免费摇奖显示节点',\r\n        },\r\n\r\n        extraNode: {\r\n            default: null,\r\n            type: cc.Node,\r\n            displayName: '额外旋转显示节点',\r\n        },\r\n\r\n        shadowEf: {\r\n            default: null,\r\n            type: cc.Animation,\r\n            displayName: '沙尘暴',\r\n        },\r\n\r\n        helpUI: {\r\n            default: null,\r\n            type: cc.Node,\r\n            displayName: 'help界面',\r\n        },\r\n\r\n        helpNum: {\r\n            default: null,\r\n            type: cc.Node,\r\n            displayName: 'help界面可变注数',\r\n        },\r\n\r\n        audioBtn: {\r\n            default: null,\r\n            type: cc.Sprite,\r\n            displayName: '声音按钮',\r\n        }\r\n    },\r\n\r\n    onLoad() {\r\n        this.playerInfo = require(\"PlayerInfo\").getInstant;\r\n        this.net = this.node.getComponent('EFNetwork');\r\n        this.audio = this.node.getComponent('EFAudio');\r\n        this.wheelList = [];\r\n        this.freeWheelList = [];\r\n        this.bet = 0;\r\n        this.auto = false;\r\n        this.status = 0;\r\n        this.bigWinResList = [3, 1, 2];\r\n        this.bigWinBoo = false;\r\n        this.freeTimes = 0;\r\n        this.rollResult = [];\r\n        this.rollIndex = 0;\r\n        this.lotteryRes = null;\r\n        this.stopFree = false;\r\n    },\r\n\r\n    start() {\r\n        this.lblLines.string = LINES;\r\n        this.lblWinCoin.string = '0.00';\r\n        this.setBet();\r\n        Helper.loadHead(this.playerInfo.playerHeadId, sp => {\r\n            this.spUserFace.spriteFrame = sp;\r\n        });\r\n        this.lblUserName.string = this.playerInfo.playerName;\r\n        this.lblUserCoin.string = this.playerInfo.playerCoin.toFixed(2);\r\n    },\r\n\r\n    onCLick(event, args) {\r\n        if (args == 'auto') {\r\n            if (this.freeTimes > 0 || this.bigWinBoo || this.stopFree) {\r\n                return;\r\n            }\r\n            this.auto = !this.auto;\r\n            this.autoBtn.spriteFrame = this.spAtlas.getSpriteFrame(this.auto ? 'btn_tingzhi' : 'btn_zidong');\r\n            if (this.auto && this.status == 0) {\r\n                this.sendRoll();\r\n            }\r\n        } else if (args == 'roll') {\r\n            if (this.freeTimes > 0 || this.bigWinBoo || this.stopFree) {\r\n                return;\r\n            }\r\n            if (!this.auto) {\r\n                if (this.status == 0) {\r\n                    this.rollBtnAnim.play();\r\n                    this.sendRoll();\r\n                } else if (this.status == 1) {\r\n                    this.stopImmediately();\r\n                }\r\n            }\r\n        } else if (args == 'add') {\r\n            if (this.freeTimes > 0 || this.bigWinBoo || this.stopFree || this.auto || this.extraNode.active) {\r\n                return;\r\n            }\r\n            this.bet += 1;\r\n            this.bet = this.bet >= BET.length ? BET.length - 1 : this.bet;\r\n            this.setBet();\r\n        } else if (args == 'dec') {\r\n            if (this.freeTimes > 0 || this.bigWinBoo || this.stopFree || this.auto || this.extraNode.active) {\r\n                return;\r\n            }\r\n            this.bet -= 1;\r\n            this.bet = this.bet >= 0 ? this.bet : 0;\r\n            this.setBet();\r\n        } else if (args == 'closeResult') {\r\n            this.bigWinResultAnim.active = false;\r\n            this.bigWinBoo = false;\r\n            this.audio.playBgm(0);\r\n        } else if (args == 'help') {\r\n            this.helpUI.active = true;\r\n            let hr = this.helpNum.children;\r\n            for (let i in hr) {\r\n                hr[i].getComponent(cc.Label).string = (RULELIST[i] * BET[this.bet]).toFixed(2);\r\n            }\r\n        } else if (args == 'closeHelp') {\r\n            this.helpUI.active = false;\r\n        } else if (args == 'exitGame') {\r\n            this.net.socket.disconnect();\r\n            cc.director.loadScene(\"LobbyMain\");\r\n        } else if (args == 'audio') {\r\n            this.audio.pInfo.musicControl = !this.audio.pInfo.musicControl;\r\n            this.audioBtn.spriteFrame = this.spAtlas.getSpriteFrame(this.audio.pInfo.musicControl ? 'btn_sound' : 'btn_sound_2');\r\n            if (!this.audio.pInfo.musicControl) {\r\n                this.audio.stopAudio();\r\n            } else {\r\n                if (this.bigWinBoo) {\r\n                    if (this.bigWinResultAnim.active) {\r\n                        this.audio.playBgm(2);\r\n                    } else {\r\n                        this.audio.playBgm(1);\r\n                    }\r\n                } else {\r\n                    this.audio.playBgm(0);\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    setBet() {\r\n        this.lblBet.string = (BET[this.bet] * BETNUM).toFixed(2);\r\n        this.lblCurBet.string = (BET[this.bet] * BETNUM).toFixed(2);\r\n    },\r\n\r\n    stateCallBack() {\r\n        let st = 0;\r\n        for (let i in this.wheelList) {\r\n            if (this.wheelList[i].status) {\r\n                st = 1;\r\n                break;\r\n            }\r\n        }\r\n        this.status = st;\r\n        if (this.status == 0) {\r\n            //结束当前轮盘\r\n            let rIndex = this.rollIndex;\r\n            this.lblUserCoin.string = (this.lotteryRes.userscore / 100).toFixed(2);\r\n            this.lblWinCoin.string = (this.lotteryRes.winscore / 100).toFixed(2);\r\n            this.freeGold += this.lotteryRes.winscore;\r\n            if (rIndex == this.rollIndex) {\r\n                this.playWinAnim();\r\n            }\r\n            this.extraNode.active = this.lotteryRes.viewarray.ADD_Free.bFlag;\r\n            this.extraNode.getChildByName('txt').getChildByName('New Label').getComponent(cc.Label).string = this.lotteryRes.viewarray.ADD_Free.nFreeTime;\r\n\r\n            if (this.lotteryRes.viewarray.getFreeTime.bFlag) {\r\n                if (this.freeTimes == 0) {\r\n                    this.bigWinBoo = true;\r\n                    this.auto = false;\r\n                    this.autoBtn.spriteFrame = this.spAtlas.getSpriteFrame(this.auto ? 'btn_tingzhi' : 'btn_zidong');\r\n                    this.freeTimes = this.lotteryRes.viewarray.getFreeTime.nFreeTime;\r\n                    this.bigWinResList = [...this.lotteryRes.viewarray.getFreeTime.nIndex];\r\n                    this.bigWinResList.map((currentValue, index, arr) => {\r\n                        this.bigWinResList[index] = ++currentValue;\r\n                    });\r\n                    this.audio.playFree();\r\n                    this.scheduleOnce(() => {\r\n                        this.closeShine();\r\n                        this.audio.playFreeWheel();\r\n                        this.bigWinNode.active = true;\r\n                        for (let i in this.freeWheelList) {\r\n                            this.freeWheelList[i].startRoll(this.bigWinResList[i]);\r\n                        }\r\n                    }, 3);\r\n                    this.scheduleOnce(() => {\r\n                        this.bigWinNode.active = false;\r\n                        this.shadowEf.play();\r\n                    }, 9);\r\n                    this.scheduleOnce(() => {\r\n                        this.startFreeGame();\r\n                    }, 10)\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    playWinAnim() {\r\n        //动画结束后自动roll\r\n        let hasWinBool = 0;\r\n        let allLine = [];\r\n        for (let i in this.lotteryRes.viewarray.nWinCards) {\r\n            if (this.lotteryRes.viewarray.nWinCards[i]) {\r\n                allLine.push(i);\r\n            }\r\n        }\r\n        let lines = this.lotteryRes.viewarray.nWinLinesDetail;\r\n        let rIndex = this.rollIndex;\r\n        let list = (this.freeTimes > 0 || this.stopFree) ? [allLine, ] : [allLine, ...lines];\r\n        hasWinBool = list.length - 1;\r\n\r\n        let animIndex = 0;\r\n        this.schedule(() => {\r\n            if (rIndex == this.rollIndex) {\r\n                this.closeShine();\r\n                for (let i = 0; i < 15; i++) {\r\n                    this.clsoeAnim(i % 5, parseInt(i / 5));\r\n                }\r\n                if (!!!list[animIndex]) {\r\n                    return;\r\n                }\r\n                for (let j in list[animIndex]) {\r\n                    this.showAnim(list[animIndex][j] % 5, parseInt(list[animIndex][j] / 5));\r\n                }\r\n                animIndex++;\r\n            }\r\n        }, 3, list.length, 0.01)\r\n\r\n\r\n        this.scheduleOnce(() => {\r\n            if (this.stopFree) {\r\n                this.stopFree = false;\r\n                this.stopFreeTimes();\r\n                this.closeShine();\r\n                this.auto = false;\r\n            }\r\n            if (this.freeTimes > 0) {\r\n                this.freeTimes--;\r\n                this.freeTimesNode.getChildByName('txt').getChildByName('New Label').getComponent(cc.Label).string = this.freeTimes;\r\n                if (this.freeTimes == 0) {\r\n                    this.stopFree = true;\r\n                }\r\n                this.auto && this.sendRoll();\r\n            }\r\n            if (rIndex == this.rollIndex) {\r\n                this.auto && this.freeTimes == 0 && this.sendRoll();\r\n            }\r\n        }, hasWinBool > 0 ? hasWinBool * 3 : 2)\r\n    },\r\n\r\n    //免费次数有关\r\n    startFreeGame() {\r\n        this.freeGold = 0;\r\n        for (let i in this.freeHideNode) {\r\n            this.freeHideNode[i].active = false;\r\n        }\r\n\r\n        for (let i in this.wheelList) {\r\n            this.wheelList[i].initWheel();\r\n        }\r\n        this.freeTimesNode.active = true;\r\n        this.freeTimesNode.getChildByName('txt').getChildByName('New Label').getComponent(cc.Label).string = this.freeTimes;\r\n        this.auto = true;\r\n        this.sendRoll();\r\n    },\r\n\r\n    stopFreeTimes() {\r\n        this.bigWinResultAnim.active = true;\r\n        let spList = this.bigWinResultAnim.getChildByName('s_egfo_meter_static').children;\r\n        let lbl = this.bigWinResultAnim.getChildByName('goldLable').getComponent(cc.Label);\r\n        lbl.string = (this.freeGold / 100).toFixed(2);\r\n        let showId = 0;\r\n        if (this.freeGold > 1000 && this.freeGold <= 20000) {\r\n            showId = 1;\r\n        } else if (this.freeGold > 20000 && this.freeGold <= 40000) {\r\n            showId = 2;\r\n        } else {\r\n            showId = 3;\r\n        }\r\n        for (let i in spList) {\r\n            spList[i].active = i == showId;\r\n        }\r\n        for (let i in this.freeHideNode) {\r\n            this.freeHideNode[i].active = true;\r\n        }\r\n\r\n        for (let i in this.wheelList) {\r\n            this.wheelList[i].initWheel();\r\n        }\r\n        this.freeTimesNode.active = false;\r\n    },\r\n\r\n    //0-5 0-2\r\n    showAnim(cols, index) {\r\n        let length = this.wheelList[cols].roleIdList.length;\r\n        this.wheelList[cols].rolePbList[length - 2 - index].getComponent(cc.Animation).play();\r\n        let nodeList = this.effectAnimPr.children;\r\n        nodeList[cols * 3 + index].active = true;\r\n        nodeList[cols * 3 + index].getComponent(cc.Animation).play();\r\n    },\r\n\r\n    clsoeAnim(cols, index) {\r\n        let length = this.wheelList[cols].roleIdList.length;\r\n        let anim = this.wheelList[cols].rolePbList[length - 2 - index].getComponent(cc.Animation);\r\n        anim.setCurrentTime(0);\r\n        anim.stop();\r\n        let nodeList = this.effectAnimPr.children;\r\n        nodeList[cols * 3 + index].active = false;\r\n    },\r\n\r\n    roll(list) {\r\n        this.status = 1;\r\n        let line = [];\r\n        for (let i = 0; i < 5; i++) {\r\n            line[i] = [];\r\n        }\r\n        for (let i in list) {\r\n            line[i % 5][2 - parseInt(i / 5)] = list[i];\r\n        }\r\n        for (let i in this.wheelList) {\r\n            this.wheelList[i].startRoll(...line[i]);\r\n        }\r\n    },\r\n\r\n    closeShine() {\r\n        let nodeList = this.effectAnimPr.children;\r\n        for (let i in nodeList) {\r\n            nodeList[i].active = false;\r\n        }\r\n    },\r\n\r\n    sendRoll() {\r\n        this.rollIndex++;\r\n        this.closeShine();\r\n        this.net.socket.emit('lottery', JSON.stringify({\r\n            bet: this.bet,\r\n            nBetList: [BET[this.bet] * BETNUM * 100, ]\r\n        }));\r\n    },\r\n\r\n    stopImmediately() {\r\n        if (!this.auto) {\r\n            for (let i in this.wheelList) {\r\n                this.wheelList[i].stopImmediately();\r\n            }\r\n        }\r\n    },\r\n\r\n\r\n    //大奖有关\r\n    closeDoorAnim() {\r\n        this.doorNode.active = true;\r\n        let chList = this.doorNode.children;\r\n        for (let i in chList) {\r\n            chList[i].getComponent(cc.Animation).play();\r\n        }\r\n\r\n    },\r\n});"]}