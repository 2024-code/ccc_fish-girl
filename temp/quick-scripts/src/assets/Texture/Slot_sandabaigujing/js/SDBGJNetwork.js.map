{"version":3,"sources":["assets\\Texture\\Slot_sandabaigujing\\js\\SDBGJNetwork.js"],"names":["cc","Class","Component","properties","onLoad","mainObj","node","getComponent","playerInfo","require","getInstant","audio","start","url","Lhjconfig","Server_IP","socket","io","connect","addEvent","on","emit","JSON","stringify","userid","playerId","gametype","sign","gameSign","data","changeResultJSON_Function","console","log","window","SDBGJ_LOBBYNET","disconnect","ResultCode","lotteryRes","parse","ResultData","roll","viewarray","nHandCards","status","freeCount","freeTimes","closeShine","startFreeGame","ret","sys","isNative","onDestroy"],"mappings":"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","sourceRoot":"/","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n\r\n    },\r\n\r\n    onLoad() {\r\n        this.mainObj = this.node.getComponent('SDBGJMain');\r\n        this.playerInfo = require(\"PlayerInfo\").getInstant;\r\n        this.audio = this.node.getComponent('SDBGJAudio');\r\n\r\n    },\r\n\r\n    start() {\r\n        this.url = Lhjconfig.Server_IP + ':15007';\r\n        this.socket = io.connect(this.url);\r\n        this.addEvent();\r\n    },\r\n\r\n\r\n    addEvent() {\r\n        this.socket.on('connected', () => {\r\n            this.socket.emit('LoginGame', JSON.stringify({\r\n                userid: this.playerInfo.playerId,\r\n                gametype: null,\r\n                sign: this.playerInfo.gameSign\r\n            }));\r\n        });\r\n\r\n        this.socket.on('loginGameResult', data => {\r\n            data = this.changeResultJSON_Function(data);\r\n            console.log('LoginGameResult:', data);\r\n            window.SDBGJ_LOBBYNET.disconnect();\r\n            this.socket.emit('LoginfreeCount');\r\n        });\r\n\r\n        this.socket.on('lotteryResult', data => {\r\n            data = this.changeResultJSON_Function(data);\r\n            console.log('lotteryResult:', data);\r\n            if (!!data.ResultCode && data.ResultCode == 1) {\r\n                this.mainObj.lotteryRes = JSON.parse(JSON.stringify(data.ResultData));\r\n                this.mainObj.roll(data.ResultData.viewarray.nHandCards);\r\n            } else {\r\n                this.mainObj.status = 0;\r\n            }\r\n        });\r\n        this.socket.on('LoginRoomResult', data => {\r\n            data = this.changeResultJSON_Function(data);\r\n            console.log('LoginRoomResult', data);\r\n            // self.canvas.onFreeTime(data.ResultData.freeCount);                    //调用刷新免费次数的方法 \r\n        });\r\n        this.socket.on('LoginfreeCountResult', data => {\r\n            data = this.changeResultJSON_Function(data);\r\n            console.log('LoginfreeCountResult:', data);\r\n            if (data.ResultCode == 1 && data.freeCount > 0) {\r\n                this.mainObj.freeTimes = data.freeCount - 1;\r\n                this.mainObj.closeShine();\r\n                this.mainObj.startFreeGame();\r\n            }\r\n        });\r\n    },\r\n\r\n    changeResultJSON_Function(ret) {\r\n        if (cc.sys.isNative) {\r\n            return JSON.parse(ret);\r\n        }\r\n        return ret;\r\n    },\r\n\r\n    onDestroy() {\r\n        this.socket.emit('cleanLineOut');\r\n    }\r\n});"]}