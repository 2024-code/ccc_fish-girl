{"version":3,"sources":["assets\\LaoHuJi\\module\\winCoins\\coinMove.js"],"names":["cc","Class","Component","properties","Distance","tooltip","Delay","Time","SetData","posStart","posEnd","_posStart","Vec2","x","Math","random","y","_posEnd","_direction","_move","_accMoveTime","node","scheduleOnce","anim","getComponent","Animation","playAdditive","update","dt","destroy","scale","move"],"mappings":";;;;;;AAAAA,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAGLC,EAAAA,UAAU,EAAE;AACRC,IAAAA,QAAQ,EAAE;AACN,iBAAS,EADH;AAENC,MAAAA,OAAO,EAAE;AAFH,KADF;AAKRC,IAAAA,KAAK,EAAE;AACH,iBAAS,GADN;AAEHD,MAAAA,OAAO,EAAE;AAFN,KALC;AASRE,IAAAA,IAAI,EAAE;AACF,iBAAS,GADP;AAEFF,MAAAA,OAAO,EAAE;AAFP;AATE,GAHP;AAkBLG,EAAAA,OAAO,EAAE,iBAAUC,QAAV,EAAoBC,MAApB,EAA4B;AACjC,SAAKC,SAAL,GAAiB,IAAIX,EAAE,CAACY,IAAP,CAAYH,QAAQ,CAACI,CAAT,GAAc,CAACC,IAAI,CAACC,MAAL,KAAgB,CAAhB,GAAoB,CAArB,IAA0B,KAAKX,QAAzD,EAAoEK,QAAQ,CAACO,CAAT,GAAc,CAACF,IAAI,CAACC,MAAL,KAAgB,CAAhB,GAAoB,CAArB,IAA0B,KAAKX,QAAjH,CAAjB;AACA,SAAKa,OAAL,GAAeP,MAAf;AACA,SAAKQ,UAAL,GAAkB,IAAIlB,EAAE,CAACY,IAAP,CAAY,KAAKK,OAAL,CAAaJ,CAAb,GAAiB,KAAKF,SAAL,CAAeE,CAA5C,EAA+C,KAAKI,OAAL,CAAaD,CAAb,GAAiB,KAAKL,SAAL,CAAeK,CAA/E,CAAlB;AACA,SAAKG,KAAL,GAAa,KAAb;AACA,SAAKC,YAAL,GAAoB,CAApB;AACA,SAAKC,IAAL,CAAUR,CAAV,GAAc,KAAKF,SAAL,CAAeE,CAA7B;AACA,SAAKQ,IAAL,CAAUL,CAAV,GAAc,KAAKL,SAAL,CAAeK,CAA7B;AAEA,SAAKM,YAAL,CAAkB,YAAY;AAC1B,WAAKH,KAAL,GAAa,IAAb;AACH,KAFD,EAEG,KAAKb,KAFR;AAIA,QAAIiB,IAAI,GAAG,KAAKC,YAAL,CAAkBxB,EAAE,CAACyB,SAArB,CAAX;AACAF,IAAAA,IAAI,CAACG,YAAL,CAAkB,WAAlB,EAdiC,CAcF;;AAC/BH,IAAAA,IAAI,CAACG,YAAL,CAAkB,UAAlB,EAfiC,CAeH;AACjC,GAlCI;AAoCLC,EAAAA,MAAM,EAAE,gBAAUC,EAAV,EAAc;AAClB,QAAI,KAAKT,KAAT,EAAgB;AACZ,WAAKC,YAAL,IAAqBQ,EAArB;;AACA,UAAI,KAAKR,YAAL,GAAoB,KAAKb,IAA7B,EAAmC;AAC/B,aAAKc,IAAL,CAAUR,CAAV,GAAc,KAAKI,OAAL,CAAaJ,CAA3B;AACA,aAAKQ,IAAL,CAAUL,CAAV,GAAc,KAAKC,OAAL,CAAaD,CAA3B;AACA,aAAKG,KAAL,GAAa,KAAb;AACA,aAAKE,IAAL,CAAUQ,OAAV;AACA;AACH;;AACD,UAAIC,KAAK,GAAG,KAAKV,YAAL,GAAoB,KAAKb,IAArC;AACA,UAAIwB,IAAI,GAAG,IAAI/B,EAAE,CAACY,IAAP,CAAYkB,KAAK,GAAG,KAAKZ,UAAL,CAAgBL,CAApC,EAAuCiB,KAAK,GAAG,KAAKZ,UAAL,CAAgBF,CAA/D,CAAX;AACA,WAAKK,IAAL,CAAUR,CAAV,GAAc,KAAKF,SAAL,CAAeE,CAAf,GAAmBkB,IAAI,CAAClB,CAAtC;AACA,WAAKQ,IAAL,CAAUL,CAAV,GAAc,KAAKL,SAAL,CAAeK,CAAf,GAAmBe,IAAI,CAACf,CAAtC;AACH;AACJ;AAnDI,CAAT","sourceRoot":"/","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        Distance: {\r\n            default: 60,\r\n            tooltip: \"在起点附近随机位置生成金币的最大距离\",\r\n        },\r\n        Delay: {\r\n            default: 0.4,\r\n            tooltip: \"从生成到开始移动的延迟（秒）\",\r\n        },\r\n        Time: {\r\n            default: 0.3,\r\n            tooltip: \"金币从起点到终点运动的总时间（秒）\",\r\n        },\r\n    },\r\n\r\n    SetData: function (posStart, posEnd) {\r\n        this._posStart = new cc.Vec2(posStart.x + ((Math.random() * 2 - 1) * this.Distance), posStart.y + ((Math.random() * 2 - 1) * this.Distance));\r\n        this._posEnd = posEnd;\r\n        this._direction = new cc.Vec2(this._posEnd.x - this._posStart.x, this._posEnd.y - this._posStart.y);\r\n        this._move = false;\r\n        this._accMoveTime = 0;\r\n        this.node.x = this._posStart.x;\r\n        this.node.y = this._posStart.y;\r\n\r\n        this.scheduleOnce(function () {\r\n            this._move = true;\r\n        }, this.Delay);\r\n\r\n        var anim = this.getComponent(cc.Animation);\r\n        anim.playAdditive('coinScale');//播放第一个动画\r\n        anim.playAdditive('coinSpin');//播放第二个动画,使用 playAdditive 播放动画时，不会停止其他动画的播放。如果还有其他动画正在播放，则同时会有多个动画进行播放。\r\n    },\r\n\r\n    update: function (dt) {\r\n        if (this._move) {\r\n            this._accMoveTime += dt;\r\n            if (this._accMoveTime > this.Time) {\r\n                this.node.x = this._posEnd.x;\r\n                this.node.y = this._posEnd.y;\r\n                this._move = false;\r\n                this.node.destroy();\r\n                return;\r\n            }\r\n            var scale = this._accMoveTime / this.Time;\r\n            var move = new cc.Vec2(scale * this._direction.x, scale * this._direction.y);\r\n            this.node.x = this._posStart.x + move.x;\r\n            this.node.y = this._posStart.y + move.y;\r\n        }\r\n    },\r\n});"]}