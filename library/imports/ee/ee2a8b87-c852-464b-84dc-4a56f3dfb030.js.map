{"version":3,"sources":["assets\\Texture\\game_saima\\saima.js"],"names":["cc","Class","Component","properties","Timeout","tooltip","Default_chip","bet_Zone","Node","bet_mask","times_lab","Label","LabelJinBi","time1_lab","time2_lab","PanelXinXi","NodeAudioParent","Prefab_HorseRacing","Prefab","Panel_qianbugou","Panel_qingxiazhu","Panel_jilu","scrollView_jilu","ScrollView","jilu_preb","onLoad","network","getComponent","playerInfo","require","getInstant","initGame","LabelArray_Bet","LabelArray_PeiLv","AnimationArray_run","_arrayBet","gameRecord","i","children","length","push","getChildByName","Animation","_chip","onBtnClick_ClearBet","showInfo","data","nowCoin","userCoin","str","times_id","toString","substring","string","toFixed","game_second","game_type","active","game_odd","setTime","log","start","audioEngine","stopAll","unschedule","timedown","time_openPrice","time_betClose","schedule","onBtnClick_Bet","event","index","RefreshLabel_Bet","state","isPlaying","play","startBets","closeBets","sendJsonList","nBetItem","parseInt","nBet","exchangeRate","socket","emit","JSON","stringify","getResult","res","win_card_index","panel","instantiate","SetData","win_list","win","parent","find","j","stop","RadioButtonClicked_chip","toggle","chip","onBtnClick_XinXi","onBtnClick_JiLu","content","removeAllChildren","item","initData","addChild","onBtnClick_KaiShi","duzhu","GetDuZhu","onToggleClick_ShengYin","customEventData","isChecked","AudioSource","volume","onBtnClick_BackHall","disconnect","director","loadScene","onBtnClick_ClosePanel","target"],"mappings":"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","sourceRoot":"/","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        Timeout: {\r\n            default: 10,\r\n            tooltip: \"连接超时倒计时(秒)\",\r\n        },\r\n        Default_chip: 10,//默认初始筹码\r\n        bet_Zone: cc.Node,//下注区域\r\n        bet_mask: cc.Node,//下注区遮罩\r\n        times_lab: cc.Label,//当前局号\r\n        LabelJinBi: cc.Label,//金币文字\r\n        time1_lab: cc.Label,\r\n        time2_lab: cc.Label,\r\n        PanelXinXi: cc.Node,//信息界面\r\n        NodeAudioParent: cc.Node,//所有音效的父节点\r\n\r\n        Prefab_HorseRacing: cc.Prefab,//跑马界面的预制件\r\n        Panel_qianbugou: cc.Node, //钱不够界面\r\n        Panel_qingxiazhu: cc.Node,//请下注界面\r\n        Panel_jilu: cc.Node,//开奖记录界面\r\n        scrollView_jilu: cc.ScrollView,\r\n        jilu_preb: cc.Prefab,\r\n    },\r\n\r\n    onLoad: function () {\r\n        this.network = this.getComponent('sm_Network');\r\n        this.playerInfo = require(\"PlayerInfo\").getInstant;\r\n        this.initGame();\r\n    },\r\n\r\n    initGame() {\r\n        this.LabelArray_Bet = [];//下注文本数组\r\n        this.LabelArray_PeiLv = [];//赔率文本数组\r\n        this.AnimationArray_run = [];//奔跑动画数组\r\n        this._arrayBet = [];\r\n        this.gameRecord = null;\r\n        //动态添加下注节点\r\n        for (let i = 0; i < this.bet_Zone.children.length; i++) {\r\n            this.LabelArray_Bet.push(this.bet_Zone.children[i].getChildByName(\"下注\").getComponent(cc.Label));\r\n            this.LabelArray_PeiLv.push(this.bet_Zone.children[i].getChildByName(\"赔率\").getComponent(cc.Label));\r\n            this.AnimationArray_run.push(this.bet_Zone.children[i].getChildByName(\"动画\").getComponent(cc.Animation));\r\n            this._arrayBet.push(0);\r\n        }\r\n\r\n        this._chip = this.Default_chip;//初始筹码\r\n        this.onBtnClick_ClearBet();\r\n    },\r\n\r\n    showInfo(data) {\r\n        this.nowCoin = this.network.userCoin;\r\n        let str = data.times_id.toString();\r\n        this.times_id = str.substring(str.length - 4, str.length);\r\n        this.times_lab.string = this.times_id;\r\n        this.LabelJinBi.string = this.nowCoin.toFixed(2);\r\n        this.game_second = data.game_second;\r\n        this.game_type = data.game_type;\r\n        this.bet_mask.active = this.game_type > 1;//游戏状态 1:下注  2:封盘  3:开奖\r\n        for (let i in this.LabelArray_PeiLv) {\r\n            this.LabelArray_PeiLv[i].string = `1陪${data.game_odd[i]}`;\r\n        }\r\n        this.setTime();\r\n        cc.log(data.game_second, data.game_type);\r\n    },\r\n\r\n    start: function () {\r\n        cc.audioEngine.stopAll();\r\n    },\r\n\r\n    setTime() {\r\n        this.unschedule(this.timedown);\r\n        if (this.network.time_openPrice > this.game_second) {\r\n            this.time1_lab.string = (this.network.time_openPrice - this.game_second) + \"秒\";\r\n        } else {\r\n            this.time1_lab.string = \"0秒\";\r\n        }\r\n\r\n        if (this.network.time_betClose > this.game_second) {\r\n            this.time2_lab.string = (this.network.time_betClose - this.game_second) + \"秒\";\r\n        } else {\r\n            this.time2_lab.string = \"0秒\";\r\n        }\r\n        this.timedown = () => {\r\n            this.game_second += 1;\r\n            if (this.network.time_openPrice > this.game_second) {\r\n                this.time1_lab.string = (this.network.time_openPrice - this.game_second) + \"秒\";\r\n            } else {\r\n                this.time1_lab.string = \"0秒\";\r\n            }\r\n\r\n            if (this.network.time_betClose > this.game_second) {\r\n                this.time2_lab.string = (this.network.time_betClose - this.game_second) + \"秒\";\r\n            } else {\r\n                this.time2_lab.string = \"0秒\";\r\n            }\r\n        }\r\n        this.schedule(this.timedown, 1);\r\n    },\r\n\r\n    //下注\r\n    onBtnClick_Bet: function (event, index) {\r\n        //刷新当前金币数\r\n        if (this.nowCoin < this._chip) {\r\n            this.Panel_qianbugou.active = true;\r\n            return;\r\n        }\r\n        this.nowCoin -= this._chip;\r\n        this.LabelJinBi.string = this.nowCoin.toFixed(2);\r\n\r\n        this._arrayBet[index] += this._chip;//增加下注\r\n        this.RefreshLabel_Bet(index);//刷新下注文本\r\n        //播放奔跑动画\r\n        if (this.AnimationArray_run[index].state && this.AnimationArray_run[index].state.isPlaying) {\r\n            return;\r\n        }\r\n        this.AnimationArray_run[index].state = this.AnimationArray_run[index].play();\r\n    },\r\n    //开始下注\r\n    startBets(data) {\r\n        this.showInfo(data);\r\n        this.onBtnClick_ClearBet();\r\n        this.bet_mask.active = false;\r\n    },\r\n    //停止下注\r\n    closeBets() {\r\n        this.bet_mask.active = true;\r\n        let sendJsonList = [];\r\n        for (let i in this._arrayBet) {\r\n            if (this._arrayBet[i] > 0) {\r\n                sendJsonList.push({\r\n                    nBetItem: parseInt(i),\r\n                    nBet: this._arrayBet[i] * this.playerInfo.exchangeRate,\r\n                })\r\n            }\r\n        }\r\n        if (sendJsonList.length > 0) {\r\n            this.network.socket.emit('lottery', JSON.stringify(sendJsonList));\r\n        }\r\n    },\r\n    //开奖结果\r\n    getResult(res) {\r\n        cc.log(`胜利的是${res.win_card_index + 1}号`);\r\n        // let getWinCoin = res.win / this.playerInfo.exchangeRate - this.GetDuZhu() > 0 ? res.win / this.playerInfo.exchangeRate - this.GetDuZhu() > 0 : 0;\r\n        var panel = cc.instantiate(this.Prefab_HorseRacing);//克隆\r\n        panel.getComponent(\"paoma\").SetData(res.win_list, res.win / this.playerInfo.exchangeRate);\r\n        panel.parent = cc.find(\"Canvas\");\r\n    },\r\n    //点击清除下注按钮\r\n    onBtnClick_ClearBet: function () {\r\n        for (var i = 0; i < this._arrayBet.length; i++) {\r\n            this._arrayBet[i] = 0;//下注清零\r\n            this.RefreshLabel_Bet(i);//下注文本赋值“0”\r\n        }\r\n        //停止所有奔跑动画\r\n        for (var j = 0; j < this.AnimationArray_run.length; j++) {\r\n            this.AnimationArray_run[j].state = this.AnimationArray_run[j].stop();\r\n        }\r\n    },\r\n\r\n    //换筹码\r\n    RadioButtonClicked_chip: function (toggle, chip) {\r\n        this._chip = parseInt(chip);\r\n    },\r\n\r\n    //刷新下注文本\r\n    RefreshLabel_Bet: function (index) {\r\n        if (this._arrayBet[index] > 0) {\r\n            this.LabelArray_Bet[index].string = this._arrayBet[index].toFixed(2);\r\n        }\r\n        else {\r\n            this.LabelArray_Bet[index].string = \"0.00\";\r\n        }\r\n\r\n    },\r\n\r\n    //点击信息按钮\r\n    onBtnClick_XinXi: function () {\r\n        this.PanelXinXi.active = !this.PanelXinXi.active;\r\n    },\r\n\r\n    //点击开奖记录按钮\r\n    onBtnClick_JiLu: function () {\r\n        this.Panel_jilu.active = !this.Panel_jilu.active;\r\n        this.scrollView_jilu.content.removeAllChildren();\r\n        for (let i = 0; i < this.gameRecord.length; i++) {\r\n            let item = new cc.instantiate(this.jilu_preb);\r\n            item.getComponent(\"sm_recordItem\").initData(this.gameRecord[i]);\r\n            this.scrollView_jilu.content.addChild(item);\r\n        }\r\n    },\r\n\r\n    //点击开始按钮\r\n    onBtnClick_KaiShi: function () {\r\n        var duzhu = this.GetDuZhu();\r\n        if (duzhu <= 0) {\r\n            this.Panel_qingxiazhu.active = true;//请下注\r\n            return;\r\n        }\r\n        else {\r\n            // this.stateMachine.Input_Start(0.01, this.Timeout);\r\n        }\r\n    },\r\n\r\n    //点击声音开关\r\n    onToggleClick_ShengYin: function (toggle, customEventData) {\r\n        if (toggle.isChecked) {\r\n            for (var i = 0; i < this.NodeAudioParent.children.length; i++) {\r\n                this.NodeAudioParent.children[i].getComponent(cc.AudioSource).volume = 1;\r\n            }\r\n        }\r\n        else {\r\n            for (var i = 0; i < this.NodeAudioParent.children.length; i++) {\r\n                this.NodeAudioParent.children[i].getComponent(cc.AudioSource).volume = 0;\r\n            }\r\n        }\r\n    },\r\n\r\n    //点击返回大厅按钮\r\n    onBtnClick_BackHall: function () {\r\n        this.network.socket.disconnect();\r\n        cc.director.loadScene(\"LobbyMain\");\r\n    },\r\n\r\n    //计算得到下注金额\r\n    GetDuZhu: function () {\r\n        var duzhu = 0;\r\n        for (var i = 0; i < this._arrayBet.length; i++) {\r\n            duzhu += this._arrayBet[i];\r\n        }\r\n        return duzhu;\r\n    },\r\n\r\n    //点击关闭界面按钮\r\n    onBtnClick_ClosePanel: function (event, customEventData) {\r\n        event.target.parent.active = false;\r\n    }\r\n});"]}