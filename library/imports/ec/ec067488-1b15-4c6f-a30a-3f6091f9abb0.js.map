{"version":3,"sources":["assets\\Script\\senlinwuhui\\SH_Main.js"],"names":["ANIMAILSLIST","OFFSETANGLE","cc","Class","Component","properties","userNameLbl","Label","userCoinLbl","userHead","Sprite","outerWheel","Node","innerWheel","colorCardPr","timerLbl","betTimerLbl","betPr","oddPr","oddUI","innerWheelNode","shineAnim","Animation","wheelStarNode","bgAnim","resultNode","redAnimSp","SpriteFrame","greenAnimSp","yellowAnimSp","resultPb","Prefab","playMask","nextTime_lab","historyNode","onLoad","network","getComponent","audio","colorList","betList","selBet","curOdd","otherOdd","lastOdd","curOddCount","allowBet","start","colorCardsList","children","oddNode","getChildByName","play","showInfo","string","userName","userCoin","toFixed","Helper","loadHead","headUrl","sp","spriteFrame","showNextTime","i","gameTime","cb","unschedule","schedule","loginInitColor","index","active","startBets","playBgm","initBg","playStartBet","node","j","openOddUI","rfOdds","bool","runAction","moveTo","v2","sequence","callFunc","closeBets","JSON","stringify","sendJsonList","push","nBetItem","parseInt","strBetValue","nBet","length","socket","emit","getResult","res","stop","resultType","choice_big_win","resultScore","win","resultAnimal","aid","win_card","color","win_color","outerAngle","win_color_index","win_card_index","innerAngle","win_card_song","win_color_song","win_color_index_song","win_card_index_song","playDingAudio","tween","call","delay","runWheel","showEnd","myScore","winNode","loseNode","detailNode","sprite","pr","removeAllChildren","pb","instantiate","x","addChild","pb1","aid1","color1","sp1","update","dt","t","Date","getTime","timer","offsetOuter","rotation","rotateBy","easing","easeCubicActionInOut","offsetInner","onClick","ev","args","playButton","disconnect","director","loadScene","rebet","playBet","log","odd","parse","oddCount","onToggle"],"mappings":"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","sourceRoot":"/","sourcesContent":["// 0红 1绿 2黄\r\n// 0狮子 1熊猫 2猴子 3兔子\r\nconst ANIMAILSLIST = [0, 1, 2, 3, 2, 0, 3, 2, 3, 1, 3, 2, 0, 1, 2, 3, 2, 0, 3, 2, 3, 1, 3, 2];\r\nconst OFFSETANGLE = 15;\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        userNameLbl: cc.Label,\r\n        userCoinLbl: cc.Label,\r\n        userHead: cc.Sprite,\r\n        outerWheel: cc.Node,\r\n        innerWheel: cc.Node,\r\n        colorCardPr: cc.Node,\r\n        timerLbl: cc.Label,\r\n        betTimerLbl: cc.Label,\r\n        betPr: cc.Node,\r\n        oddPr: cc.Node,\r\n        oddUI: cc.Node,\r\n        innerWheelNode: cc.Node,\r\n        shineAnim: cc.Animation,\r\n        wheelStarNode: cc.Node,\r\n        bgAnim: cc.Animation,\r\n        resultNode: cc.Node,\r\n        redAnimSp: [cc.SpriteFrame],\r\n        greenAnimSp: [cc.SpriteFrame],\r\n        yellowAnimSp: [cc.SpriteFrame],\r\n        resultPb: cc.Prefab,\r\n        playMask: cc.Node,\r\n        nextTime_lab: cc.Label,\r\n        historyNode: cc.Node,\r\n    },\r\n\r\n    onLoad() {\r\n        this.network = this.getComponent('SH_Network');\r\n        this.audio = this.getComponent('SH_Audio');\r\n        this.colorList = []; // wheel color data\r\n        this.betList = []; // animals bet  [[],[],[],[]]\r\n        this.selBet = 2; //bet toggle\r\n        this.curOdd = []; // odd\r\n        this.otherOdd = []; //other's curodd\r\n        this.lastOdd = null; // last odd\r\n        this.curOddCount = 0; // ood count\r\n        this.allowBet = false;\r\n    },\r\n\r\n    start() {\r\n        this.colorCardsList = this.colorCardPr.children;\r\n        this.oddNode = [\r\n            [\r\n                this.oddPr.getChildByName('01').children,\r\n                this.oddPr.getChildByName('05').children,\r\n                this.oddPr.getChildByName('09').children,\r\n            ],\r\n            [\r\n                this.oddPr.getChildByName('02').children,\r\n                this.oddPr.getChildByName('06').children,\r\n                this.oddPr.getChildByName('10').children,\r\n            ],\r\n            [\r\n                this.oddPr.getChildByName('03').children,\r\n                this.oddPr.getChildByName('07').children,\r\n                this.oddPr.getChildByName('11').children,\r\n            ],\r\n            [\r\n                this.oddPr.getChildByName('04').children,\r\n                this.oddPr.getChildByName('08').children,\r\n                this.oddPr.getChildByName('12').children,\r\n            ],\r\n        ]\r\n        this.shineAnim.play();\r\n    },\r\n\r\n    showInfo() {\r\n        this.userNameLbl.string = this.network.userName;\r\n        this.userCoinLbl.string = this.network.userCoin.toFixed(2);\r\n        Helper.loadHead(this.network.headUrl, sp => {\r\n            this.userHead.spriteFrame = sp;\r\n        });\r\n    },\r\n\r\n    showNextTime() {\r\n        let i = this.network.gameTime;\r\n        this.nextTime_lab.string = \"距离下一轮：\" + (60 - i);\r\n        let cb = () => {\r\n            i++;\r\n            this.nextTime_lab.string = \"距离下一轮：\" + (60 - i);\r\n            if (i == 60) {\r\n                this.unschedule(cb);\r\n            }\r\n        };\r\n        this.schedule(cb, 1);\r\n    },\r\n\r\n    loginInitColor() {\r\n        let index = 0;\r\n        for (let i in this.colorCardsList) {\r\n            this.colorCardsList[i].getChildByName('02').active = this.colorList[index] == 2;\r\n            this.colorCardsList[i].getChildByName('03').active = this.colorList[index] == 1;\r\n            index++;\r\n        }\r\n    },\r\n\r\n\r\n    startBets() {\r\n        this.audio.playBgm(0);\r\n        this.playMask.active = false;\r\n        this.resultNode.active = false;\r\n        this.initBg();\r\n        this.shineAnim.play();\r\n        this.audio.playStartBet();\r\n        this.showInfo();\r\n        this.loginInitColor();\r\n        this.timerLbl.node.active = true;\r\n        this.curOddCount = 0;\r\n        for (let i in this.betList) {\r\n            this.curOdd[i] = [];\r\n            this.otherOdd[i] = [];\r\n            for (let j in this.betList[i]) {\r\n                this.oddNode[i][j][1].getComponent(cc.Label).string = 'X' + this.betList[i][j];\r\n                this.oddNode[i][j][2].getComponent(cc.Label).string = '0';\r\n                this.oddNode[i][j][3].getComponent(cc.Label).string = '0';\r\n                this.curOdd[i][j] = 0;\r\n                this.otherOdd[i][j] = 0;\r\n            }\r\n        }\r\n        this.allowBet = true;\r\n        this.openOddUI(true);\r\n    },\r\n\r\n    rfOdds() {\r\n        for (let i in this.curOdd) {\r\n            for (let j in this.curOdd[i]) {\r\n                this.oddNode[i][j][2].getComponent(cc.Label).string = this.curOdd[i][j];\r\n                this.oddNode[i][j][3].getComponent(cc.Label).string = this.otherOdd[i][j];\r\n            }\r\n        }\r\n    },\r\n\r\n    openOddUI(bool) {\r\n        if (bool && this.allowBet) {\r\n            if (!this.oddUI.active) {\r\n                this.oddUI.active = true;\r\n                this.oddUI.runAction(cc.moveTo(0.2, cc.v2(0, 64.5)))\r\n            }\r\n        } else {\r\n            if (this.oddUI.active) {\r\n                this.oddUI.runAction(cc.sequence(cc.moveTo(0.2, cc.v2(0, 1000)), cc.callFunc(() => {\r\n                    this.oddUI.active = false;\r\n                })))\r\n            }\r\n        }\r\n    },\r\n\r\n    closeBets() {\r\n        this.openOddUI(false);\r\n        this.allowBet = false;\r\n        this.lastOdd = JSON.stringify(this.curOdd);\r\n        let sendJsonList = [];\r\n        for (let i in this.curOdd) {\r\n            for (let j in this.curOdd[i]) {\r\n                if (this.curOdd[i][j] > 0) {\r\n                    sendJsonList.push({\r\n                        nBetItem: parseInt(i),\r\n                        strBetValue: parseInt(j),\r\n                        nBet: this.curOdd[i][j] * 100,\r\n                    })\r\n                }\r\n            }\r\n        }\r\n        if (sendJsonList.length > 0) {\r\n            this.network.socket.emit('lottery', JSON.stringify(sendJsonList));\r\n        }\r\n    },\r\n\r\n    getResult(res) {\r\n        this.audio.playBgm(1);\r\n        this.shineAnim.stop();\r\n        this.timerLbl.node.active = false;\r\n        this.resultType = res.choice_big_win; //-1,0 送灯,1 闪电\r\n        this.resultScore = (res.win / 100).toFixed(2);\r\n        this.resultAnimal = [];\r\n        this.resultAnimal.push({\r\n            aid: res.win_card,\r\n            color: res.win_color,\r\n            outerAngle: 15 * (24 + res.win_color_index - res.win_card_index),\r\n            innerAngle: 15 * res.win_color_index\r\n        })\r\n\r\n        if (this.resultType == 0) {\r\n            this.resultAnimal.push({\r\n                aid: res.win_card_song,\r\n                color: res.win_color_song,\r\n                outerAngle: 15 * (24 + res.win_color_index_song - res.win_card_index_song),\r\n                innerAngle: 15 * res.win_color_index_song\r\n            })\r\n        }\r\n        this.audio.playDingAudio();\r\n        if (this.resultAnimal.length == 1) {\r\n            cc.tween(this.node).call(() => {\r\n                this.innerWheelNode.getChildByName('开启').active = true;\r\n                this.innerWheelNode.getChildByName('开启').getComponent(cc.Animation).play();\r\n            }).delay(1).call(() => {\r\n                this.runWheel(this.resultAnimal[0].outerAngle, this.resultAnimal[0].innerAngle, this.resultAnimal[0].color);\r\n            }).delay(6).call(() => {\r\n                this.innerWheelNode.getChildByName('开启').active = false;\r\n                this.innerWheelNode.getChildByName('关闭').active = true;\r\n                this.innerWheelNode.getChildByName('关闭').getComponent(cc.Animation).play();\r\n            }).delay(1).call(() => {\r\n                this.showEnd();\r\n            }).start();\r\n        } else if (this.resultAnimal.length == 2) {\r\n            cc.tween(this.node).call(() => {\r\n                this.innerWheelNode.getChildByName('开启').active = true;\r\n                this.innerWheelNode.getChildByName('开启').getComponent(cc.Animation).play();\r\n            }).delay(1).call(() => {\r\n                this.runWheel(this.resultAnimal[0].outerAngle, this.resultAnimal[0].innerAngle, this.resultAnimal[0].color);\r\n            }).delay(7).call(() => {\r\n                this.runWheel(this.resultAnimal[1].outerAngle, this.resultAnimal[1].innerAngle, this.resultAnimal[1].color);\r\n            }).delay(13).call(() => {\r\n                this.innerWheelNode.getChildByName('开启').active = false;\r\n                this.innerWheelNode.getChildByName('关闭').active = true;\r\n                this.innerWheelNode.getChildByName('关闭').getComponent(cc.Animation).play();\r\n            }).delay(1).call(() => {\r\n                this.showEnd();\r\n            }).start();\r\n        }\r\n    },\r\n\r\n    showEnd() {\r\n        this.audio.playBgm(0);\r\n        if (this.playMask.active) {\r\n            return;\r\n        }\r\n        this.userCoinLbl.string = this.network.userCoin.toFixed(2);\r\n        this.resultNode.active = true;\r\n        let myScore = this.resultNode.getChildByName('slwh_game_win_jbjs_bg').getChildByName('New Label');\r\n        myScore.getComponent(cc.Label).string = this.resultScore;\r\n        let winNode = this.resultNode.getChildByName('slwh_game_win_jbjs_bg').getChildByName('slwh_game_win_txt1');\r\n        let loseNode = this.resultNode.getChildByName('slwh_game_win_jbjs_bg').getChildByName('slwh_game_win_txt2');\r\n        winNode.active = this.resultScore > 0;\r\n        loseNode.active = this.resultNode < 0;\r\n\r\n        let detailNode = this.resultNode.getChildByName('detail').children;\r\n        let index = 0;\r\n        for (let i in this.curOdd) {\r\n            for (let j in this.curOdd[i]) {\r\n                if (this.curOdd[i][j] > 0) {\r\n                    detailNode[index].active = true;\r\n                    let sp = null;\r\n                    if (j == 0) {\r\n                        sp = this.redAnimSp[i];\r\n                    } else if (j == 1) {\r\n                        sp = this.greenAnimSp[i];\r\n                    } else if (j == 2) {\r\n                        sp = this.yellowAnimSp[i];\r\n                    }\r\n                    let sprite = detailNode[index].getChildByName('slwh_game_greenlion_8');\r\n                    sprite.getComponent(cc.Sprite).spriteFrame = sp;\r\n                    sprite.getChildByName('New Label').getComponent(cc.Label).string = this.curOdd[i][j];\r\n\r\n                } else {\r\n                    detailNode[index].active = false;\r\n                }\r\n                index++;\r\n            }\r\n        }\r\n        let pr = this.resultNode.getChildByName('slwh_game_win_blkj_bg');\r\n        pr.removeAllChildren();\r\n        if (this.resultType == 0) {\r\n            let pb = cc.instantiate(this.resultPb);\r\n            let aid = this.resultAnimal[0].aid;\r\n            let color = this.resultAnimal[0].color;\r\n            let sp = null;\r\n            if (color == 0) {\r\n                sp = this.redAnimSp[aid];\r\n            } else if (color == 1) {\r\n                sp = this.greenAnimSp[aid];\r\n            } else if (color == 2) {\r\n                sp = this.yellowAnimSp[aid];\r\n            }\r\n            pb.getChildByName('sprite').getComponent(cc.Sprite).spriteFrame = sp;\r\n            pb.getChildByName('oddLbl').getComponent(cc.Label).string = 'X' + this.betList[aid][color];\r\n            pb.x = -90;\r\n            pr.addChild(pb);\r\n\r\n            let pb1 = cc.instantiate(this.resultPb);\r\n            let aid1 = this.resultAnimal[1].aid;\r\n            let color1 = this.resultAnimal[1].color;\r\n            let sp1 = null;\r\n            if (color1 == 0) {\r\n                sp1 = this.redAnimSp[aid1];\r\n            } else if (color1 == 1) {\r\n                sp1 = this.greenAnimSp[aid1];\r\n            } else if (color1 == 2) {\r\n                sp1 = this.yellowAnimSp[aid1];\r\n            }\r\n            pb1.getChildByName('sprite').getComponent(cc.Sprite).spriteFrame = sp1;\r\n            pb1.getChildByName('oddLbl').getComponent(cc.Label).string = 'X' + this.betList[aid1][color1];\r\n            pb1.x = 90;\r\n            pr.addChild(pb1);\r\n        } else {\r\n            let pb = cc.instantiate(this.resultPb);\r\n            let aid = this.resultAnimal[0].aid;\r\n            let color = this.resultAnimal[0].color;\r\n            let sp = null;\r\n            if (color == 0) {\r\n                sp = this.redAnimSp[aid];\r\n            } else if (color == 1) {\r\n                sp = this.greenAnimSp[aid];\r\n            } else if (color == 2) {\r\n                sp = this.yellowAnimSp[aid];\r\n            }\r\n            pb.getChildByName('sprite').getComponent(cc.Sprite).spriteFrame = sp;\r\n            pb.getChildByName('oddLbl').getComponent(cc.Label).string = 'X' + this.betList[aid][color];\r\n            pb.x = 0;\r\n            pr.addChild(pb);\r\n        }\r\n    },\r\n\r\n    update(dt) {\r\n        if (this.timerLbl.node.active) {\r\n            let t = parseInt(new Date().getTime() / 1000 - this.network.timer);\r\n            this.timerLbl.string = 30 - t > 0 ? 30 - t : 0;\r\n            this.betTimerLbl.string = 30 - t > 0 ? 30 - t : 0;\r\n        }\r\n    },\r\n\r\n    initBg() {\r\n        this.bgAnim.node.getChildByName('bg_yellow').active = false;\r\n        this.bgAnim.node.getChildByName('bg_red').active = false;\r\n        this.bgAnim.node.getChildByName('bg_green').active = false;\r\n    },\r\n\r\n    runWheel(outerAngle, innerAngle, color) {\r\n        this.initBg();\r\n        let offsetOuter = outerAngle - this.outerWheel.rotation;\r\n        offsetOuter = offsetOuter < 0 ? 360 + offsetOuter : offsetOuter;\r\n        offsetOuter += 360 * 3;\r\n        this.outerWheel.runAction(cc.sequence(cc.rotateBy(5, offsetOuter).easing(cc.easeCubicActionInOut(3.0)), cc.callFunc(() => {\r\n            this.outerWheel.rotation = outerAngle % 360;\r\n        })));\r\n\r\n        this.wheelStarNode.runAction(cc.rotateBy(5, offsetOuter).easing(cc.easeCubicActionInOut(3.0)));\r\n\r\n        let offsetInner = innerAngle - this.innerWheel.rotation;\r\n        offsetInner = offsetInner < 0 ? 360 + offsetInner : offsetInner;\r\n        offsetInner -= 360 * 3;\r\n        this.innerWheel.runAction(cc.sequence(cc.rotateBy(5, offsetInner).easing(cc.easeCubicActionInOut(3.0)), cc.callFunc(() => {\r\n            this.innerWheel.rotation = innerAngle % 360;\r\n            let colorList = ['bgRed', 'bgGreen', 'bgYellow'];\r\n            this.bgAnim.play(colorList[color]);\r\n        })));\r\n    },\r\n\r\n    onClick(ev, args) {\r\n        if (args == 'home') {\r\n            this.audio.playButton();\r\n            this.network.socket.disconnect();\r\n            cc.director.loadScene(\"LobbyMain\");\r\n        } else if (args == 'help') {\r\n            this.audio.playButton();\r\n        } else if (args == 'closeOddUI') {\r\n            this.audio.playButton();\r\n            this.openOddUI(false);\r\n        } else if (args == 'openOddUI') {\r\n            this.audio.playButton();\r\n            this.openOddUI(true);\r\n        } else if (args == 'rebet') {\r\n            this.rebet();\r\n        } else if (args == 'continue') {\r\n            this.audio.playButton();\r\n            this.resultNode.active = false;\r\n        } else {\r\n            this.audio.playBet();\r\n            cc.log('下注args:' + this.selBet);\r\n            if (this.selBet + this.curOdd[args[0]][args[1]] <= 3000 && this.selBet <= this.network.userCoin) {\r\n                this.curOdd[args[0]][args[1]] += this.selBet;\r\n                this.curOddCount += this.selBet;\r\n                this.rfOdds();\r\n                this.network.userCoin -= this.selBet;\r\n                this.userCoinLbl.string = this.network.userCoin.toFixed(2);\r\n            } else {\r\n                cc.log('超过最大下注额度');\r\n            }\r\n        }\r\n    },\r\n\r\n    rebet() {\r\n        if (this.lastOdd && this.curOddCount == 0) {\r\n            let odd = JSON.parse(this.lastOdd);\r\n            let oddCount = 0;\r\n            for (let i in odd) {\r\n                for (let j in odd) {\r\n                    if (odd[i][j] > 0) {\r\n                        oddCount += odd[i][j];\r\n                    }\r\n                }\r\n            }\r\n            if (oddCount <= this.network.userCoin) {\r\n                this.audio.playBet();\r\n                this.curOdd = odd;\r\n                this.curOddCount = oddCount;\r\n            }\r\n            this.rfOdds();\r\n        }\r\n    },\r\n\r\n    onToggle(ev, args) {\r\n        this.audio.playButton();\r\n        this.selBet = parseInt(args);\r\n    },\r\n});"]}