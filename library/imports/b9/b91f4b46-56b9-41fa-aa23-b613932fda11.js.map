{"version":3,"sources":["assets\\Script\\Lobby\\LobbyBank.js"],"names":["cc","Class","Component","properties","com_bank_childNode","Node","gift_id","EditBox","gift_coin","gift_pwd","gift_playerCoin","Label","gift_bankCoin","select_id","select_userCoin","select_userId","save_coin","save_playerCoin","save_bankCoin","load_coin","load_pwd","load_playerCoin","load_bankCoin","update_pwd","update_newpwd","update_newpwd2","onLoad","netWork","require","playerInfo","getInstant","lobbyMain","find","getComponent","start","updateView","string","playerCoin","toFixed","playerBankCoin","exchangeRate","closePanelClick","node","active","bankToggleClick","target","index","i","parseInt","showBankUI","length","bank_giftClick","info","sendUserId","sendCoin","pwd","socket","emit","bank_gift_reSet_Click","bank_selectClick","userid","showSelectCoin","res","userCoin","userId","bank_save_reSet_Click","bank_save_chooseCoinClick","coin","bank_save_commit_Click","parseFloat","saveCoin","bank_load_reSet_Click","bank_load_chooseCoinClick","bank_load_commit_Click","bank_update_commit_Click","newPwd","showMessagebox_Function"],"mappings":"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","sourceRoot":"/","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        com_bank_childNode: [cc.Node],//银行子界面\r\n        gift_id: cc.EditBox,\r\n        gift_coin: cc.EditBox,\r\n        gift_pwd: cc.EditBox,\r\n        gift_playerCoin: cc.Label,\r\n        gift_bankCoin: cc.Label,\r\n        select_id: cc.EditBox,\r\n        select_userCoin: cc.Label,\r\n        select_userId: cc.Label,\r\n        save_coin: cc.EditBox,\r\n        save_playerCoin: cc.Label,\r\n        save_bankCoin: cc.Label,\r\n        load_coin: cc.EditBox,\r\n        load_pwd: cc.EditBox,\r\n        load_playerCoin: cc.Label,\r\n        load_bankCoin: cc.Label,\r\n        update_pwd: cc.EditBox,\r\n        update_newpwd: cc.EditBox,\r\n        update_newpwd2: cc.EditBox,\r\n    },\r\n\r\n\r\n    onLoad() {\r\n        this.netWork = require(\"LobbyNetWork\");\r\n        this.playerInfo = require(\"PlayerInfo\").getInstant;\r\n        this.lobbyMain = cc.find('Canvas').getComponent(\"LobbyMain\");\r\n    },\r\n\r\n    start() {\r\n        this.updateView();\r\n    },\r\n\r\n    updateView() {\r\n        if (!this.playerInfo) {\r\n            this.playerInfo = require(\"PlayerInfo\").getInstant;\r\n        }\r\n        this.save_playerCoin.string = this.playerInfo.playerCoin.toFixed(2);\r\n        this.save_bankCoin.string = (this.playerInfo.playerBankCoin / this.playerInfo.exchangeRate).toFixed(2);\r\n        this.load_playerCoin.string = this.playerInfo.playerCoin.toFixed(2);\r\n        this.load_bankCoin.string = (this.playerInfo.playerBankCoin / this.playerInfo.exchangeRate).toFixed(2);\r\n    },\r\n    //关闭银行界面\r\n    closePanelClick() {\r\n        this.node.active = false;\r\n    },\r\n    //--------------------------银行UI刷新--------------------------\r\n    bankToggleClick(target, index) {\r\n        let i = parseInt(index);\r\n        this.showBankUI(i);\r\n    },\r\n\r\n    showBankUI(index) {\r\n        for (let i = 0; i < this.com_bank_childNode.length; i++) {\r\n            this.com_bank_childNode[i].active = false;\r\n        }\r\n        this.com_bank_childNode[index].active = true;\r\n        switch (index) {\r\n            case 0://存入界面\r\n                this.save_playerCoin.string = this.playerInfo.playerCoin.toFixed(2);\r\n                this.save_bankCoin.string = (this.playerInfo.playerBankCoin / this.playerInfo.exchangeRate).toFixed(2);\r\n                break;\r\n            case 1://取款界面\r\n                this.load_playerCoin.string = this.playerInfo.playerCoin.toFixed(2);\r\n                this.load_bankCoin.string = (this.playerInfo.playerBankCoin / this.playerInfo.exchangeRate).toFixed(2);\r\n                break;\r\n            case 2://赠送界面\r\n                this.gift_playerCoin.string = this.playerInfo.playerCoin.toFixed(2);\r\n                this.gift_bankCoin.string = (this.playerInfo.playerBankCoin / this.playerInfo.exchangeRate).toFixed(2);\r\n                break;\r\n            case 5://查询界面\r\n                this.select_userCoin.string = \"\";\r\n                this.select_userId.string = \"\";\r\n                break;\r\n        }\r\n    },\r\n    //--------------------------银行赠送金币--------------------------\r\n    bank_giftClick() {\r\n        let info = {\r\n            sendUserId: this.gift_id.string,\r\n            sendCoin: this.gift_coin.string,\r\n            pwd: this.gift_pwd.string\r\n        };\r\n        this.netWork.socket.emit(\"sendCoin\", info);\r\n    },\r\n    //输入重置\r\n    bank_gift_reSet_Click() {\r\n        this.gift_id.string = \"\";\r\n        this.gift_coin.string = \"\";\r\n    },\r\n    //--------------------------银行查询--------------------------\r\n    bank_selectClick() {\r\n        this.netWork.socket.emit(\"getPlayerCoin\", {\r\n            userid: this.select_id.string\r\n        });\r\n    },\r\n    //展示查询内容\r\n    showSelectCoin(res) {\r\n        this.select_userCoin.string = (res.userCoin / this.playerInfo.exchangeRate).toFixed(2);\r\n        this.select_userId.string = res.userId;\r\n    },\r\n    //--------------------------银行存款--------------------------\r\n    //输入重置\r\n    bank_save_reSet_Click() {\r\n        this.save_coin.string = \"\";\r\n    },\r\n\r\n    bank_save_chooseCoinClick(target, index) {\r\n        let i = parseInt(index);\r\n        let coin = 0;\r\n        switch (i) {\r\n            case 0:\r\n                coin = 5000;\r\n                break;\r\n            case 1:\r\n                coin = 10000;\r\n                break;\r\n            case 2:\r\n                coin = 20000;\r\n                break;\r\n            case 3:\r\n                coin = 50000;\r\n                break;\r\n            case 4:\r\n                coin = this.playerInfo.playerCoin * this.playerInfo.exchangeRate;\r\n                break;\r\n        }\r\n        this.save_coin.string = (coin / this.playerInfo.exchangeRate).toFixed(2);\r\n    },\r\n    //银行存入提交\r\n    bank_save_commit_Click() {\r\n        let coin = parseFloat(this.save_coin.string) * this.playerInfo.exchangeRate;\r\n        if (coin && coin > 0) {\r\n            this.netWork.socket.emit(\"updateBankScore\", {\r\n                saveCoin: coin\r\n            });\r\n        }\r\n    },\r\n    //--------------------------银行取款--------------------------\r\n    bank_load_reSet_Click() {\r\n        this.load_coin.string = \"\";\r\n    },\r\n\r\n    bank_load_chooseCoinClick(target, index) {\r\n        let i = parseInt(index);\r\n        let coin = 0;\r\n        switch (i) {\r\n            case 0:\r\n                coin = 5000;\r\n                break;\r\n            case 1:\r\n                coin = 10000;\r\n                break;\r\n            case 2:\r\n                coin = 20000;\r\n                break;\r\n            case 3:\r\n                coin = 50000;\r\n                break;\r\n            case 4:\r\n                coin = this.playerInfo.playerBankCoin;\r\n                break;\r\n        }\r\n        this.load_coin.string = (coin / this.playerInfo.exchangeRate).toFixed(2);\r\n    },\r\n\r\n    bank_load_commit_Click() {\r\n        let coin = parseFloat(this.load_coin.string) * this.playerInfo.exchangeRate;\r\n        if (coin && coin > 0) {\r\n            this.netWork.socket.emit(\"updateBankScore\", {\r\n                saveCoin: -coin,\r\n                pwd: this.load_pwd.string\r\n            });\r\n        }\r\n    },\r\n    //--------------------------银行修改密码--------------------------\r\n    bank_update_commit_Click() {\r\n        if (this.update_newpwd.string == this.update_newpwd2.string) {\r\n            this.netWork.socket.emit(\"updateBankpwd\", {\r\n                pwd: this.update_pwd.string,\r\n                newPwd: this.update_newpwd.string\r\n            });\r\n        } else {\r\n            this.lobbyMain.showMessagebox_Function(\"两次新密码不相符\", 1, 4);\r\n        }\r\n    },\r\n\r\n});\r\n"]}