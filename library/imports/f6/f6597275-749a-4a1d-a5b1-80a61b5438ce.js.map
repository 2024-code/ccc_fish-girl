{"version":3,"sources":["assets\\Texture\\game_saigou\\paogou.js"],"names":["cc","Class","Component","properties","NodeArray_mingci","type","Node","tooltip","SpriteArray_jieguo","Sprite","SpriteFrameArray_haoma","SpriteFrame","AnimationArray_horse","Animation","AnimationClipArray_horseMove","AnimationClip","NodeArray_dibumingci","Speed_dibumingci","Label_winCoins","Label","AudioSource_launch","AudioSource","AudioSource_guoxian","PhotoTime","Animation_daojishi","Animation_changjing","Node_GongXi","Node_YiHan","_infinity","SetData","arrayMingCi","winCoins","_arrayMingCi","_winCoins","anim","play","on","Launch","node","active","string","_arrayLength","length","_posArrayMingCi","Array","i","getPosition","setPosition","index","j","spriteFrame","guoxian","self","addClip","playAdditive","onAnimEvent_ZhongDian","TakePhoto","_rankPosArray","x","_targetPosArray","_currentPosArray","_nodeArrayHorse","_arrayRanking","_arrayHorsePos","onBtnClick_back","dispatchEvent","Event","EventCustom","destroy","update","dt","Rank","distance","sub","absSub","Math","abs","move","min_X","ranking","pause","scheduleOnce","resume"],"mappings":"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","sourceRoot":"/","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        NodeArray_mingci: {\r\n            default: [],\r\n            type: [cc.Node],\r\n            tooltip: \"名次节点数组\",\r\n        },\r\n        SpriteArray_jieguo: {\r\n            default: [],\r\n            type: [cc.Sprite],\r\n            tooltip: \"结果图标数组\",\r\n        },\r\n        SpriteFrameArray_haoma: {\r\n            default: [],\r\n            type: [cc.SpriteFrame],\r\n            tooltip: \"号码图标资源数组\",\r\n        },\r\n        AnimationArray_horse: {\r\n            default: [],\r\n            type: [cc.Animation],\r\n            tooltip: \"赛马的动画组件数组\",\r\n        },\r\n        AnimationClipArray_horseMove: {\r\n            default: [],\r\n            type: [cc.AnimationClip],\r\n            tooltip: \"赛马移动的动画资源数组\",\r\n        },\r\n        NodeArray_dibumingci: {\r\n            default: [],\r\n            type: [cc.Node],\r\n            tooltip: \"底部名次节点数组\",\r\n        },\r\n        Speed_dibumingci: {\r\n            default: 500,\r\n            tooltip: \"底部名次的移动速度\",\r\n        },\r\n        Label_winCoins: {\r\n            default: null,\r\n            type: cc.Label,\r\n            tooltip: \"赢金币文字\",\r\n        },\r\n        AudioSource_launch: {\r\n            default: null,\r\n            type: cc.AudioSource,\r\n            tooltip: \"比赛开始的音效\",\r\n        },\r\n        AudioSource_guoxian: {\r\n            default: null,\r\n            type: cc.AudioSource,\r\n            tooltip: \"赛马过终点线音效\",\r\n        },\r\n        PhotoTime: {\r\n            default: 3,\r\n            tooltip: \"拍照时间\",\r\n        },\r\n        Animation_daojishi: {\r\n            default: null,\r\n            type: cc.Animation,\r\n            tooltip: \"倒计时动画\",\r\n        },\r\n        Animation_changjing: {\r\n            default: null,\r\n            type: cc.Animation,\r\n            tooltip: \"场景动画\",\r\n        },\r\n        Node_GongXi:{\r\n            default: null,\r\n            type: cc.Node,\r\n            tooltip: \"中奖节点\",\r\n        },\r\n        Node_YiHan:{\r\n            default: null,\r\n            type: cc.Node,\r\n            tooltip: \"未中奖节点\",\r\n        },        \r\n        _infinity: 999999,\r\n    },\r\n\r\n    SetData: function (arrayMingCi, winCoins) {\r\n        this._arrayMingCi = arrayMingCi;\r\n        this._winCoins = winCoins;\r\n        var anim = this.Animation_daojishi.play();\r\n        anim.on('finished', this.Launch, this);\r\n    },\r\n\r\n    Launch: function () {\r\n        this.Animation_daojishi.node.active = false;\r\n        this.Animation_changjing.play();\r\n        this.AudioSource_launch.play();\r\n        this.Label_winCoins.string = this._winCoins;\r\n        if (this._winCoins > 0) {\r\n            this.Node_GongXi.active = true;\r\n            this.Node_YiHan.active = false;\r\n        }\r\n        else {\r\n            this.Node_GongXi.active = false;\r\n            this.Node_YiHan.active = true;\r\n        }\r\n        this._arrayLength = this.NodeArray_mingci.length;\r\n        this._posArrayMingCi = new Array(this._arrayLength);\r\n        for (var i = 0; i < this._arrayLength; i++) {\r\n            this._posArrayMingCi[i] = this.NodeArray_mingci[i].getPosition();\r\n        }\r\n        for (var i = 0; i < this._arrayLength; i++) {\r\n            this.NodeArray_mingci[i].setPosition(this._posArrayMingCi[this._arrayMingCi[i]]);\r\n            this.NodeArray_mingci[i].active = false;\r\n        }\r\n        for (var i = 0; i < this.SpriteArray_jieguo.length; i++) {\r\n            var index = 0;\r\n            for (var j = 0; j < this._arrayLength; j++) {\r\n                if (this._arrayMingCi[j] === i) {\r\n                    index = j;\r\n                }\r\n            }\r\n            this.SpriteArray_jieguo[i].spriteFrame = this.SpriteFrameArray_haoma[index];\r\n        }\r\n        var guoxian = 0;\r\n        var self = this;\r\n        for (var i = 0; i < this._arrayLength; i++) {\r\n            this.AnimationArray_horse[i].play();\r\n            this.AnimationArray_horse[i].addClip(this.AnimationClipArray_horseMove[this._arrayMingCi[i]], \"mingci\");\r\n            this.AnimationArray_horse[i].playAdditive(\"mingci\");\r\n            this.AnimationArray_horse[i].onAnimEvent_ZhongDian = function () {\r\n                var index;\r\n                for (var i = 0; i < self._arrayLength; i++) {\r\n                    if (self._arrayMingCi[i] === guoxian) {\r\n                        index = i;\r\n                        break;\r\n                    }\r\n                }\r\n                self.NodeArray_mingci[index].active = true;\r\n                if (guoxian < 3) {//前三名拍照\r\n                    self.TakePhoto();\r\n                }\r\n                guoxian++;\r\n            }\r\n        }\r\n        this._rankPosArray = new Array(this._arrayLength);//底部排名的坐标\r\n        for (var i = 0; i < this._arrayLength; i++) {\r\n            this._rankPosArray[i] = this.NodeArray_dibumingci[i].x;\r\n        }\r\n        this._targetPosArray = new Array(this._arrayLength);//目标坐标\r\n        for (var i = 0; i < this._arrayLength; i++) {\r\n            this._targetPosArray[i] = this._rankPosArray[this._arrayMingCi[i]];\r\n        }\r\n        this._currentPosArray = new Array(this._arrayLength);//当前坐标\r\n        for (var i = 0; i < this._arrayLength; i++) {\r\n            this._currentPosArray[i] = this.NodeArray_dibumingci[i].x;\r\n        }\r\n        this._nodeArrayHorse = new Array(this._arrayLength);//赛马节点数组\r\n        for (var i = 0; i < this._arrayLength; i++) {\r\n            this._nodeArrayHorse[i] = this.AnimationArray_horse[i].node;\r\n        }\r\n        this._arrayRanking = new Array(this._arrayLength);//名次数组\r\n        this._arrayHorsePos = new Array(this._arrayLength);//赛马位置数组\r\n    },\r\n\r\n    onBtnClick_back: function () {\r\n        this.node.dispatchEvent(new cc.Event.EventCustom('Event_PaoGouConfirm', true));\r\n        this.node.destroy();\r\n    },\r\n\r\n    update: function (dt) {\r\n        for (var i = 0; i < this._arrayLength; i++) {\r\n            this._arrayHorsePos[i] = this._nodeArrayHorse[i].x;\r\n        }\r\n        this.Rank();\r\n        for (var i = 0; i < this._arrayLength; i++) {\r\n            this._targetPosArray[i] = this._rankPosArray[this._arrayRanking[i]];\r\n        }\r\n\r\n        var distance = this.Speed_dibumingci * dt;//这一帧移动的距离\r\n        for (var i = 0; i < this._arrayLength; i++) {\r\n            var sub = this._targetPosArray[i] - this._currentPosArray[i];\r\n            var absSub = Math.abs(sub);\r\n            if (absSub > 0.01) {//没到目标点\r\n                var move = 0;\r\n                if (absSub > distance) {//相差的距离大于这一帧移动的距离\r\n                    if (sub > 0) {\r\n                        move = distance;\r\n                    }\r\n                    else {\r\n                        move = -distance;\r\n                    }\r\n                }\r\n                else {\r\n                    move = sub;\r\n                }\r\n                this._currentPosArray[i] += move;\r\n                this.NodeArray_dibumingci[i].x = this._currentPosArray[i];\r\n            }\r\n        }\r\n    },\r\n\r\n    Rank: function () {\r\n        var index;//最小值的索引\r\n        var min_X;//最小值\r\n        for (var ranking = this._arrayLength - 1; ranking > -1; ranking--) {\r\n            min_X = this._infinity;\r\n            for (var i = 0; i < this._arrayLength; i++) {\r\n                if (this._arrayHorsePos[i] < min_X) {\r\n                    min_X = this._arrayHorsePos[i];\r\n                    index = i;\r\n                }\r\n            }\r\n            this._arrayRanking[index] = ranking;\r\n            this._arrayHorsePos[index] = this._infinity;\r\n        }\r\n    },\r\n\r\n    TakePhoto: function () {\r\n        this.AudioSource_guoxian.play();\r\n        for (var i = 0; i < this._arrayLength; i++) {\r\n            this.AnimationArray_horse[i].pause();\r\n        }\r\n        this.scheduleOnce(function () {\r\n            for (var i = 0; i < this._arrayLength; i++) {\r\n                this.AnimationArray_horse[i].resume();\r\n            }\r\n        }, this.PhotoTime);\r\n    },\r\n});"]}