{"version":3,"sources":["assets\\Script\\Triangle\\TriangleNetwork.js"],"names":["cc","Class","Component","onLoad","mainObj","node","getComponent","playerInfo","require","getInstant","audio","start","url","Lhjconfig","Server_IP","socket","io","connect","addEvent","on","emit","JSON","stringify","userid","playerId","gametype","sign","gameSign","data","changeResultJSON_Function","console","log","moneyLbl","string","Obj","score","toFixed","window","TG_LOBBYNET","disconnect","ResultCode","bet","awardLbl","awardPoorLbl","ResultData","score_pool","showUnit","viewarray","res","length","wheelFunc","scheduleOnce","status","winscore","userscore","ret","sys","isNative","parse"],"mappings":"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","sourceRoot":"/","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    onLoad() {\r\n        this.mainObj = this.node.getComponent('TriangleMain');\r\n        this.playerInfo = require(\"PlayerInfo\").getInstant;\r\n        this.audio = this.node.getComponent('TriangleAudio');\r\n\r\n    },\r\n\r\n    start() {\r\n        this.url = Lhjconfig.Server_IP + ':15015';\r\n        this.socket = io.connect(this.url);\r\n        this.addEvent();\r\n    },\r\n\r\n\r\n    addEvent() {\r\n        this.socket.on('connected', () => {\r\n            this.socket.emit('LoginGame', JSON.stringify({\r\n                userid: this.playerInfo.playerId,\r\n                gametype: null,\r\n                sign: this.playerInfo.gameSign\r\n            }));\r\n        });\r\n\r\n        this.socket.on('loginGameResult', data => {\r\n            data = this.changeResultJSON_Function(data);\r\n            console.log('LoginGameResult:', data);\r\n            this.socket.emit('LoginRoom');\r\n            this.mainObj.moneyLbl.string = (data.Obj.score / 100).toFixed(2);\r\n            window.TG_LOBBYNET.disconnect();\r\n        });\r\n\r\n        this.socket.on('lotteryResult', (data) => {\r\n            data = this.changeResultJSON_Function(data);\r\n            console.log('lotteryResult:', data);\r\n            if (!!data.ResultCode && data.ResultCode == 1) {\r\n                this.mainObj.moneyLbl.string = (this.mainObj.moneyLbl.string - this.mainObj.bet).toFixed(2);\r\n                this.mainObj.awardLbl.string = '0.00';\r\n                this.mainObj.awardPoorLbl.string = (data.ResultData.score_pool / 100).toFixed(2);\r\n                this.mainObj.showUnit(data.ResultData.viewarray[0].res);\r\n                if (data.ResultData.viewarray.length > 1) {\r\n                    this.mainObj.wheelFunc(data.ResultData.viewarray, data, 0);\r\n                } else {\r\n                    this.scheduleOnce(() => {\r\n                        this.mainObj.status = 0;\r\n                        this.mainObj.awardLbl.string = (data.ResultData.winscore / 100).toFixed(2);\r\n                        this.mainObj.moneyLbl.string = (data.ResultData.userscore / 100).toFixed(2);\r\n                    }, 2.5);\r\n                }\r\n            }\r\n        });\r\n\r\n        this.socket.on('LoginRoomResult', (data) => {\r\n            data = this.changeResultJSON_Function(data);\r\n            console.log('LoginRoomResult', data);\r\n            this.mainObj.awardPoorLbl.string = (data.ResultData.score_pool / 100).toFixed(2);\r\n        });\r\n    },\r\n\r\n    changeResultJSON_Function(ret) {\r\n        if (cc.sys.isNative) {\r\n            return JSON.parse(ret);\r\n        }\r\n        return ret;\r\n    },\r\n});"]}