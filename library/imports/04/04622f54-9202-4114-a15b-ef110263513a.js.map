{"version":3,"sources":["assets\\Texture\\game_saima\\paoma.js"],"names":["cc","Class","Component","properties","NodeArray_mingci","type","Node","tooltip","SpriteArray_jieguo","Sprite","SpriteFrameArray_haoma","SpriteFrame","AnimationArray_horse","Animation","AnimationClipArray_horseMove","AnimationClip","NodeArray_dibumingci","Speed_dibumingci","Label_winCoins","Label","AudioSource_launch","AudioSource","AudioSource_guoxian","PhotoTime","Animation_daojishi","Animation_changjing","times_lab","_infinity","SetData","arrayMingCi","winCoins","_arrayMingCi","_winCoins","anim","play","string","find","getComponent","times_id","on","Launch","node","active","c_anim","scheduleOnce","destroy","_arrayLength","length","_posArrayMingCi","Array","i","getPosition","setPosition","index","j","spriteFrame","guoxian","self","addClip","playAdditive","onAnimEvent_ZhongDian","TakePhoto","_rankPosArray","x","_targetPosArray","_currentPosArray","_nodeArrayHorse","_arrayRanking","_arrayHorsePos","onBtnClick_back","dispatchEvent","Event","EventCustom","update","dt","Rank","distance","sub","absSub","Math","abs","move","min_X","ranking","pause","resume"],"mappings":"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","sourceRoot":"/","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        NodeArray_mingci: {\r\n            default: [],\r\n            type: [cc.Node],\r\n            tooltip: \"名次节点数组\",\r\n        },\r\n        SpriteArray_jieguo: {\r\n            default: [],\r\n            type: [cc.Sprite],\r\n            tooltip: \"结果图标数组\",\r\n        },\r\n        SpriteFrameArray_haoma: {\r\n            default: [],\r\n            type: [cc.SpriteFrame],\r\n            tooltip: \"号码图标资源数组\",\r\n        },\r\n        AnimationArray_horse: {\r\n            default: [],\r\n            type: [cc.Animation],\r\n            tooltip: \"赛马的动画组件数组\",\r\n        },\r\n        AnimationClipArray_horseMove: {\r\n            default: [],\r\n            type: [cc.AnimationClip],\r\n            tooltip: \"赛马移动的动画资源数组\",\r\n        },\r\n        NodeArray_dibumingci: {\r\n            default: [],\r\n            type: [cc.Node],\r\n            tooltip: \"底部名次节点数组\",\r\n        },\r\n        Speed_dibumingci: {\r\n            default: 500,\r\n            tooltip: \"底部名次的移动速度\",\r\n        },\r\n        Label_winCoins: {\r\n            default: null,\r\n            type: cc.Label,\r\n            tooltip: \"赢金币文字\",\r\n        },\r\n        AudioSource_launch: {\r\n            default: null,\r\n            type: cc.AudioSource,\r\n            tooltip: \"比赛开始的音效\",\r\n        },\r\n        AudioSource_guoxian: {\r\n            default: null,\r\n            type: cc.AudioSource,\r\n            tooltip: \"赛马过终点线音效\",\r\n        },\r\n        PhotoTime: {\r\n            default: 3,\r\n            tooltip: \"拍照时间\",\r\n        },\r\n        Animation_daojishi: {\r\n            default: null,\r\n            type: cc.Animation,\r\n            tooltip: \"倒计时动画\",\r\n        },\r\n        Animation_changjing: {\r\n            default: null,\r\n            type: cc.Animation,\r\n            tooltip: \"场景动画\",\r\n        },\r\n        times_lab: cc.Label,\r\n        _infinity: 999999,\r\n    },\r\n\r\n    SetData: function (arrayMingCi, winCoins) {\r\n        this._arrayMingCi = arrayMingCi;\r\n        this._winCoins = winCoins;\r\n        var anim = this.Animation_daojishi.play();\r\n        this.times_lab.string = cc.find(\"Canvas\").getComponent(\"saima\").times_id;\r\n        anim.on('finished', this.Launch, this);\r\n    },\r\n\r\n    Launch: function () {\r\n        this.Animation_daojishi.node.active = false;\r\n        let c_anim = this.Animation_changjing.play();\r\n        c_anim.on('finished', () => {\r\n            this.scheduleOnce(() => {\r\n                this.node.destroy();\r\n            }, 5);\r\n        }, this);\r\n        this.AudioSource_launch.play();\r\n        this.Label_winCoins.string = this._winCoins;\r\n        this._arrayLength = this.NodeArray_mingci.length;\r\n        this._posArrayMingCi = new Array(this._arrayLength);\r\n        for (var i = 0; i < this._arrayLength; i++) {\r\n            this._posArrayMingCi[i] = this.NodeArray_mingci[i].getPosition();\r\n        }\r\n        for (var i = 0; i < this._arrayLength; i++) {\r\n            this.NodeArray_mingci[i].setPosition(this._posArrayMingCi[this._arrayMingCi[i]]);\r\n            this.NodeArray_mingci[i].active = false;\r\n        }\r\n        for (var i = 0; i < this.SpriteArray_jieguo.length; i++) {\r\n            var index = 0;\r\n            for (var j = 0; j < this._arrayLength; j++) {\r\n                if (this._arrayMingCi[j] === i) {\r\n                    index = j;\r\n                }\r\n            }\r\n            this.SpriteArray_jieguo[i].spriteFrame = this.SpriteFrameArray_haoma[index];\r\n        }\r\n        var guoxian = 0;\r\n        var self = this;\r\n        for (var i = 0; i < this._arrayLength; i++) {\r\n            this.AnimationArray_horse[i].play();\r\n            this.AnimationArray_horse[i].addClip(this.AnimationClipArray_horseMove[this._arrayMingCi[i]], \"mingci\");\r\n            this.AnimationArray_horse[i].playAdditive(\"mingci\");\r\n            this.AnimationArray_horse[i].onAnimEvent_ZhongDian = function () {\r\n                var index;\r\n                for (var i = 0; i < self._arrayLength; i++) {\r\n                    if (self._arrayMingCi[i] === guoxian) {\r\n                        index = i;\r\n                        break;\r\n                    }\r\n                }\r\n                self.NodeArray_mingci[index].active = true;\r\n                if (guoxian < 3) {//前三名拍照\r\n                    self.TakePhoto();\r\n                }\r\n                guoxian++;\r\n            }\r\n        }\r\n        this._rankPosArray = new Array(this._arrayLength);//底部排名从1到8的坐标\r\n        for (var i = 0; i < this._arrayLength; i++) {\r\n            this._rankPosArray[i] = this.NodeArray_dibumingci[i].x;\r\n        }\r\n        this._targetPosArray = new Array(this._arrayLength);//目标坐标\r\n        for (var i = 0; i < this._arrayLength; i++) {\r\n            this._targetPosArray[i] = this._rankPosArray[this._arrayMingCi[i]];\r\n        }\r\n        this._currentPosArray = new Array(this._arrayLength);//当前坐标\r\n        for (var i = 0; i < this._arrayLength; i++) {\r\n            this._currentPosArray[i] = this.NodeArray_dibumingci[i].x;\r\n        }\r\n        this._nodeArrayHorse = new Array(this._arrayLength);//赛马节点数组\r\n        for (var i = 0; i < this._arrayLength; i++) {\r\n            this._nodeArrayHorse[i] = this.AnimationArray_horse[i].node;\r\n        }\r\n        this._arrayRanking = new Array(this._arrayLength);//名次数组\r\n        this._arrayHorsePos = new Array(this._arrayLength);//赛马位置数组\r\n    },\r\n\r\n    onBtnClick_back: function () {\r\n        this.node.dispatchEvent(new cc.Event.EventCustom('Event_PaoMaConfirm', true));\r\n        this.node.destroy();\r\n    },\r\n\r\n    update: function (dt) {\r\n        for (var i = 0; i < this._arrayLength; i++) {\r\n            this._arrayHorsePos[i] = this._nodeArrayHorse[i].x;\r\n        }\r\n        this.Rank();\r\n        for (var i = 0; i < this._arrayLength; i++) {\r\n            this._targetPosArray[i] = this._rankPosArray[this._arrayRanking[i]];\r\n        }\r\n\r\n        var distance = this.Speed_dibumingci * dt;//这一帧移动的距离\r\n        for (var i = 0; i < this._arrayLength; i++) {\r\n            var sub = this._targetPosArray[i] - this._currentPosArray[i];\r\n            var absSub = Math.abs(sub);\r\n            if (absSub > 0.01) {//没到目标点\r\n                var move = 0;\r\n                if (absSub > distance) {//相差的距离大于这一帧移动的距离\r\n                    if (sub > 0) {\r\n                        move = distance;\r\n                    }\r\n                    else {\r\n                        move = -distance;\r\n                    }\r\n                }\r\n                else {\r\n                    move = sub;\r\n                }\r\n                this._currentPosArray[i] += move;\r\n                this.NodeArray_dibumingci[i].x = this._currentPosArray[i];\r\n            }\r\n        }\r\n    },\r\n\r\n    Rank: function () {\r\n        var index;//最小值的索引\r\n        var min_X;//最小值\r\n        for (var ranking = this._arrayLength - 1; ranking > -1; ranking--) {\r\n            min_X = this._infinity;\r\n            for (var i = 0; i < this._arrayLength; i++) {\r\n                if (this._arrayHorsePos[i] < min_X) {\r\n                    min_X = this._arrayHorsePos[i];\r\n                    index = i;\r\n                }\r\n            }\r\n            this._arrayRanking[index] = ranking;\r\n            this._arrayHorsePos[index] = this._infinity;\r\n        }\r\n    },\r\n\r\n    TakePhoto: function () {\r\n        this.AudioSource_guoxian.play();\r\n        for (var i = 0; i < this._arrayLength; i++) {\r\n            this.AnimationArray_horse[i].pause();\r\n        }\r\n        this.scheduleOnce(function () {\r\n            for (var i = 0; i < this._arrayLength; i++) {\r\n                this.AnimationArray_horse[i].resume();\r\n            }\r\n        }, this.PhotoTime);\r\n    },\r\n});"]}