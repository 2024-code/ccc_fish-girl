{"version":3,"sources":["assets\\Texture\\Slot_EgyptianTreasures\\js\\EFFreeWheel.js"],"names":["ROLENUM","TIMEMIN","cc","Class","Component","properties","wheelId","onLoad","audio","node","getComponent","mainObj","director","getScene","getChildByName","freeWheelList","startRoll","args","animObj","removeAllChildren","y","i","addRole","Math","floor","random","timer","setTimeout","runAction","sequence","moveTo","v2","x","height","callFunc","rollCallBack","bind","id","pb","instantiate","rolePb","addChild","Animation","play"],"mappings":";;;;;;AAAA,IAAMA,OAAO,GAAG,EAAhB,EAAoB;;AACpB,IAAMC,OAAO,GAAG,CAAhB,EAAmB;;AAEnBC,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAGLC,EAAAA,UAAU,EAAE;AACRC,IAAAA,OAAO,EAAE;AADD,GAHP;AAOLC,EAAAA,MAPK,oBAOI;AACL,SAAKC,KAAL,GAAa,KAAKC,IAAL,CAAUC,YAAV,CAAuB,SAAvB,CAAb;AACA,SAAKC,OAAL,GAAeT,EAAE,CAACU,QAAH,CAAYC,QAAZ,GAAuBC,cAAvB,CAAsC,QAAtC,EAAgDJ,YAAhD,CAA6D,QAA7D,CAAf;AACA,SAAKC,OAAL,CAAaI,aAAb,CAA2B,KAAKT,OAAhC,IAA2C,IAA3C;AACH,GAXI;AAaLU,EAAAA,SAbK,qBAaKC,IAbL,EAaW;AAAA;;AACZ,SAAKC,OAAL,GAAe,IAAf;AACA,SAAKT,IAAL,CAAUU,iBAAV;AACA,SAAKV,IAAL,CAAUW,CAAV,GAAc,CAAd;;AACA,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,EAApB,EAAwBA,CAAC,EAAzB,EAA6B;AACzB,WAAKC,OAAL,CAAaC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgB,EAAhB,GAAqB,CAAhC,CAAb;AACH;;AACD,SAAKP,OAAL,GAAe,KAAKI,OAAL,CAAaL,IAAb,CAAf;AACA,QAAIS,KAAK,GAAGzB,OAAO,GAAG,KAAKK,OAAL,GAAe,GAArC;AACAqB,IAAAA,UAAU,CAAC,YAAM;AACb,MAAA,KAAI,CAAClB,IAAL,CAAUmB,SAAV,CACI1B,EAAE,CAAC2B,QAAH,CACI3B,EAAE,CAAC4B,MAAH,CAAUJ,KAAV,EAAiBxB,EAAE,CAAC6B,EAAH,CAAM,KAAI,CAACtB,IAAL,CAAUuB,CAAhB,EAAmB,CAAC,KAAI,CAACvB,IAAL,CAAUwB,MAAX,GAAoB,GAAvC,CAAjB,CADJ,EAEI/B,EAAE,CAAC4B,MAAH,CAAU,GAAV,EAAe5B,EAAE,CAAC6B,EAAH,CAAM,KAAI,CAACtB,IAAL,CAAUuB,CAAhB,EAAmB,CAAC,KAAI,CAACvB,IAAL,CAAUwB,MAAX,GAAoB,GAAvC,CAAf,CAFJ,EAGI/B,EAAE,CAAC4B,MAAH,CAAU,GAAV,EAAe5B,EAAE,CAAC6B,EAAH,CAAM,KAAI,CAACtB,IAAL,CAAUuB,CAAhB,EAAmB,CAAC,KAAI,CAACvB,IAAL,CAAUwB,MAAX,GAAoB,GAAvC,CAAf,CAHJ,EAII/B,EAAE,CAACgC,QAAH,CAAY,KAAI,CAACC,YAAL,CAAkBC,IAAlB,CAAuB,KAAvB,CAAZ,CAJJ,CADJ;AAQH,KATS,EASP,IATO,CAAV;AAUH,GAhCI;AAkCLd,EAAAA,OAlCK,mBAkCGe,EAlCH,EAkCO;AACR,QAAIC,EAAE,GAAGpC,EAAE,CAACqC,WAAH,CAAe,KAAK5B,OAAL,CAAa6B,MAAb,CAAoBH,EAApB,CAAf,CAAT;AACA,SAAK5B,IAAL,CAAUgC,QAAV,CAAmBH,EAAnB;AACA,WAAOA,EAAP;AACH,GAtCI;AAwCLH,EAAAA,YAxCK,0BAwCU;AACX,SAAKjB,OAAL,CAAaR,YAAb,CAA0BR,EAAE,CAACwC,SAA7B,EAAwCC,IAAxC;AACH;AA1CI,CAAT","sourceRoot":"/","sourcesContent":["const ROLENUM = 40; //每一轮的角色数量\r\nconst TIMEMIN = 1; //第一轮摇奖时间\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        wheelId: 0,\r\n    },\r\n\r\n    onLoad() {\r\n        this.audio = this.node.getComponent('EFAudio');\r\n        this.mainObj = cc.director.getScene().getChildByName('Canvas').getComponent('EFMain');\r\n        this.mainObj.freeWheelList[this.wheelId] = this;\r\n    },\r\n\r\n    startRoll(args) {\r\n        this.animObj = null;\r\n        this.node.removeAllChildren();\r\n        this.node.y = 0;\r\n        for (let i = 0; i < 39; i++) {\r\n            this.addRole(Math.floor(Math.random() * 10 + 1));\r\n        }\r\n        this.animObj = this.addRole(args);\r\n        let timer = TIMEMIN + this.wheelId * 0.2;\r\n        setTimeout(() => {\r\n            this.node.runAction(\r\n                cc.sequence(\r\n                    cc.moveTo(timer, cc.v2(this.node.x, -this.node.height + 220)),\r\n                    cc.moveTo(0.1, cc.v2(this.node.x, -this.node.height + 230)),\r\n                    cc.moveTo(0.1, cc.v2(this.node.x, -this.node.height + 220)),\r\n                    cc.callFunc(this.rollCallBack.bind(this))\r\n                )\r\n            );\r\n        }, 1000);\r\n    },\r\n\r\n    addRole(id) {\r\n        let pb = cc.instantiate(this.mainObj.rolePb[id]);\r\n        this.node.addChild(pb);\r\n        return pb;\r\n    },\r\n\r\n    rollCallBack() {\r\n        this.animObj.getComponent(cc.Animation).play();\r\n    },\r\n\r\n});"]}