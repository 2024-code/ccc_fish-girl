{"version":3,"sources":["assets\\Texture\\game_bcbm\\js\\benchibaoma.js"],"names":["zhuanpan","require","StateMachine","Global","cc","Class","Component","properties","ZhuanPan","Interval","ShowTime","Timeout","tooltip","name_lab","Label","head_Node","Node","LabelJinBi","type","LabelJiangLi","PanelXinXi","PanelQianBuGou","NodeAudioParent","stateMachine","xiazhuStateNode","betTime_lab","zhuangInfo_Node","qiangNode","zhuangLimit_lab","qiangzhuangNum","zhuangHead_Node","zhuangName_lab","zhuangCoin_lab","betMask","BtnArrayInteraction","Button","NodeArrayXiaZhu","ServerDataToLocalData","Integer","icon","SpriteFrame","show_history","history_shuiguo","Prefab","onLoad","window","BCBM_ins","network","getInstant","start","LandlordsSocket","emit","string","playerName","setHeadTexture","playerHeadId","playerCoin","exchangeRate","toFixed","_itemArrayLength","length","_intArrayXiaZhu","Array","m_iGameOverTime","duzhuMoney","initBetPool","self","node","on","event","stopPropagation","_winCoin","Input_Ready","detail","SetPanelInteraction","Launch","Stop","_listWinLines","history","_listWinCar","update","dt","active","t","parseInt","Date","now","playEffect","init_stat","result","zUser","name","zCoin","url","zhuang_limit","game_type","bet_time","children","qiang_time","i","getChildByName","getComponent","onBtnClick_qiangzhuang","onBtnClick_XinXi","onBtnClick_xiazhu","itemIndex","str","bet_res","bet_gold","onToggleClick_ShengYin","toggle","customEventData","isChecked","AudioSource","volume","onBtnClick_BackHall","disconnect","director","loadScene","chooseBet_click","target","num","onBtnClick_closePanel","parent","setzhuang","ret","qiangBegin","betBegin","showResult","Input_Start","scheduleOnce","Input_Stop","showHint","onBet","bet_dict","console","log","index","betUpdate","data","interactable","lines","allnode","destroy","n","instantiate","Sprite","spriteFrame"],"mappings":"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","sourceRoot":"/","sourcesContent":["var zhuanpan = require(\"zhuanpan_bcbm\");\r\nvar StateMachine = require(\"stateMachine\");\r\nvar Global = null;\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        ZhuanPan: zhuanpan,\r\n        Interval: 2,//从开始状态到停止状态必须等待的间隔时间（秒）\r\n        ShowTime: 5,//中奖展示时间(秒)\r\n        Timeout: {\r\n            default: 10,\r\n            tooltip: \"连接超时倒计时(秒)\",\r\n        },\r\n        name_lab: cc.Label,\r\n        head_Node: cc.Node,\r\n        LabelJinBi: {\r\n            default: null,\r\n            type: cc.Label,\r\n            tooltip: '金币文字',\r\n        },\r\n        LabelJiangLi: {\r\n            default: null,\r\n            type: cc.Label,\r\n            tooltip: '奖励文字',\r\n        },\r\n        PanelXinXi: {\r\n            default: null,\r\n            type: cc.Node,\r\n            tooltip: '信息界面',\r\n        },\r\n        PanelQianBuGou: {\r\n            default: null,\r\n            type: cc.Node,\r\n            tooltip: '钱不够界面',\r\n        },\r\n        NodeAudioParent: cc.Node,//所有音效的父节点\r\n        stateMachine: StateMachine,//状态机\r\n        xiazhuStateNode: cc.Node,//下注节点\r\n        betTime_lab: cc.Label,//下注时间\r\n        zhuangInfo_Node: cc.Node,//庄家信息\r\n        qiangNode: cc.Node,//抢庄\r\n        zhuangLimit_lab: cc.Label,\r\n        qiangzhuangNum: cc.Label,//抢庄人数\r\n        zhuangHead_Node: cc.Node,//庄家头像\r\n        zhuangName_lab: cc.Label,//庄家姓名\r\n        zhuangCoin_lab: cc.Label,//庄家钱数\r\n        betMask: cc.Node,//下注区遮罩\r\n        BtnArrayInteraction: {\r\n            default: [],\r\n            type: [cc.Button],\r\n            tooltip: '所有需要在状态变化时改变可交互性的按钮的集合',\r\n        },\r\n        NodeArrayXiaZhu: {\r\n            default: [],\r\n            type: cc.Node,\r\n            tooltip: \"下注的节点数组\",\r\n        },\r\n        ServerDataToLocalData: {\r\n            default: [],\r\n            type: [cc.Integer],\r\n            tooltip: \"服务器索引数据转本地索引数据\",\r\n        },\r\n        icon: {\r\n            default: [],\r\n            type: cc.SpriteFrame\r\n        },\r\n        show_history: {\r\n            default: null,\r\n            type: cc.Node,\r\n            tooltip: '历史记录节点',\r\n        },\r\n        history_shuiguo: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n            tooltip: '历史水果图标',\r\n        }\r\n    },\r\n\r\n    onLoad() {\r\n        window.BCBM_ins = this;\r\n        this.network = require('bcbm_NetWork').getInstant;\r\n        Global = require(\"PlayerInfo\").getInstant;\r\n    },\r\n\r\n    start: function () {\r\n        this.network.LandlordsSocket.emit('getGameType', '');\r\n        this.network.LandlordsSocket.emit(\"getGameRecordList\", \"\");\r\n        this.name_lab.string = Global.playerName;\r\n        setHeadTexture(this.head_Node, Global.playerHeadId);\r\n        this.LabelJinBi.string = (Global.playerCoin / Global.exchangeRate).toFixed(2); //总金币数\r\n\r\n        this._itemArrayLength = this.NodeArrayXiaZhu.length;\r\n        this._intArrayXiaZhu = new Array(this._itemArrayLength);    //每种水果的注数\r\n        this.m_iGameOverTime = -1;//下注剩余时间\r\n        this.duzhuMoney = 100;              //单注金额\r\n\r\n        this.initBetPool();\r\n\r\n        var self = this;\r\n        this.node.on('Event_ZhuanPanStop', function (event) {\r\n            event.stopPropagation();//停止传递当前事件\r\n            //显示结果\r\n            if (self._winCoin > 0) {\r\n                self.stateMachine.Input_Ready(self.ShowTime);\r\n            }\r\n            else {\r\n                self.stateMachine.Input_Ready(0.01);\r\n            }\r\n        });\r\n\r\n        //监听状态机改变事件\r\n        this.node.on('Event_StateChange', function (event) {\r\n            event.stopPropagation();//停止传递当前事件\r\n            //不知道怎么用js写枚举变量，先用整数代替吧\r\n            //规定state === 0 表示准备状态，解除界面交互限制\r\n            //规定state === 1 表示开始状态，转动转轮，限制部分界面交互功能\r\n            //规定state === 2 表示停止状态，停止转轮并显示图标结果\r\n            //规定state === 3 表示中奖展示状态,显示结算\r\n            //规定state === 4 表示错误状态，停止转轮\r\n            switch (event.detail) {\r\n                case 0:\r\n                    //准备状态，解除界面交互限制\r\n                    self.SetPanelInteraction(true);\r\n                    break;\r\n                case 1:\r\n                    //开始状态，转动转轮，限制部分界面交互功能\r\n                    self.SetPanelInteraction(false);\r\n                    //发动\r\n                    self.ZhuanPan.Launch();\r\n                    break;\r\n                case 2:\r\n                    self.ZhuanPan.Stop(self.ServerDataToLocalData[self._listWinLines[0]]);\r\n                    break;\r\n                case 3:\r\n                    //中奖展示状态,显示结算\r\n                    self.LabelJinBi.string = (Global.playerCoin / Global.exchangeRate).toFixed(2);;//总金币数\r\n                    self.LabelJiangLi.string = self._winCoin;//显示本局赢多少钱\r\n                    self.history(self._listWinCar);\r\n                    break;\r\n                case 4:\r\n                    //错误状态，停止转轮\r\n                    self.ZhuanPan.Stop(0);\r\n                    break;\r\n                default:\r\n                    //走到这肯定出错了\r\n                    break;\r\n            }\r\n        });\r\n    },\r\n\r\n    update: function (dt) {\r\n        if (this.m_iGameOverTime && this.xiazhuStateNode.active) {\r\n            var t = parseInt(this.m_iGameOverTime - Date.now() / 1000);\r\n\r\n            if (t <= 5 && t + \"\" != this.betTime_lab.string) {\r\n                playEffect('countdown');\r\n                if (t == 0) {\r\n                    playEffect('stop_s');\r\n                }\r\n            }\r\n\r\n            if (t <= 0) {\r\n                this.xiazhuStateNode.active = false;\r\n                return;\r\n            }\r\n            this.betTime_lab.string = t;\r\n        }\r\n    },\r\n\r\n    init_stat(result) {\r\n        if (result.zUser) {\r\n            this.zhuangName_lab.string = result.zUser.name;\r\n            this.zhuangCoin_lab.string = (result.zUser.zCoin / Global.exchangeRate).toFixed(2);\r\n            setHeadTexture(this.zhuangHead_Node, result.zUser.url);\r\n        }\r\n        this.qiangzhuangNum.string = result.qiangzhuangNum + \"人抢庄\";\r\n        this.zhuangLimit_lab.string = (result.zhuang_limit / Global.exchangeRate).toFixed(2) + \"金币抢庄\";\r\n        if (result.game_type == 1) {\r\n            this.m_iGameOverTime = Date.now() / 1000 + result.bet_time;\r\n            this.xiazhuStateNode.active = true;\r\n            this.betMask.active = false;\r\n        } else {\r\n            this.xiazhuStateNode.active = false;\r\n            this.betMask.active = true;\r\n            this.betMask.children[2].active = true;\r\n        }\r\n\r\n        if (result.game_type == 4) {\r\n            this.qiangNode.active = true;\r\n            this.zhuangInfo_Node.active = false;\r\n            this.m_iGameOverTime = Date.now() / 1000 + result.qiang_time;\r\n        } else {\r\n            this.qiangNode.active = false;\r\n            this.zhuangInfo_Node.active = true;\r\n        }\r\n\r\n    },\r\n    //初始化下注\r\n    initBetPool() {\r\n        for (var i = 0; i < this._itemArrayLength; i++) {\r\n            this._intArrayXiaZhu[i] = 0;\r\n            this.NodeArrayXiaZhu[i].getChildByName(\"本人下注\").getComponent(cc.Label).string = \"0.00\";\r\n            this.NodeArrayXiaZhu[i].getChildByName(\"所有下注\").getComponent(cc.Label).string = \"0.00\";\r\n        }\r\n    },\r\n    //抢庄\r\n    onBtnClick_qiangzhuang() {\r\n        this.network.LandlordsSocket.emit('qiangZhuang', '');\r\n    },\r\n    //点击信息按钮\r\n    onBtnClick_XinXi: function () {\r\n        this.PanelXinXi.active = !this.PanelXinXi.active;\r\n    },\r\n\r\n    onBtnClick_xiazhu: function (event, itemIndex) {\r\n        let str = {\r\n            bet_res: parseInt(itemIndex),\r\n            bet_gold: this.duzhuMoney,\r\n        };\r\n        this.network.LandlordsSocket.emit('lottery', str);\r\n        // cc.log(str)\r\n    },\r\n\r\n    //点击声音开关\r\n    onToggleClick_ShengYin: function (toggle, customEventData) {\r\n        if (toggle.isChecked === true) {\r\n            for (var i = 0; i < this.NodeAudioParent.children.length; i++) {\r\n                this.NodeAudioParent.children[i].getComponent(cc.AudioSource).volume = 1;\r\n            }\r\n        }\r\n        else {\r\n            for (var i = 0; i < this.NodeAudioParent.children.length; i++) {\r\n                this.NodeAudioParent.children[i].getComponent(cc.AudioSource).volume = 0;\r\n            }\r\n        }\r\n    },\r\n\r\n    //点击返回大厅按钮\r\n    onBtnClick_BackHall: function () {\r\n        this.network.LandlordsSocket.disconnect();\r\n        cc.director.loadScene(\"LobbyMain\");\r\n    },\r\n\r\n    //选择筹码\r\n    chooseBet_click(target, num) {\r\n        this.duzhuMoney = parseInt(num);\r\n    },\r\n\r\n    //关闭弹出界面\r\n    onBtnClick_closePanel: function (event, customEventData) {\r\n        //这里 event 是一个 Touch Event 对象，你可以通过 event.target 取到事件的发送节点\r\n        event.target.parent.active = false;\r\n    },\r\n\r\n    setzhuang(ret) {\r\n        this.zhuangInfo_Node.active = true;\r\n        this.qiangNode.active = false;\r\n        this.xiazhuStateNode.active = true;\r\n        this.betMask.active = false;\r\n        this.zhuangName_lab.string = ret.name;\r\n        this.zhuangCoin_lab.string = (ret.zCoin / Global.exchangeRate).toFixed(2);\r\n        setHeadTexture(this.zhuangHead_Node, ret.url);\r\n    },\r\n    //开始抢庄\r\n    qiangBegin() {\r\n        this.qiangzhuangNum.string = \"0人抢庄\";\r\n        this.xiazhuStateNode.active = false;\r\n        this.betMask.active = true;\r\n        this.betMask.children[2].active = true;\r\n        this.qiangNode.active = true;\r\n        this.zhuangInfo_Node.active = false;\r\n        this.m_iGameOverTime = Date.now() / 1000 + 5;\r\n    },\r\n    //开始下注\r\n    betBegin() {\r\n        // this.betBegin_r();\r\n        this.m_iGameOverTime = Date.now() / 1000 + 40;\r\n        this.zhuangInfo_Node.active = true;\r\n        this.qiangNode.active = false;\r\n        this.xiazhuStateNode.active = true;\r\n        this.betMask.active = false;\r\n    },\r\n    //开奖\r\n    showResult(ret) {\r\n        this.initBetPool();\r\n        this.stateMachine.Input_Start(this.Interval, this.Timeout);\r\n        this.scheduleOnce(() => {\r\n            this._winCoin = ret[\"user_win\"];//保存服务器返回的本局赢多少钱\r\n            this._listWinLines = [ret[\"win_res\"]];//保存服务器返回的中哪一条线\r\n            this._listWinCar = ret[\"win_car\"];//保存服务器返回的中哪一条线\r\n            this.stateMachine.Input_Stop();\r\n        }, 3);\r\n    },\r\n    //抢庄结果\r\n    showHint(ret) {\r\n        // cc.log(a);\r\n        this.qiangzhuangNum.string = ret.qiangzhuangNum + \"人抢庄\";\r\n    },\r\n    //接收到服务器消息：返回下注结果\r\n    onBet: function (bet_dict) {\r\n        console.log(bet_dict);\r\n        let index = bet_dict.bet_res;\r\n        this.LabelJinBi.string = (Global.playerCoin / Global.exchangeRate).toFixed(2);\r\n        this._intArrayXiaZhu[index] += bet_dict.bet_gold;\r\n        this.NodeArrayXiaZhu[index].getChildByName(\"本人下注\").getComponent(cc.Label).string =\r\n            (this._intArrayXiaZhu[index] / Global.exchangeRate).toFixed(2);\r\n\r\n    },\r\n    //接收到服务器消息：更新下注池子\r\n    betUpdate(data) {\r\n        for (let i = 0; i < data.length; i++) {\r\n            this.NodeArrayXiaZhu[i].getChildByName(\"所有下注\").getComponent(cc.Label).string =\r\n                (data[i] / Global.exchangeRate).toFixed(2);\r\n        }\r\n    },\r\n\r\n    //调整界面交互性\r\n    SetPanelInteraction: function (interactable) {\r\n        var length = this.BtnArrayInteraction.length;\r\n        for (var i = 0; i < length; i++) {\r\n            this.BtnArrayInteraction[i].interactable = interactable;\r\n        }\r\n    },\r\n\r\n    history: function (lines) {\r\n        var allnode = this.show_history.children;\r\n        if (allnode.length >= 20) {\r\n            allnode[0].destroy();\r\n        }\r\n        var n = cc.instantiate(this.history_shuiguo);\r\n        n.getComponent(cc.Sprite).spriteFrame = this.icon[lines];\r\n        n.parent = this.show_history;\r\n    }\r\n});"]}