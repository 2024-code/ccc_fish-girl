{"version":3,"sources":["assets\\Script\\Lobby\\matchRace.js"],"names":["cc","Class","Component","properties","list","Node","pb","Prefab","init","dataList","console","log","pbList","removeAllChildren","index","i","initPb","unschedule","runAct","length","schedule","shift","removeFromParent","data","p","instantiate","head","getChildByName","getComponent","Sprite","Helper","loadHead","head_url","texture","spriteFrame","Label","string","nick_name","win_all","play","addChild","push"],"mappings":";;;;;;AAAAA,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAGLC,EAAAA,UAAU,EAAE;AACRC,IAAAA,IAAI,EAAEJ,EAAE,CAACK,IADD;AAERC,IAAAA,EAAE,EAAEN,EAAE,CAACO;AAFC,GAHP;AAQLC,EAAAA,IARK,gBAQAC,QARA,EAQU;AACXC,IAAAA,OAAO,CAACC,GAAR,CAAYF,QAAZ;AACA,SAAKG,MAAL,GAAc,EAAd;AACA,SAAKH,QAAL,GAAgBA,QAAhB;AACA,SAAKL,IAAL,CAAUS,iBAAV;AACA,SAAKC,KAAL,GAAa,CAAb;;AACA,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,IAAI,CAArB,EAAwBA,CAAC,EAAzB,EAA6B;AACzB,OAAC,CAAC,KAAKN,QAAL,CAAcM,CAAd,CAAF,IAAsB,KAAKC,MAAL,CAAY,KAAKP,QAAL,CAAcM,CAAd,CAAZ,CAAtB;AACH;;AACD,SAAKE,UAAL,CAAgB,KAAKC,MAArB;;AACA,QAAI,KAAKT,QAAL,CAAcU,MAAd,GAAuB,CAA3B,EAA8B;AAC1B,WAAKC,QAAL,CAAc,KAAKF,MAAnB,EAA2B,CAA3B;AACH;AACJ,GArBI;AAuBLA,EAAAA,MAvBK,oBAuBI;AACL,QAAIZ,EAAE,GAAG,KAAKM,MAAL,CAAYS,KAAZ,EAAT;AACAf,IAAAA,EAAE,CAACgB,gBAAH;AACA,SAAKR,KAAL,GAAa,KAAKA,KAAL,IAAc,KAAKL,QAAL,CAAcU,MAA5B,GAAqC,CAArC,GAAyC,KAAKL,KAA3D;AACA,SAAKE,MAAL,CAAY,KAAKP,QAAL,CAAc,KAAKK,KAAnB,CAAZ;AACH,GA5BI;AA+BLE,EAAAA,MA/BK,kBA+BEO,IA/BF,EA+BQ;AACT,QAAIC,CAAC,GAAGxB,EAAE,CAACyB,WAAH,CAAe,KAAKnB,EAApB,CAAR;AACA,QAAIoB,IAAI,GAAGF,CAAC,CAACG,cAAF,CAAiB,MAAjB,EAAyBC,YAAzB,CAAsC5B,EAAE,CAAC6B,MAAzC,CAAX;AACAC,IAAAA,MAAM,CAACC,QAAP,CAAgBR,IAAI,CAACS,QAArB,EAA+B,UAAAC,OAAO,EAAI;AACtCP,MAAAA,IAAI,CAACQ,WAAL,GAAmBD,OAAnB;AACH,KAFD;AAGAT,IAAAA,CAAC,CAACG,cAAF,CAAiB,MAAjB,EAAyBC,YAAzB,CAAsC5B,EAAE,CAACmC,KAAzC,EAAgDC,MAAhD,GAAyDb,IAAI,CAACc,SAA9D;AACAb,IAAAA,CAAC,CAACG,cAAF,CAAiB,WAAjB,EAA8BC,YAA9B,CAA2C5B,EAAE,CAACmC,KAA9C,EAAqDC,MAArD,GAAiEb,IAAI,CAACe,OAAtE,iBAAmFf,IAAI,CAACgB,IAAL,GAAUhB,IAAI,CAACe,OAAlG;AACA,SAAKlC,IAAL,CAAUoC,QAAV,CAAmBhB,CAAnB;AACA,SAAKZ,MAAL,CAAY6B,IAAZ,CAAiBjB,CAAjB;AACA,SAAKV,KAAL;AACH,GA1CI,CA4CL;;AA5CK,CAAT","sourceRoot":"/","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        list: cc.Node,\r\n        pb: cc.Prefab,\r\n    },\r\n\r\n    init(dataList) {\r\n        console.log(dataList);\r\n        this.pbList = [];\r\n        this.dataList = dataList;\r\n        this.list.removeAllChildren();\r\n        this.index = 0;\r\n        for (let i = 0; i <= 4; i++) {\r\n            !!this.dataList[i] && this.initPb(this.dataList[i]);\r\n        }\r\n        this.unschedule(this.runAct);\r\n        if (this.dataList.length > 5) {\r\n            this.schedule(this.runAct, 2);\r\n        }\r\n    },\r\n\r\n    runAct() {\r\n        let pb = this.pbList.shift();\r\n        pb.removeFromParent();\r\n        this.index = this.index >= this.dataList.length ? 0 : this.index;\r\n        this.initPb(this.dataList[this.index]);\r\n    },\r\n\r\n\r\n    initPb(data) {\r\n        let p = cc.instantiate(this.pb);\r\n        let head = p.getChildByName('face').getComponent(cc.Sprite);\r\n        Helper.loadHead(data.head_url, texture => {\r\n            head.spriteFrame = texture;\r\n        });\r\n        p.getChildByName('name').getComponent(cc.Label).string = data.nick_name;\r\n        p.getChildByName('New Label').getComponent(cc.Label).string = `${data.win_all}胜  ${data.play-data.win_all}负`;\r\n        this.list.addChild(p);\r\n        this.pbList.push(p);\r\n        this.index++;\r\n    },\r\n\r\n    // update (dt) {},\r\n});"]}